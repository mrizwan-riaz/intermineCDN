var clusterfck=function(){var e=function(t,n){var r=e.resolve(t,n||"/");var i=e.modules[r];if(!i)throw new Error("Failed to resolve module "+t+", tried "+r);var s=i._cached?i._cached:i();return s};e.paths=[];e.modules={};e.extensions=[".js",".coffee"];e._core={assert:true,events:true,fs:true,path:true,vm:true};e.resolve=function(){return function(t,n){function u(t){if(e.modules[t]){return t}for(var n=0;n<e.extensions.length;n++){var r=e.extensions[n];if(e.modules[t+r])return t+r}}function a(t){t=t.replace(/\/+$/,"");var n=t+"/package.json";if(e.modules[n]){var i=e.modules[n]();var s=i.browserify;if(typeof s==="object"&&s.main){var o=u(r.resolve(t,s.main));if(o)return o}else if(typeof s==="string"){var o=u(r.resolve(t,s));if(o)return o}else if(i.main){var o=u(r.resolve(t,i.main));if(o)return o}}return u(t+"/index")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r];var s=u(i+"/"+e);if(s)return s;var o=a(i+"/"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;if(e==="/")t=[""];else t=r.normalize(e).split("/");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}if(!n)n="/";if(e._core[t])return t;var r=e.modules.path();var i=n||".";if(t.match(/^(?:\.\.?\/|\/)/)){var s=u(r.resolve(i,t))||a(r.resolve(i,t));if(s)return s}var o=f(t,i);if(o)return o;throw new Error("Cannot find module '"+t+"'")}}();e.alias=function(n,r){var i=e.modules.path();var s=null;try{s=e.resolve(n+"/package.json","/")}catch(o){s=e.resolve(n,"/")}var u=i.dirname(s);var a=t(e.modules);for(var f=0;f<a.length;f++){var l=a[f];if(l.slice(0,u.length+1)===u+"/"){var c=l.slice(u.length);e.modules[r+c]=e.modules[u+c]}else if(l===u){e.modules[r]=e.modules[u]}}};e.define=function(t,n){var r=e._core[t]?"":e.modules.path().dirname(t);var i=function(t){return e(t,r)};i.resolve=function(t){return e.resolve(t,r)};i.modules=e.modules;i.define=e.define;var s={exports:{}};e.modules[t]=function(){e.modules[t]._cached=s.exports;n.call(s.exports,i,s,s.exports,r,t);e.modules[t]._cached=s.exports;return s.exports}};var t=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};if(typeof process==="undefined")process={};if(!process.nextTick)process.nextTick=function(e){setTimeout(e,0)};if(!process.title)process.title="browser";if(!process.binding)process.binding=function(t){if(t==="evals")return e("vm");else throw new Error("No such module")};if(!process.cwd)process.cwd=function(){return"."};e.define("path",function(e,t,n,r,i){function s(e,t){var n=[];for(var r=0;r<e.length;r++){if(t(e[r],r,e))n.push(e[r])}return n}function o(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];if(i=="."){e.splice(r,1)}else if(i===".."){e.splice(r,1);n++}else if(n){e.splice(r,1);n--}}if(t){for(;n--;n){e.unshift("..")}}return e}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=false;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:process.cwd();if(typeof r!=="string"||!r){continue}e=r+"/"+e;t=r.charAt(0)==="/"}e=o(s(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."};n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";e=o(s(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&n){e+="/"}return(t?"/":"")+e};n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(s(e,function(e,t){return e&&typeof e==="string"}).join("/"))};n.dirname=function(e){var t=u.exec(e)[1]||"";var n=false;if(!t){return"."}else if(t.length===1||n&&t.length<=3&&t.charAt(1)===":"){return t}else{return t.substring(0,t.length-1)}};n.basename=function(e,t){var n=u.exec(e)[2]||"";if(t&&n.substr(-1*t.length)===t){n=n.substr(0,n.length-t.length)}return n};n.extname=function(e){return u.exec(e)[3]||""}});e.define("/clusterfck.js",function(e,t,n,r,i){t.exports={hcluster:e("./hcluster"),kmeans:e("./kmeans")}});e.define("/hcluster.js",function(e,t,n,r,i){var s=e("./distance");var o=function(e,t,n){this.distance=e;this.linkage=t;this.threshold=n==undefined?Infinity:n};o.prototype={cluster:function(e,t,n){this.clusters=[];this.dists=[];this.mins=[];this.index=[];for(var r=0;r<e.length;r++){var i={value:e[r],key:r,index:r,size:1};this.clusters[r]=i;this.index[r]=i;this.dists[r]=[];this.mins[r]=0}for(var r=0;r<this.clusters.length;r++){for(var s=0;s<=r;s++){var o=r==s?Infinity:this.distance(this.clusters[r].value,this.clusters[s].value);this.dists[r][s]=o;this.dists[s][r]=o;if(o<this.dists[r][this.mins[r]]){this.mins[r]=s}}}var u=this.mergeClosest();var r=0;while(u){if(n&&r++%t==0){n(this.clusters)}u=this.mergeClosest()}this.clusters.forEach(function(e){delete e.key;delete e.index});return this.clusters},mergeClosest:function(){var e=0,t=Infinity;for(var n=0;n<this.clusters.length;n++){var r=this.clusters[n].key,i=this.dists[r][this.mins[r]];if(i<t){e=r;t=i}}if(t>=this.threshold){return false}var s=this.index[e],o=this.index[this.mins[e]];var u={left:s,right:o,key:s.key,size:s.size+o.size};this.clusters[s.index]=u;this.clusters.splice(o.index,1);this.index[s.key]=u;for(var n=0;n<this.clusters.length;n++){var a=this.clusters[n];var i;if(s.key==a.key){i=Infinity}else if(this.linkage=="single"){i=this.dists[s.key][a.key];if(this.dists[s.key][a.key]>this.dists[o.key][a.key]){i=this.dists[o.key][a.key]}}else if(this.linkage=="complete"){i=this.dists[s.key][a.key];if(this.dists[s.key][a.key]<this.dists[o.key][a.key]){i=this.dists[o.key][a.key]}}else if(this.linkage=="average"){i=(this.dists[s.key][a.key]*s.size+this.dists[o.key][a.key]*o.size)/(s.size+o.size)}else{i=this.distance(a.value,s.value)}this.dists[s.key][a.key]=this.dists[a.key][s.key]=i}for(var n=0;n<this.clusters.length;n++){var f=this.clusters[n].key;if(this.mins[f]==s.key||this.mins[f]==o.key){var t=f;for(var l=0;l<this.clusters.length;l++){var c=this.clusters[l].key;if(this.dists[f][c]<this.dists[f][t]){t=c}}this.mins[f]=t}this.clusters[n].index=n}delete s.key;delete o.key;delete s.index;delete o.index;return true}};var u=function(e,t,n,r,i,u){t=t||"euclidean";n=n||"average";if(typeof t=="string"){t=s[t]}var a=(new o(t,n,r)).cluster(e,i,u);if(r===undefined){return a[0]}return a};t.exports=u});e.define("/distance.js",function(e,t,n,r,i){t.exports={euclidean:function(e,t){var n=0;for(var r=0;r<e.length;r++){n+=Math.pow(t[r]-e[r],2)}return Math.sqrt(n)},manhattan:function(e,t){var n=0;for(var r=0;r<e.length;r++){n+=Math.abs(t[r]-e[r])}return n},max:function(e,t){var n=0;for(var r=0;r<e.length;r++){n=Math.max(n,Math.abs(t[r]-e[r]))}return n}}});e.define("/kmeans.js",function(e,t,n,r,i){function o(e,t){var n=e.slice(0);n.sort(function(){return Math.round(Math.random())-.5});return n.slice(0,t)}function u(e,t,n){var r=Infinity,i=0;for(var s=0;s<t.length;s++){var o=n(e,t[s]);if(o<r){r=o;i=s}}return i}function a(e,t,n,r,i){n=n||"euclidean";if(typeof n=="string"){n=s[n]}var a=o(e,t);var f=new Array(e.length);var l=new Array(t);var c=0;var h=true;while(h){for(var p=0;p<e.length;p++){f[p]=u(e[p],a,n)}h=false;for(var d=0;d<t;d++){var v=[];f.forEach(function(t,n){if(t==d){v.push(e[n])}});if(!v.length){continue}var m=a[d];var g=new Array(m.length);for(var y=0;y<m.length;y++){var b=0;for(var p=0;p<v.length;p++){b+=v[p][y]}g[y]=b/v.length;if(g[y]!=m[y]){h=true}}a[d]=g;l[d]=v}if(i&&c++%r==0){i(l)}}return l}var s=e("./distance");t.exports=a});return e("/clusterfck")}()