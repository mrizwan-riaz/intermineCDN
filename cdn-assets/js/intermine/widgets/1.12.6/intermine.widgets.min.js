(function(){var m,j,S,z,F,N,J,O,Y,A={},ka={"noresults.eco":function(a){a||(a={});var b=[],l=a.safe,d=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},d||(d=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="alert alert-info">\n    <p>');b.push((this.text||"The Widget has no results.").ecoSafe?this.text||"The Widget has no results.":
void 0!==(this.text||"The Widget has no results.")&&null!=(this.text||"The Widget has no results.")?d(this.text||"The Widget has no results."):"");b.push("</p>\n</div>")}.call(a),a.safe=l,a.escape=d,b.join("")},"extra.eco":function(a){a||(a={});var b=[],l=function(c){return c&&c.ecoSafe?c:void 0!==c&&null!=c?e(c):""},d=a.safe,e=a.escape;return a.safe=function(c){if(c&&c.ecoSafe)return c;(void 0===c||null==c)&&(c="");c=new String(c);return c.ecoSafe=!0,c},e||(e=a.escape=function(c){return(""+c).replace(/&/g,
"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){var c,a,e,d;if(b.push('<div class="group" style="display:inline-block;margin-right:5px;float:left">\n    <label>'),b.push(l(this.label)),b.push("</label>\n    "),1<this.possible.length){b.push('\n        <select name="');b.push(l(this.label));b.push('" class="span2">\n            ');d=this.possible;a=0;for(e=d.length;e>a;a++)c=d[a],b.push('\n                <option value="'),b.push(l(c)),b.push('" '),this.selected===
c&&b.push(l('selected="selected"')),b.push(">\n                    "),b.push(l(c)),b.push("\n                </option>\n            ");b.push("\n        </select>\n    ")}else b.push("\n        "),b.push(l(this.possible[0])),b.push("\n    ");b.push('\n</div>\n<div style="clear:both"></div>')}.call(a),a.safe=d,a.escape=e,b.join("")},"invalidjsonkey.eco":function(a){a||(a={});var b=[],l=function(c){return c&&c.ecoSafe?c:void 0!==c&&null!=c?e(c):""},d=a.safe,e=a.escape;return a.safe=function(c){if(c&&
c.ecoSafe)return c;(void 0===c||null==c)&&(c="");c=new String(c);return c.ecoSafe=!0,c},e||(e=a.escape=function(c){return(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<li style="vertical-align:bottom">\n    <span style="display:inline-block" class="label label-important">');b.push(l(this.key));b.push("</span> is ");b.push(l(this.actual));b.push("; was expecting ");b.push(l(this.expected));b.push("\n</li>")}.call(a),a.safe=d,a.escape=
e,b.join("")},"error.eco":function(a){a||(a={});var b=[],l=function(c){return c&&c.ecoSafe?c:void 0!==c&&null!=c?e(c):""},d=a.safe,e=a.escape;return a.safe=function(c){if(c&&c.ecoSafe)return c;(void 0===c||null==c)&&(c="");c=new String(c);return c.ecoSafe=!0,c},e||(e=a.escape=function(c){return(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="alert alert-block">\n    <h4 class="alert-heading">');b.push(l(this.title));b.push(" for ");
b.push(l(this.name));b.push("</h4>\n    <p>");b.push(this.text);b.push("</p>\n</div>")}.call(a),a.safe=d,a.escape=e,b.join("")},"actions.eco":function(a){a||(a={});var b=[],l=a.safe,d=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},d||(d=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<a class="btn btn-small view">View</a>\n<a class="btn btn-small export">Download</a>')}.call(a),
a.safe=l,a.escape=d,b.join("")},"loading.eco":function(a){a||(a={});var b=[],d=a.safe,f=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="loading" style="background:rgba(255,255,255,0.9);position:absolute;top:0;left:0;height:100%;width:100%;text-align:center;">\n    <p style="padding-top:50%;font-weight:bold;">Loading &hellip;</p>\n</div>')}.call(a),
a.safe=d,a.escape=f,b.join("")},"enrichment.correction.eco":function(a){a||(a={});var b=[],d=a.safe,f=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="group correction" style="display:inline-block;margin-right:10px;float:left;height:60px">\n    <label>Normalise by length <em class="badge badge-info" style="font-size:11px;font-family:serif;padding:1px 3px;border-radius:2px">i</em><div class="hjalp" style="padding:0"></div></label>\n\n    ');
this.gene_length_correction?b.push('\n        <a class="btn btn-small active correction" style="float:right">Normalised</a>\n    '):b.push('\n        <a class="btn btn-small correction" style="float:right">Normalise</a>\n    ');b.push("\n\n    ");this.percentage_gene_length_not_null&&(b.push("\n    \t"),b.push(this.percentage_gene_length_not_null&&this.percentage_gene_length_not_null.ecoSafe?this.percentage_gene_length_not_null:void 0!==this.percentage_gene_length_not_null&&null!=this.percentage_gene_length_not_null?
f(this.percentage_gene_length_not_null):""),b.push(' of genes in your list do not have a length and will be discarded, <a class="which" style="cursor:pointer">see which</a>.\n    '));b.push("\n</div>")}.call(a),a.safe=d,a.escape=f,b.join("")},"enrichment.populationlist.eco":function(a){a||(a={});var b=[],d=function(c){return c&&c.ecoSafe?c:void 0!==c&&null!=c?e(c):""},f=a.safe,e=a.escape;return a.safe=function(c){if(c&&c.ecoSafe)return c;(void 0===c||null==c)&&(c="");c=new String(c);return c.ecoSafe=
!0,c},e||(e=a.escape=function(c){return(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){var c,a,e,f,g,j,k;b.push('<table class="table table-striped">\n    <tbody>\n        <tr><td>\n            ');null==this.current?b.push('\n                <strong><a href="#">Default</a></strong>\n            '):b.push('\n                <a href="#">Default</a>\n            ');b.push("\n        </td></tr>\n        ");j=this.lists;a=0;for(f=j.length;f>a;a++){c=
j[a];b.push("\n            <tr><td>\n                ");c.name===this.current?(b.push("\n                    <strong>\n                        <a "),c.description&&(b.push('title="'),b.push(d(c.description)),b.push('"')),b.push(' href="#">'),b.push(d(c.name)),b.push("</a> ("),b.push(d(c.size)),b.push(")\n                    </strong>\n                ")):(b.push("\n                    <a "),c.description&&(b.push('title="'),b.push(d(c.description)),b.push('"')),b.push(' href="#">'),b.push(d(c.name)),
b.push("</a> ("),b.push(d(c.size)),b.push(")\n                "));b.push("\n                \n                ");k=c.tags;e=0;for(g=k.length;g>e;e++)c=k[e],b.push('\n                    <span class="label" style="vertical-align:text-bottom">'),b.push(d(c)),b.push("</span>\n                ");b.push("\n            </td></tr>\n        ")}b.push("\n    </tbody>\n</table>")}.call(a),a.safe=f,a.escape=e,b.join("")},"enrichment.table.eco":function(a){a||(a={});var b=[],d=function(c){return c&&c.ecoSafe?
c:void 0!==c&&null!=c?e(c):""},f=a.safe,e=a.escape;return a.safe=function(c){if(c&&c.ecoSafe)return c;(void 0===c||null==c)&&(c="");c=new String(c);return c.ecoSafe=!0,c},e||(e=a.escape=function(c){return(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('\x3c!-- actual fixed head --\x3e\n<div class="head" style="display:table">\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;"><input type="checkbox" class="check" /></div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;">');
b.push(d(this.label));b.push('</div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;white-space:nowrap">p-Value <a href="http://intermine.readthedocs.org/en/latest/embedding/list-widgets/enrichment-widgets/" target="_blank" class="badge badge-info" style="font-size:11px;font-family:serif;padding:1px 3px;border-radius:2px;font-style:italic;color:#FFF!important">i</a></div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;">Matches</div>\n    <div style="clear:both"></div>\n</div>\n<div class="wrapper" style="overflow:auto;overflow-x:hidden">\n    <table class="table table-striped">\n        \x3c!-- head for proper cell width --\x3e\n        <thead style="visibility:hidden">\n            <tr>\n                <th></th>\n                <th>');
b.push(d(this.label));b.push("</th>\n                <th>p-Value</th>\n                <th>Matches</th>\n            </tr>\n        </thead>\n        <tbody>\n            \x3c!-- loop enrichment.row.eco --\x3e\n        </tbody>\n    </table>\n</div>")}.call(a),a.safe=f,a.escape=e,b.join("")},"enrichment.form.eco":function(a){a||(a={});var b=[],d=function(c){return c&&c.ecoSafe?c:void 0!==c&&null!=c?e(c):""},f=a.safe,e=a.escape;return a.safe=function(c){if(c&&c.ecoSafe)return c;(void 0===c||null==
c)&&(c="");c=new String(c);return c.ecoSafe=!0,c},e||(e=a.escape=function(c){return(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){var c,a,e,f;b.push('<form style="margin:0">\n    <div class="group" style="display:inline-block;margin-right:10px;float:left;height:60px">\n        <label>Test Correction</label>\n        <select name="errorCorrection" class="span2">\n            ');f=this.errorCorrections;a=0;for(e=f.length;e>a;a++)c=f[a],b.push('\n                <option value="'),
b.push(d(c)),b.push('" '),this.options.errorCorrection===c&&b.push(d('selected="selected"')),b.push(">\n                    "),b.push(d(c)),b.push("\n            </option>\n            ");b.push('\n        </select>\n    </div>\n\n    <div class="group" style="display:inline-block;margin-right:10px;float:left;height:60px">\n        <label>Max p-value</label>\n        <select name="pValue" class="span2">\n            ');f=this.pValues;a=0;for(e=f.length;e>a;a++)c=f[a],b.push('\n                <option value="'),
b.push(d(c)),b.push('" '),this.options.pValue===c&&b.push(d('selected="selected"')),b.push(">\n                    "),b.push(d(c)),b.push("\n                </option>\n            ");b.push('\n        </select>\n    </div>\n</form>\n<div style="clear:both"></div>')}.call(a),a.safe=f,a.escape=e,b.join("")},"enrichment.eco":function(a){a||(a={});var b=[],d=function(c){return c&&c.ecoSafe?c:void 0!==c&&null!=c?e(c):""},f=a.safe,e=a.escape;return a.safe=function(c){if(c&&c.ecoSafe)return c;(void 0===
c||null==c)&&(c="");c=new String(c);return c.ecoSafe=!0,c},e||(e=a.escape=function(c){return(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="header">\n    <h3>');this.title&&b.push(d(this.title));b.push("</h3>\n    <p>");this.description&&b.push(this.description);b.push("</p>\n    ");this.notAnalysed?(b.push("\n        <p>Number of "),b.push(d(this.type)),b.push("s in this list not analysed in this widget: <a>"),b.push(d(this.notAnalysed)),
b.push("</a></p>\n    ")):b.push("\n        <p>All items in your list have been analysed.</p>\n    ");b.push('\n\n    <div class="form">\n        \x3c!-- enrichment.form.eco --\x3e\n    </div>\n\n    <div class="actions" style="padding:10px 0">\n        \x3c!-- actions.eco --\x3e\n    </div>\n</div>\n<div class="content">\n    \x3c!-- enrichment.table.eco --\x3e\n</div>')}.call(a),a.safe=f,a.escape=e,b.join("")},"chart.eco":function(a){a||(a={});var b=[],d=function(c){return c&&c.ecoSafe?c:void 0!==
c&&null!=c?e(c):""},f=a.safe,e=a.escape;return a.safe=function(c){if(c&&c.ecoSafe)return c;(void 0===c||null==c)&&(c="");c=new String(c);return c.ecoSafe=!0,c},e||(e=a.escape=function(c){return(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="header">\n    <h3>');this.title&&b.push(d(this.title));b.push("</h3>\n    <p>");this.description&&b.push(this.description);b.push("</p>\n    ");this.notAnalysed?(b.push("\n        <p>Number of "),
b.push(d(this.type)),b.push("s in this list not analysed in this widget: <a>"),b.push(d(this.notAnalysed)),b.push("</a></p>\n    ")):b.push("\n        <p>All items in your list have been analysed.</p>\n    ");b.push('\n\n    <div class="form">\n        <form style="margin:0">\n            \x3c!-- extra.eco --\x3e\n        </form>\n    </div>\n\n    <div class="actions" style="padding:10px 0">\n        \x3c!-- chart.actions.eco --\x3e\n    </div>\n</div>\n<div class="content"></div>')}.call(a),a.safe=
f,a.escape=e,b.join("")},"chart.actions.eco":function(a){a||(a={});var b=[],d=a.safe,f=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<a class="btn btn-small view-all">View in table</a>')}.call(a),a.safe=d,a.escape=f,b.join("")},"enrichment.row.eco":function(a){a||(a={});
var b=[],d=function(a){return a&&a.ecoSafe?a:void 0!==a&&null!=a?e(a):""},f=a.safe,e=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<td class="check"><input type="checkbox" ');this.row.selected&&b.push('checked="checked"');b.push(' /></td>\n<td class="description">\n    ');
b.push(d(this.row.description));b.push("\n    ");this.row.externalLink&&(b.push('\n        [<a href="'),b.push(this.row.externalLink),b.push('" target="_blank">'),b.push(d(this.row.identifier)),b.push("</a>]\n    "));b.push('\n</td>\n<td class="pValue" style="white-space:nowrap">');b.push(d(this.row["p-value"]));b.push('</td>\n<td class="matches">\n    <a class="count" style="cursor:pointer">');b.push(d(this.row.matches));b.push("</a>\n</td>")}.call(a),a.safe=f,a.escape=e,b.join("")},"enrichment.population.eco":function(a){a||
(a={});var b=[],d=a.safe,f=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="group background" style="display:inline-block;margin-right:10px;float:left;height:60px">\n    <label>Background population</label>\n    ');b.push(this.current&&this.current.ecoSafe?this.current:
void 0!==this.current&&null!=this.current?f(this.current):"");b.push(' <a class="btn btn-small change">Change</a>\n\n    <div class="popover" style="position:absolute;top:0;right:0;z-index:1;display:none">\n        <div class="popover-inner">\n            <a style="cursor:pointer;margin:2px 5px 0 0" class="close">\u00d7</a>\n            <h4 class="popover-title">Change background population</h4>\n            <div class="popover-content">\n                <p style="margin-bottom:5px">\n                    ');
this.loggedIn?b.push('\n                        <input type="checkbox" class="save" style="vertical-align:top" /> Save your preference for next time\n                    '):b.push("\n                        Login to save your preference for next time\n                    ");b.push('\n                </p>\n\n                <input type="text" class="filter" style="width:96%" placeholder="Filter..." />\n                \n                <div class="values" style="max-height:300px;overflow-y:auto">\n                    \x3c!-- enrichment.populationlist.eco --\x3e\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}.call(a),
a.safe=d,a.escape=f,b.join("")},"table.eco":function(a){a||(a={});var b=[],d=function(a){return a&&a.ecoSafe?a:void 0!==a&&null!=a?e(a):""},f=a.safe,e=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="header">\n    <h3>');this.title&&b.push(d(this.title));b.push("</h3>\n    <p>");
this.description&&b.push(this.description);b.push("</p>\n    ");this.notAnalysed?(b.push("\n        <p>Number of "),b.push(d(this.type)),b.push("s in this list not analysed in this widget: <a>"),b.push(d(this.notAnalysed)),b.push("</a></p>\n    ")):b.push("\n        <p>All items in your list have been analysed.</p>\n    ");b.push('\n\n    <div class="actions" style="padding:10px 0">\n        \x3c!-- actions.eco --\x3e\n    </div>\n</div>\n<div class="content">\n    \x3c!-- table.table.eco --\x3e\n</div>')}.call(a),
a.safe=f,a.escape=e,b.join("")},"table.table.eco":function(a){a||(a={});var b=[],d=function(a){return a&&a.ecoSafe?a:void 0!==a&&null!=a?e(a):""},f=a.safe,e=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){var a,e,f,g;b.push('\x3c!-- actual fixed head --\x3e\n<div class="head" style="display:table">\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;"><input type="checkbox" class="check" /></div>\n    ');
g=this.columns;e=0;for(f=g.length;f>e;e++)a=g[e],b.push('\n        <div style="font-weight:bold;display:table-cell;padding:0 8px;">'),b.push(d(a)),b.push("</div>\n    ");b.push('\n    <div style="clear:both"></div>\n</div>\n<div class="wrapper" style="overflow:auto;overflow-x:hidden">\n    <table class="table table-striped">\n        \x3c!-- head for proper cell width --\x3e\n        <thead style="visibility:hidden">\n            <tr>\n                <th></th>\n                ');g=this.columns;
e=0;for(f=g.length;f>e;e++)a=g[e],b.push("\n                    <th>"),b.push(d(a)),b.push("</th>\n                ");b.push("\n            </tr>\n        </thead>\n        <tbody>\n            \x3c!-- loop table.row.eco --\x3e\n        </tbody>\n    </table>\n</div>")}.call(a),a.safe=f,a.escape=e,b.join("")},"table.row.eco":function(a){a||(a={});var b=[],d=function(a){return a&&a.ecoSafe?a:void 0!==a&&null!=a?e(a):""},f=a.safe,e=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===
a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){var a,e,f,g;b.push('<td class="check"><input type="checkbox" ');this.row.selected&&b.push('checked="checked"');b.push(" /></td>\n");g=this.row.descriptions;e=0;for(f=g.length;f>e;e++)a=g[e],b.push("\n    <td>"),b.push(d(a)),b.push("</td>\n");b.push('\n<td class="matches">\n    <a class="count" style="cursor:pointer">');
b.push(d(this.row.matches));b.push("</a>\n</td>")}.call(a),a.safe=f,a.escape=e,b.join("")},"popover.values.eco":function(a){a||(a={});var b=[],d=function(a){return a&&a.ecoSafe?a:void 0!==a&&null!=a?e(a):""},f=a.safe,e=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){var a,e,f,g;b.push("<h4>");
b.push(d(this.size));b.push(" ");b.push(d(this.type));1!==parseInt(this.size)&&b.push(d("s"));b.push(":</h4>\n\n");g=this.values.slice(0,+(this.valuesLimit-1)+1||9E9);e=0;for(f=g.length;f>e;e++)a=g[e],b.push('\n    <a href="#" class="match">'),b.push(d(a)),b.push("</a>\n");b.push("\n");this.values.length>this.valuesLimit&&b.push("&hellip;");b.push("\n")}.call(a),a.safe=f,a.escape=e,b.join("")},"popover.help.eco":function(a){a||(a={});var b=[],d=function(a){return a&&a.ecoSafe?a:void 0!==a&&null!=
a?e(a):""},f=a.safe,e=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="popover" style="position:absolute;top:5px;right:0;z-index:1;display: block;">\n    <div class="popover-inner">\n        <a style="cursor:pointer;margin:2px 5px 0 0" class="close">\u00d7</a>\n        <h3 class="popover-title">');
b.push(d(this.title));b.push('</h3>\n        <div class="popover-content">\n            <p>');b.push(d(this.text));b.push("</p>\n        </div>\n    </div>\n</div>")}.call(a),a.safe=f,a.escape=e,b.join("")},"popover.eco":function(a){a||(a={});var b=[],d=function(a){return a&&a.ecoSafe?a:void 0!==a&&null!=a?e(a):""},f=a.safe,e=a.escape;return a.safe=function(a){if(a&&a.ecoSafe)return a;(void 0===a||null==a)&&(a="");a=new String(a);return a.ecoSafe=!0,a},e||(e=a.escape=function(a){return(""+a).replace(/&/g,
"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){b.push('<div class="popover" style="position:absolute;top:5px;right:0;z-index:1;display:block">\n    <div class="popover-inner" style="');b.push(d(this.style));b.push('">\n        <a style="cursor:pointer;margin:2px 5px 0 0" class="close">\u00d7</a>\n        <h3 class="popover-title">\n            ');b.push(d(this.description.slice(0,+(this.descriptionLimit-1)+1||9E9)));b.push("\n            ");this.description.length>
this.descriptionLimit&&b.push("&hellip;");b.push('\n        </h3>\n        <div class="popover-content">\n            <div class="values">\n                \x3c!-- popover.values.eco --\x3e\n            </div>\n            <div style="margin-top:10px">\n                <a class="btn btn-small btn-primary results">View results</a>\n                <a class="btn btn-small list">Create list</a>\n            </div>\n        </div>\n    </div>\n</div>')}.call(a),a.safe=f,a.escape=e,b.join("")}},d,ba,P,
Q,ca,da={}.hasOwnProperty,n=function(a,b){function d(){this.constructor=a}for(var f in b)da.call(b,f)&&(a[f]=b[f]);d.prototype=b.prototype;a.prototype=new d;a.__super__=b.prototype;return a},g=function(a,b){return function(){return a.apply(b,arguments)}},la=[].indexOf||function(a){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===a)return b;return-1},p=[].slice;Y=O=J=N=F=z=S=j=m=void 0;m=function(){};m.prototype.result=!1;m.prototype.is=function(){return this.result};m.prototype.toString=
function(){return""+this.expected+" but got "+this.actual};var k=function(a){this.actual=a;this.result="string"===typeof a};n(k,m);k.prototype.expected="String";j=k;k=function(a){this.actual=a;this.result=null===a||"string"===typeof a};n(k,m);k.prototype.expected="String or Null";S=k;k=function(a){this.actual=a;this.result="number"===typeof a};n(k,m);k.prototype.expected="Integer";z=k;k=function(a){this.actual=a;this.result="boolean"===typeof a};n(k,m);k.prototype.expected="Boolean true";F=k;k=function(a){this.actual=
a;this.result=null===a||"boolean"===typeof a};n(k,m);k.prototype.expected="Boolean or Null";k=function(a){this.actual=a;this.result=null===a};n(k,m);k.prototype.expected="Null";N=k;k=function(a){this.actual=a;this.result=a instanceof Array};n(k,m);k.prototype.expected="Array";J=k;k=function(a){this.actual=a;this.result=200===a};n(k,m);k.prototype.expected="HTTP code 200";O=k;k=function(a){this.actual=a;this.result=!0;try{JSON.parse(a)}catch(b){this.result=!1}};n(k,m);k.prototype.expected="JSON Object";
Y=k;var K=function(){return ca=K.__super__.constructor.apply(this,arguments)};n(K,m);K.prototype.expected="it to be undefined";var T=function(a,b){var d;null==b&&(b="widget.tsv");d=new Blob([a],{type:""+this.mime+";charset="+this.charset});saveAs(d,b)};T.prototype.mime="text/plain";T.prototype.charset="utf-8";ba=function(a,b){var g,f=this;g=window.open();null==g||"undefined"===typeof g?a.after(this.msg=d("<span/>",{style:"margin-left:5px","class":"label label-inverse",text:"Please enable popups"})):
(g.document.open(),g.document.write("<pre>"+b+"</pre>"),g.document.close());setTimeout(function(){var a;return null!=(a=f.msg)?a.fadeOut():void 0},5E3)};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var d,f;f=this.length>>>0;d=Number(b)||0;d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=f);d<f;){if(d in this&&this[d]===a)return d;d++}return-1});Q=function(a,b){for(var d in b)null==a[d]&&Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};P=function(a){var b,l,f,e,c,k,
m,Z,p,$,aa,A,K,U,P,ea,fa,ga,ma,ca,da,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,B=function(){this.queryRows=g(this.queryRows,this);this.error=g(this.error,this);this.validateType=g(this.validateType,this);this.template=g(this.template,this);var a=this;this.log=this.log||[];this.log.push("Creating wrapping element");d(this.el).html(d("<div/>",{"class":"inner",style:"height:572px;overflow:hidden;position:relative"}));this.el=""+this.el+" div.inner";this.log.push("Initializing InterMine Service");this._service=
new intermine.Service({root:this.service,token:this.token});this.log.push("Monitoring for debug mode");d(window).on("hashchange",function(){if("#debug"===window.location.hash)return d(a.el).append(d("<a/>",{"class":"btn btn-small btn-warning",text:"Debug",style:"z-index:5;position:absolute;display:block;top:0;left:0",click:function(){var b;b=d("<pre/>",{html:a.log.join("\n\n")});return d(a.el).css("overflow","scroll").html(b)}}))})};B.prototype.template=function(a,b){var d;null==b&&(b={});this.log.push("Get eco template `"+
a+"`");return"function"===typeof ka[d=""+a+".eco"]?ka[d](b):void 0};B.prototype.validateType=function(a,b){var d,c,r;this.log.push("Validating "+JSON.stringify(a));d=[];for(c in a)r=a[c],(r="function"===typeof b[c]?new b[c](r):void 0)&&!r.is()&&d.push(this.template("invalidjsonkey",{key:c,actual:r.is(),expected:new String(r)}));if(d.length)return this.error(d,"JSONResponse")};B.prototype.error=function(a,b){null==a&&(a={title:"Error",text:"Generic error"});a.name=this.name||this.id;switch(b){case "AJAXTransport":a.title=
"AJAX Request Failed";break;case "JSONResponse":a.title="Invalid JSON Response",a.text="<ol>"+a.join("")+"</ol>"}d(this.el).html(this.template("error",a));this.log.push(a.title);return this.fireEvent({event:"error",type:b,message:a.title})};B.prototype.fireEvent=function(a){var b,d,c;b=document.createEvent("Events");b.initEvent("InterMine",!0,!0);for(d in a)c=a[d],b[d]=c;b.source="ListWidgets";b.widget={id:this.id,bag:this.bagName,el:this.el,service:this.service};return window.dispatchEvent(b)};B.prototype.queryRows=
function(a,b){var d;this.log.push("Querying for rows");d=this._service;return async.waterfall([function(b){return d.query(a,function(a){return b(null,a)})},function(a,b){return a.rows(function(a){return b(null,a)})}],function(a,d){return b(d)})};var L=function(a,b,d,c,r,e){this.service=a;this.token=b;this.id=d;this.bagName=c;this.el=r;null==e&&(e={});this.render=g(this.render,this);this.widgetOptions=Q(e,this.widgetOptions);this.log=[];L.__super__.constructor.call(this);this.render()};n(L,B);L.prototype.widgetOptions=
{title:!0,description:!0,matchCb:function(a,b){return"undefined"!==typeof console&&null!==console?console.log(a,b):void 0},resultsCb:function(a){return"undefined"!==typeof console&&null!==console?console.log(a):void 0},listCb:function(a){return"undefined"!==typeof console&&null!==console?console.log(a):void 0}};L.prototype.spec={response:{columnTitle:j,title:j,description:j,pathQuery:j,columns:j,pathConstraint:j,requestedAt:j,list:j,type:j,notAnalysed:z,results:J,wasSuccessful:F,error:N,statusCode:O}};
L.prototype.render=function(){var a,b,c=this;b=window.setTimeout(function(){return d(c.el).append(c.loading=d(c.template("loading")))},400);null!=(a=this.view)&&a.undelegateEvents();a={widget:this.id,list:this.bagName,token:this.token};this.log.push("Sending data payload "+JSON.stringify(a));return d.ajax({url:""+this.service+"list/table",dataType:"jsonp",data:a,success:function(a){var d;c.log.push("Received a response "+JSON.stringify(a));window.clearTimeout(b);null!=(d=c.loading)&&d.remove();c.validateType(a,
c.spec.response);if(a.wasSuccessful)return c.name=a.title,c.log.push("Creating new TableView"),c.view=new ga({widget:c,el:c.el,template:c.template,response:a,options:c.widgetOptions})},error:function(){clearTimeout(b);return c.error({text:""+c.service+"list/table"},"AJAXTransport")}})};ma=L;var G=function(a,b,d,c,e,h,f){this.service=a;this.token=b;this.lists=d;this.id=c;this.bagName=e;this.el=h;null==f&&(f={});this.render=g(this.render,this);this.widgetOptions=Q(f,this.widgetOptions);this.formOptions=
{errorCorrection:"Holm-Bonferroni",pValue:"0.05"};this.log=[];G.__super__.constructor.call(this);this.render()};n(G,B);G.prototype.widgetOptions={title:!0,description:!0,matchCb:function(a,b){return"undefined"!==typeof console&&null!==console?console.log(a,b):void 0},resultsCb:function(a){return"undefined"!==typeof console&&null!==console?console.log(a):void 0},listCb:function(a){return"undefined"!==typeof console&&null!==console?console.log(a):void 0}};G.prototype.errorCorrections=["Holm-Bonferroni",
"Benjamini Hochberg","Bonferroni","None"];G.prototype.pValues=["0.05","0.10","1.00"];G.prototype.spec={response:{title:j,description:j,pathQuery:Y,pathConstraint:j,error:N,list:j,notAnalysed:z,requestedAt:j,results:J,label:j,statusCode:O,type:j,wasSuccessful:F,filters:j,filterLabel:j,filterSelectedValue:j,externalLink:j,pathQueryForMatches:j,is_logged:F,current_population:S,message:j,extraAttribute:S}};G.prototype.render=function(){var a,b,c,e,r,h=this;c=window.setTimeout(function(){return d(h.el).append(h.loading=
d(h.template("loading")))},400);null!=(a=this.view)&&a.undelegateEvents();a={widget:this.id,list:this.bagName,correction:this.formOptions.errorCorrection,maxp:this.formOptions.pValue,token:this.token};r=this.formOptions;for(b in r)e=r[b],"errorCorrection"!==b&&("pValue"!==b&&"current_population"!==b&&"remember_population"!==b&&"gene_length_correction"!==b)&&(b="filter"),a[b]=e;this.log.push("Sending data payload "+JSON.stringify(a));return d.ajax({url:""+this.service+"list/enrichment",dataType:"jsonp",
data:a,success:function(a){var b,d;h.log.push("Received a response "+JSON.stringify(a));window.clearTimeout(c);null!=(d=h.loading)&&d.remove();h.validateType(a,h.spec.response);if(a.wasSuccessful)return h.name=a.title,d=function(){var d,c,ha,ia;ha=this.lists;ia=[];d=0;for(c=ha.length;d<c;d++)b=ha[d],b.type===a.type&&0!==b.size&&ia.push(b);return ia}.call(h),h.log.push("Creating new EnrichmentView"),h.view=new A({widget:h,el:h.el,template:h.template,response:a,form:{options:h.formOptions,pValues:h.pValues,
errorCorrections:h.errorCorrections},options:h.widgetOptions,lists:d})},error:function(){clearTimeout(c);return h.error({text:""+h.service+"list/enrichment"},"AJAXTransport")}})};K=G;var H=function(a,b,d,c,e,h){this.service=a;this.token=b;this.id=d;this.bagName=c;this.el=e;null==h&&(h={});this.render=g(this.render,this);this.widgetOptions=Q(h,this.widgetOptions);this.log=[];H.__super__.constructor.call(this);this.render()};n(H,B);H.prototype.widgetOptions={title:!0,description:!0,matchCb:function(a,
b){return"undefined"!==typeof console&&null!==console?console.log(a,b):void 0},resultsCb:function(a){return"undefined"!==typeof console&&null!==console?console.log(a):void 0},listCb:function(a){return"undefined"!==typeof console&&null!==console?console.log(a):void 0}};H.prototype.formOptions={};H.prototype.spec={response:{chartType:j,description:j,error:N,list:j,notAnalysed:z,pathQuery:j,requestedAt:j,results:J,seriesLabels:j,seriesValues:j,statusCode:O,title:j,type:j,wasSuccessful:F,filters:j,filterLabel:j,
filterSelectedValue:j,simplePathQuery:j,domainLabel:j,rangeLabel:j}};H.prototype.render=function(){var a,b,c,e,r,h=this;c=window.setTimeout(function(){return d(h.el).append(h.loading=d(h.template("loading")))},400);null!=(a=this.view)&&a.undelegateEvents();a={widget:this.id,list:this.bagName,token:this.token};r=this.formOptions;for(b in r)e=r[b],"errorCorrection"!==b&&"pValue"!==b&&(a.filter=e);this.log.push("Sending data payload "+JSON.stringify(a));return d.ajax({url:""+this.service+"list/chart",
dataType:"jsonp",data:a,success:function(a){var b;h.log.push("Received a response "+JSON.stringify(a));window.clearTimeout(c);null!=(b=h.loading)&&b.remove();h.validateType(a,h.spec.response);if(a.wasSuccessful)return h.name=a.title,h.log.push("Creating new ChartView"),h.view=new l({widget:h,el:h.el,template:h.template,response:a,form:{options:h.formOptions},options:h.widgetOptions})},error:function(){clearTimeout(c);return h.error({text:""+h.service+"list/chart"},"AJAXTransport")}})};f=H;var I=function(){this.toggleSelected=
g(this.toggleSelected,this);this.validate=g(this.validate,this);return ca=I.__super__.constructor.apply(this,arguments)};n(I,a.Model);I.prototype.defaults={selected:!1};I.prototype.initialize=function(a,b){this.widget=b;return this.validate(a)};I.prototype.validate=function(a){return this.widget.validateType(a,this.spec)};I.prototype.toggleSelected=function(){return this.set({selected:!this.get("selected")})};c=I;var M=function(){return ua=M.__super__.constructor.apply(this,arguments)};n(M,a.Collection);
M.prototype.model=c;M.prototype.selected=function(){return this.filter(function(a){return a.get("selected")})};M.prototype.toggleSelected=function(){var a,b,d,c,e;if(this.models.length-this.selected().length){c=this.models;e=[];b=0;for(d=c.length;b<d;b++)a=c[b],e.push(a.set({selected:!0},{silent:!0}));return e}c=this.models;e=[];b=0;for(d=c.length;b<d;b++)a=c[b],e.push(a.set({selected:!1},{silent:!0}));return e};e=M;var R=function(){return va=R.__super__.constructor.apply(this,arguments)};n(R,c);
R.prototype.spec={description:j,identifier:j,matches:z,"p-value":z,selected:F,externalLink:j};R.prototype.toJSON=function(){var a;a=_.clone(this.attributes);a["p-value"]=0.001>a["p-value"]?a["p-value"].toExponential(6):a["p-value"].toFixed(6);return a};$=R;var V=function(){return wa=V.__super__.constructor.apply(this,arguments)};n(V,e);V.prototype.model=$;p=V;var W=function(){return xa=W.__super__.constructor.apply(this,arguments)};n(W,c);W.prototype.spec={matches:z,identifier:z,descriptions:J,selected:F};
ea=W;var X=function(){return ya=X.__super__.constructor.apply(this,arguments)};n(X,e);X.prototype.model=ea;P=X;var x=function(){this.seeWhich=g(this.seeWhich,this);this.toggleCull=g(this.toggleCull,this);this.hideHelp=g(this.hideHelp,this);this.showHelp=g(this.showHelp,this);this.render=g(this.render,this);return za=x.__super__.constructor.apply(this,arguments)};n(x,a.View);x.prototype.help="Depending on the type of experiment your data comes from, it is sometimes \nnecessary to normalize by gene length in order to get the correct p-values. \nIf your data comes from a genome-wide binding experiment such as ChIP-seq \nor DamID, binding intervals are more likely to be associated with longer \ngenes than shorter ones, and you should therefore normalize by gene length. \nThis is not the case for experiments such as gene expression studies, where \ngene length does not play a role in the likelihood that a particular set of \ngenes will be overrepresented in the list.";
x.prototype.events={"click .correction a.correction":"toggleCull","click .correction a.which":"seeWhich","hover .correction label .badge":"showHelp","click .correction a.close":"hideHelp"};x.prototype.initialize=function(a){var b,d;for(b in a)d=a[b],this[b]=d;if(null!==this.gene_length_correction)return this.render()};x.prototype.render=function(){d(this.el).append(this.widget.template("enrichment.correction",this));return this};x.prototype.showHelp=function(){return d(this.el).find(".hjalp").html(this.widget.template("popover.help",
{title:'What does "Normalise by length" mean?',text:this.help}))};x.prototype.hideHelp=function(){return d(this.el).find(".hjalp").empty()};x.prototype.toggleCull=function(a){var b;(b=d(a.target)).toggleClass("active").text(function(){return b.hasClass("active")?"Normalised":"Normalise"});this.widget.widget.formOptions.gene_length_correction=b.hasClass("active");return this.widget.widget.render()};x.prototype.seeWhich=function(a){var b;b=JSON.parse(this.pathQueryGeneLengthNull);this.cb(b);return a.preventDefault()};
k=x;var t=function(){this.selectBackgroundList=g(this.selectBackgroundList,this);this.viewAction=g(this.viewAction,this);this.exportAction=g(this.exportAction,this);this.selectAllAction=g(this.selectAllAction,this);this.formAction=g(this.formAction,this);this.renderTableBody=g(this.renderTableBody,this);this.renderTable=g(this.renderTable,this);this.renderToolbar=g(this.renderToolbar,this);return Aa=t.__super__.constructor.apply(this,arguments)};n(t,a.View);t.prototype.events={"click div.actions a.view":"viewAction",
"click div.actions a.export":"exportAction","change div.form select":"formAction","click div.content input.check":"selectAllAction"};t.prototype.initialize=function(a){var b,d;for(b in a)d=a[b],this[b]=d;this.collection=new p;this.collection.bind("change",this.renderToolbar);return this.render()};t.prototype.render=function(){var a;d(this.el).html(this.template("enrichment",{title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,
type:this.response.type}));d(this.el).find("div.form").html(this.template("enrichment.form",{options:this.form.options,pValues:this.form.pValues,errorCorrections:this.form.errorCorrections}));null!=this.response.filterLabel&&d(this.el).find("div.form form").append(this.template("extra",{label:this.response.filterLabel,possible:this.response.filters.split(","),selected:this.response.filterSelectedValue}));new Z({el:d(this.el).find("div.form form"),lists:this.lists,current:this.response.current_population,
loggedIn:this.response.is_logged,widget:this});this.response.extraAttribute&&(a=JSON.parse(this.response.extraAttribute),a.gene_length&&(a=Q(a.gene_length,{el:d(this.el).find("div.form form"),widget:this,cb:this.options.resultsCb}),new k(a)));null!=this.response.current_list?d(this.el).addClass("customBackgroundPopulation"):d(this.el).removeClass("customBackgroundPopulation");0<this.response.results.length&&null==this.response.message?(this.renderToolbar(),this.renderTable()):d(this.el).find("div.content").html(d(this.template("noresults",
{text:this.response.message||"No enrichment found."})));this.widget.fireEvent({"class":"EnrichmentView",event:"rendered"});return this};t.prototype.renderToolbar=function(){return d(this.el).find("div.actions").html(d(this.template("actions")))};t.prototype.renderTable=function(){var a,b,c,e,f,h=this;d(this.el).find("div.content").html(d(this.template("enrichment.table",{label:this.response.label})));b=d(this.el).find("div.content table");c=function(a){a=h.response.results[a];h.response.externalLink&&
(a.externalLink=h.response.externalLink+a.identifier);a=new $(a,h.widget);return h.collection.add(a)};a=e=0;for(f=this.response.results.length;0<=f?e<f:e>f;a=0<=f?++e:--e)c(a);this.renderTableBody(b);a=d(this.el).height()-d(this.el).find("div.header").height()-d(this.el).find("div.content table thead").height();d(this.el).find("div.content div.wrapper").css("height",""+a+"px");d(this.el).find("div.content div.head").css("width",d(this.el).find("div.content table").width()+"px");b.find("thead th").each(function(a,
b){return d(h.el).find("div.content div.head div:eq("+a+")").width(d(b).width())});return b.css({"margin-top":"-"+b.find("thead").height()+"px"})};t.prototype.renderTableBody=function(a){var b,d,c,e,f;b=document.createDocumentFragment();f=this.collection.models;c=0;for(e=f.length;c<e;c++)d=f[c],b.appendChild((new aa({model:d,template:this.template,type:this.response.type,callbacks:{matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb},response:this.response,widget:this.widget})).el);
return a.find("tbody").html(b)};t.prototype.formAction=function(a){this.widget.formOptions[d(a.target).attr("name")]=d(a.target[a.target.selectedIndex]).attr("value");return this.widget.render()};t.prototype.selectAllAction=function(){this.collection.toggleSelected();this.renderToolbar();return this.renderTableBody(d(this.el).find("div.content table"))};t.prototype.exportAction=function(a){var b,c,e,f,h,g=this;f=this.collection.selected();f.length||(f=this.collection.models);e=[];c=0;for(h=f.length;c<
h;c++)b=f[c],e.push(b.get("identifier"));c=JSON.parse(this.response.pathQueryForMatches);c.where.push({path:this.response.pathConstraint,op:"ONE OF",values:e});return this.widget.queryRows(c,function(c){var e,C,h,na;e={};h=0;for(na=c.length;h<na;h++)C=c[h],null==e[C[0]]&&(e[C[0]]=[]),e[C[0]].push(C[1]);c=[];C=0;for(h=f.length;C<h;C++)b=f[C],c.push([b.get("description"),b.get("p-value")].join("\t")+"\t"+e[b.get("identifier")].join(","));if(c.length)try{return new T(c.join("\n"),""+g.widget.bagName+
" "+g.widget.id+".tsv")}catch(l){return new ba(d(a.target),c.join("\n"))}})};t.prototype.viewAction=function(){var a,b,c,e,f,h,g;e=this.collection.selected();e.length||(e=this.collection.models);a=[];c=[];f=0;for(h=e.length;f<h;f++)b=e[f],a.push(b.get("description")),c.push(b.get("identifier"));if(c.length)return null!=(g=this.popoverView)&&g.remove(),d(this.el).find("div.actions").after((this.popoverView=new m({identifiers:c,description:a.join(", "),template:this.template,style:"width:300px",matchCb:this.options.matchCb,
resultsCb:this.options.resultsCb,listCb:this.options.listCb,response:this.response,widget:this.widget})).el)};t.prototype.selectBackgroundList=function(a,b){null==b&&(b=!1);"Default"===a&&(a="");this.widget.formOptions.current_population=a;this.widget.formOptions.remember_population=b;return this.widget.render()};A=t;var q=function(){this.formAction=g(this.formAction,this);this.viewSeriesAction=g(this.viewSeriesAction,this);this.viewAllAction=g(this.viewAllAction,this);this.viewBarsAction=g(this.viewBarsAction,
this);this.viewBarAction=g(this.viewBarAction,this);this.keypressAction=g(this.keypressAction,this);this.renderToolbar=g(this.renderToolbar,this);return Ba=q.__super__.constructor.apply(this,arguments)};n(q,a.View);q.prototype.chartOptions={fontName:"Sans-Serif",fontSize:11,colors:["#2F72FF","#9FC0FF"],legend:{position:"top"},chartArea:{top:30,bottom:80,left:50},hAxis:{titleTextStyle:{fontName:"Sans-Serif"}},vAxis:{titleTextStyle:{fontName:"Sans-Serif"}}};q.prototype.brewer={3:["rgb(189,215,231)",
"rgb(107,174,214)","rgb(33,113,181)"],4:["rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],5:["rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:"rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,69,148)".split(" "),7:"rgb(222,235,247) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,69,148)".split(" "),8:"rgb(222,235,247) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,81,156) rgb(8,48,107)".split(" ")};
q.prototype.multiselect=!1;q.prototype.events={"change div.form select":"formAction","click div.actions a.view-all":"viewAllAction"};q.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;d(document).on("keyup keydown",this.keypressAction);return this.render()};q.prototype.render=function(){var a,b,c,e,f=this;d(this.el).html(this.template("chart",{title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,
type:this.response.type}));null!=this.response.filterLabel&&d(this.el).find("div.form form").append(this.template("extra",{label:this.response.filterLabel,possible:this.response.filters.split(","),selected:this.response.filterSelectedValue}));if(1<this.response.results.length)if(this.response.chartType in google.visualization){this.renderToolbar();e=d(this.el).width();b=d(this.el).height()-d(this.el).find("div.header").height();this.chartOptions.width=e;this.chartOptions.chartArea.width=e-this.chartOptions.chartArea.left;
this.chartOptions.height=b;this.chartOptions.chartArea.height=b-this.chartOptions.chartArea.top-this.chartOptions.chartArea.bottom;this.chartOptions.hAxis={title:"BarChart"===this.response.chartType?this.response.rangeLabel:this.response.domainLabel};this.chartOptions.vAxis={title:"BarChart"===this.response.chartType?this.response.domainLabel:this.response.rangeLabel};a=new google.visualization[this.response.chartType](d(this.el).find("div.content")[0]);google.visualization.events.addListener(a,"click",
function(){var a;d(f.el).find(".content").prepend(a=d("<input/>",{"class":"focus",type:"text"}));return a.focus().remove()});null!=this.response.pathQuery&&google.visualization.events.addListener(a,"select",function(){return f.viewBarAction(a)});1===this.response.results[0].length&&(this.response.results[0]=[this.response.domainLabel,this.response.results[0][0]]);b=JSON.parse(JSON.stringify(this.chartOptions));if("PieChart"===this.response.chartType&&3<=(c=this.response.results.length-1))8<c&&(c=
8),b.colors=this.brewer[c].reverse();a.draw(google.visualization.arrayToDataTable(this.response.results,!1),b)}else this.error({title:this.response.chartType,text:"This chart type does not exist in Google Visualization API"});else d(this.el).find("div.content").html(d(this.template("noresults",{text:'No "'+this.response.title+'" with your list.'})));this.widget.fireEvent({"class":"ChartView",event:"rendered"});return this};q.prototype.renderToolbar=function(){return d(this.el).find("div.actions").html(d(this.template("chart.actions")))};
q.prototype.translate=function(a,b){if(null!=a.seriesValues)return a.seriesValues.split(",")[a.seriesLabels.split(",").indexOf(b)]};q.prototype.keypressAction=function(a){if("keydown"===a.type){if(16<=a.keyCode&&18>=a.keyCode)return this.multiselect=!0}else if(16<=a.keyCode&&18>=a.keyCode&&(this.multiselect=!1,null!=this.selection&&0!==this.selection.length))return this.viewBarsAction(this.selection),this.selection=null};q.prototype.viewBarAction=function(a){var c,e,f,g;null!=this.barView&&this.barView.close();
g=a.getSelection()[0];if(this.multiselect)return null==this.selection&&(this.selection=[]),this.selection.push(g);if(g){a="";e=this.response.pathQuery;c=this.response.simplePathQuery;if(null!=g.row){if(f=this.response.results[g.row+1][0],a+=f,e=e.replace("%category",f),c=c.replace("%category",f),null!=g.column){if("ActualExpectedCriteria"===this.response.seriesPath&&2===g.column)return!1;c=this.response.results[0][g.column];a+=" "+c;e=e.replace("%series",this.translate(this.response,c));c=e.replace("%series",
this.translate(this.response,c))}}else if(null!=g.column)return this.viewSeriesAction(e.replace("%series",this.translate(this.response,this.response.results[0][g.column])));e=JSON.parse(e);c=JSON.parse(c);if(a)return d(this.el).find("div.content").append((this.barView=new b({description:a,template:this.template,resultsPq:e,resultsCb:this.options.resultsCb,listCb:this.options.listCb,matchCb:this.options.matchCb,quickPq:c,widget:this.widget,type:this.response.type})).el)}};q.prototype.viewBarsAction=
function(a){var b,c,e,f,h,g,l,j,k,n,m,ja;k=JSON.parse(this.response.pathQuery);h=k.where;for(j in h)switch(f=h[j],f.value){case "%category":e=f;break;case "%series":n=f;break;default:f.code="A",b=f}k.where=[b,e,n];k.constraintLogic="";j=[];f=66;g=[b];l=function(a){var b,c,d;c=0;for(d=g.length;c<d;c++)if(b=g[c],b.path===a.path&&b.value===a.value)return b.code};m=0;for(ja=a.length;m<ja;m++)c=a[m],null!=c&&null!=e&&(h=d.extend(!0,{},e,{value:this.response.results[c.row+1][0]}),b=l(h),null==b&&(h.code=
b=String.fromCharCode(f++).toUpperCase(),g.push(h)),null!=c.column&&null!=n?(h=d.extend(!0,{},n,{value:this.translate(this.response,this.response.results[0][c.column])}),c=l(h),null==c&&(h.code=c=String.fromCharCode(f++).toUpperCase(),g.push(h)),j.push("("+[b,c].join(" AND ")+")")):j.push(b));if(90<f)throw"Too many constraints";k.constraintLogic=["A","("+j.join(" OR ")+")"].join(" AND ");k.where=g;if(66<f)return this.options.resultsCb(k)};q.prototype.viewAllAction=function(){var a,b,c,d,e,f,g,l;c=
JSON.parse(this.response.pathQuery);g=["%category","%series"];e=0;for(f=g.length;e<f;e++)for(b in d=g[e],l=c.where,l)if(a=l[b],(null!=a?a.value:void 0)===d){c.where.splice(b,1);break}return this.options.resultsCb(c)};q.prototype.viewSeriesAction=function(a){var b,c,d;c=JSON.parse(a);d=c.where;for(b in d)if(a=d[b],"%category"===(null!=a?a.value:void 0)){c.where.splice(b,1);break}return this.options.resultsCb(c)};q.prototype.formAction=function(a){this.widget.formOptions[d(a.target).attr("name")]=d(a.target[a.target.selectedIndex]).attr("value");
return this.widget.render()};l=q;var s=function(){this.listAction=g(this.listAction,this);this.resultsAction=g(this.resultsAction,this);this.matchAction=g(this.matchAction,this);this.getPq=g(this.getPq,this);this.toggle=g(this.toggle,this);this.adjustPopover=g(this.adjustPopover,this);this.renderValues=g(this.renderValues,this);this.render=g(this.render,this);return da=s.__super__.constructor.apply(this,arguments)};n(s,a.View);s.prototype.descriptionLimit=50;s.prototype.valuesLimit=5;s.prototype.events=
{"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"toggle"};s.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()};s.prototype.render=function(){var a;d(this.el).css({position:"relative"});d(this.el).html(this.template("popover",{description:this.description,descriptionLimit:this.descriptionLimit,style:this.style||"width:300px;margin-left:-300px"}));a=JSON.parse(this.response.pathQueryForMatches);a.where.push({path:this.response.pathConstraint,
op:"ONE OF",values:this.identifiers});this.widget.queryRows(a,this.renderValues);return this};s.prototype.renderValues=function(a){var b,c,e,f;c=[];e=0;for(f=a.length;e<f;e++){b=a[e];a:{for(var g=void 0,l=void 0,j=void 0,k=void 0,k=b.reverse(),l=0,j=k.length;l<j;l++)if((g=k[l])&&0<g.length){b=g;break a}b=void 0}0>la.call(c,b)&&c.push(b)}d(this.el).find("div.values").html(this.template("popover.values",{values:c,type:this.response.type,valuesLimit:this.valuesLimit,size:this.size}));return this.adjustPopover()};
s.prototype.adjustPopover=function(){var a=this;return window.setTimeout(function(){var b,c,e,f,g;g=d(a.el).closest("div.wrapper");f=d(a.el).find(".popover");e=f.closest("td.matches");if(e.length&&(c=e.closest("div.inner"),b=c.find("div.header"),c=c.find("div.content div.head"),b=e.position().top-b.height()+c.height()+f.outerHeight()-g.height(),0<b))return f.css("top",-b)},0)};s.prototype.toggle=function(){d(this.el).toggle();return this.adjustPopover()};s.prototype.getPq=function(){this.pq=JSON.parse(this.response.pathQuery);
return this.pq.where.push({path:this.response.pathConstraint,op:"ONE OF",values:this.identifiers})};s.prototype.matchAction=function(a){this.matchCb(d(a.target).text(),this.response.type);return a.preventDefault()};s.prototype.resultsAction=function(){null==this.pq&&this.getPq();return this.resultsCb(this.pq)};s.prototype.listAction=function(){null==this.pq&&this.getPq();return this.listCb(this.pq)};m=s;var w=function(){this.viewAction=g(this.viewAction,this);this.exportAction=g(this.exportAction,
this);this.selectAllAction=g(this.selectAllAction,this);this.renderTableBody=g(this.renderTableBody,this);this.renderTable=g(this.renderTable,this);this.renderToolbar=g(this.renderToolbar,this);return oa=w.__super__.constructor.apply(this,arguments)};n(w,a.View);w.prototype.events={"click div.actions a.view":"viewAction","click div.actions a.export":"exportAction","click div.content input.check":"selectAllAction"};w.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;this.collection=
new P;this.collection.bind("change",this.renderToolbar);return this.render()};w.prototype.render=function(){d(this.el).html(this.template("table",{title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type}));0<this.response.results.length?(this.renderToolbar(),this.renderTable()):d(this.el).find("div.content").html(d(this.template("noresults",{text:'No "'+this.response.title+'" with your list.'})));
this.widget.fireEvent({"class":"TableView",event:"rendered"});return this};w.prototype.renderToolbar=function(){return d(this.el).find("div.actions").html(d(this.template("actions")))};w.prototype.renderTable=function(){var a,b,c,e,f,g=this;d(this.el).find("div.content").html(d(this.template("table.table",{columns:this.response.columns.split(",")})));b=d(this.el).find("div.content table");c=function(a){a=new ea(g.response.results[a],g.widget);return g.collection.add(a)};a=e=0;for(f=this.response.results.length;0<=
f?e<f:e>f;a=0<=f?++e:--e)c(a);this.renderTableBody(b);a=d(this.el).height()-d(this.el).find("div.header").height()-d(this.el).find("div.content div.head").height();d(this.el).find("div.content div.wrapper").css("height",""+a+"px");d(this.el).find("div.content div.head").css("width",d(this.el).find("div.content table").width()+"px");b.find("thead th").each(function(a,b){return d(g.el).find("div.content div.head div:eq("+a+")").width(d(b).width())});return b.css({"margin-top":"-"+b.find("thead").height()+
"px"})};w.prototype.renderTableBody=function(a){var b,c,d,e,f;b=document.createDocumentFragment();f=this.collection.models;d=0;for(e=f.length;d<e;d++)c=f[d],b.appendChild((new fa({model:c,template:this.template,response:this.response,matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,widget:this.widget})).el);return a.find("tbody").html(b)};w.prototype.selectAllAction=function(){this.collection.toggleSelected();this.renderToolbar();return this.renderTableBody(d(this.el).find("div.content table"))};
w.prototype.exportAction=function(a){var b,c,e,f,g;e=this.collection.selected();e.length||(e=this.collection.models);c=[this.response.columns.replace(/,/g,"\t")];f=0;for(g=e.length;f<g;f++)b=e[f],c.push(b.get("descriptions").join("\t")+"\t"+b.get("matches"));if(c.length)try{return new T(c.join("\n"),""+this.widget.bagName+" "+this.widget.id+".tsv")}catch(l){return new ba(d(a.target),c.join("\n"))}};w.prototype.viewAction=function(){var a,b,c,e,f,g,l;e=this.collection.selected();e.length||(e=this.collection.models);
a=[];c=[];f=0;for(g=e.length;f<g;f++)b=e[f],a.push(b.get("descriptions")[0]),c.push(b.get("identifier"));if(c.length)return null!=(l=this.popoverView)&&l.remove(),d(this.el).find("div.actions").after((this.popoverView=new U({identifiers:c,description:a.join(", "),template:this.template,matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,pathQuery:this.response.pathQuery,pathConstraint:this.response.pathConstraint,widget:this.widget,type:this.response.type,style:"width:300px"})).el)};
ga=w;var u=function(){this.toggle=g(this.toggle,this);this.adjustPopover=g(this.adjustPopover,this);this.listAction=g(this.listAction,this);this.resultsAction=g(this.resultsAction,this);this.matchAction=g(this.matchAction,this);this.renderValues=g(this.renderValues,this);this.render=g(this.render,this);return pa=u.__super__.constructor.apply(this,arguments)};n(u,a.View);u.prototype.descriptionLimit=50;u.prototype.valuesLimit=5;u.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction",
"click a.list":"listAction","click a.close":"toggle"};u.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()};u.prototype.render=function(){d(this.el).css({position:"relative"});d(this.el).html(this.template("popover",{description:this.description,descriptionLimit:this.descriptionLimit,style:this.style||"width:300px;margin-left:-300px"}));this.pathQuery=JSON.parse(this.pathQuery);this.pathQuery.where.push({path:this.pathConstraint,op:"ONE OF",values:this.identifiers});
this.widget.queryRows(this.pathQuery,this.renderValues);return this};u.prototype.renderValues=function(a){var b,c,e,f;c=[];e=0;for(f=a.length;e<f;e++)b=a[e],c.push(function(a){var b,c,d;c=0;for(d=a.length;c<d;c++)if((b=a[c])&&0<b.length)return b}(b));d(this.el).find("div.values").html(this.template("popover.values",{values:c,type:this.type,valuesLimit:this.valuesLimit,size:this.size}));return this.adjustPopover()};u.prototype.matchAction=function(a){this.matchCb(d(a.target).text(),this.type);return a.preventDefault()};
u.prototype.resultsAction=function(){return this.resultsCb(this.pathQuery)};u.prototype.listAction=function(){return this.listCb(this.pathQuery)};u.prototype.adjustPopover=function(){var a=this;return window.setTimeout(function(){var b,c,e,f,g;g=d(a.el).closest("div.wrapper");f=d(a.el).find(".popover");e=f.closest("td.matches");if(e.length&&(c=e.closest("div.inner"),b=c.find("div.header"),c=c.find("div.content div.head"),b=e.position().top-b.height()+c.height()+f.outerHeight()-g.height(),0<b))return f.css("top",
-b)},0)};u.prototype.toggle=function(){d(this.el).toggle();return this.adjustPopover()};U=u;var v=function(){this.close=g(this.close,this);this.listAction=g(this.listAction,this);this.resultsAction=g(this.resultsAction,this);this.matchAction=g(this.matchAction,this);this.renderValues=g(this.renderValues,this);this.render=g(this.render,this);return qa=v.__super__.constructor.apply(this,arguments)};n(v,a.View);v.prototype.descriptionLimit=50;v.prototype.valuesLimit=5;v.prototype.events={"click a.match":"matchAction",
"click a.results":"resultsAction","click a.list":"listAction","click a.close":"close"};v.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()};v.prototype.render=function(){d(this.el).html(this.template("popover",{description:this.description,descriptionLimit:this.descriptionLimit,style:"width:300px"}));this.widget.queryRows(this.quickPq,this.renderValues);return this};v.prototype.renderValues=function(a){var b,c,e,f;c=[];e=0;for(f=a.length;e<f;e++)b=a[e],c.push(function(a){var b,
c,d;c=0;for(d=a.length;c<d;c++)if((b=a[c])&&0<b.length)return b}(b));return d(this.el).find("div.values").html(this.template("popover.values",{values:c,type:this.type,valuesLimit:this.valuesLimit,size:c.length}))};v.prototype.matchAction=function(a){this.matchCb(d(a.target).text(),this.type);return a.preventDefault()};v.prototype.resultsAction=function(){return this.resultsCb(this.resultsPq)};v.prototype.listAction=function(){return this.listCb(this.resultsPq)};v.prototype.close=function(){return d(this.el).remove()};
b=v;var D=function(){this.toggleMatchesAction=g(this.toggleMatchesAction,this);this.selectAction=g(this.selectAction,this);this.render=g(this.render,this);return ra=D.__super__.constructor.apply(this,arguments)};n(D,a.View);D.prototype.tagName="tr";D.prototype.events={"click td.check input":"selectAction","click td.matches a.count":"toggleMatchesAction"};D.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;this.model.bind("change",this.render);return this.render()};D.prototype.render=
function(){d(this.el).html(this.template("table.row",{row:this.model.toJSON()}));return this};D.prototype.selectAction=function(){this.model.toggleSelected();if(null!=this.popoverView)return d(this.el).find("td.matches a.count").after(this.popoverView.el),this.popoverView.delegateEvents()};D.prototype.toggleMatchesAction=function(a){return null==this.popoverView?d(this.el).find("td.matches a.count").after((this.popoverView=new U({identifiers:[this.model.get("identifier")],description:this.model.get("descriptions").join(", "),
template:this.template,matchCb:this.matchCb,resultsCb:this.resultsCb,listCb:this.listCb,pathQuery:this.response.pathQuery,pathConstraint:this.response.pathConstraint,widget:this.widget,type:this.response.type,size:d(a.target).text()})).el):this.popoverView.toggle()};fa=D;var y=function(){this.selectListAction=g(this.selectListAction,this);this.filterAction=g(this.filterAction,this);this.toggleAction=g(this.toggleAction,this);this.renderLists=g(this.renderLists,this);this.render=g(this.render,this);
return sa=y.__super__.constructor.apply(this,arguments)};n(y,a.View);y.prototype.events={"click .background a.change":"toggleAction","click .background a.close":"toggleAction","keyup .background input.filter":"filterAction","click .background table a":"selectListAction"};y.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()};y.prototype.render=function(){d(this.el).append(this.widget.template("enrichment.population",{current:null!=this.current?this.current:"Default",
loggedIn:this.loggedIn}));this.renderLists(this.lists);return this};y.prototype.renderLists=function(a){return d(this.el).find("div.values").html(this.widget.template("enrichment.populationlist",{lists:a,current:this.current}))};y.prototype.toggleAction=function(){return d(this.el).find("div.popover").toggle()};y.prototype.filterAction=function(a){var b=this;null!=this.timeout&&clearTimeout(this.timeout);return this.timeout=setTimeout(function(){var c,e,f;e=d(a.target).val();if(e!==b.query)return b.query=
e,f=RegExp(""+e+".*","i"),b.renderLists(function(){var a,b,d,e;d=this.lists;e=[];a=0;for(b=d.length;a<b;a++)c=d[a],c.name.match(f)&&e.push(c);return e}.call(b))},500)};y.prototype.selectListAction=function(a){var b;b=d(a.target).text();a.preventDefault();this.toggleAction();return this.widget.selectBackgroundList(b,1===d(this.el).find("input.save:checked").length)};Z=y;var E=function(){this.toggleMatchesAction=g(this.toggleMatchesAction,this);this.selectAction=g(this.selectAction,this);this.render=
g(this.render,this);return ta=E.__super__.constructor.apply(this,arguments)};n(E,a.View);E.prototype.tagName="tr";E.prototype.events={"click td.check input":"selectAction","click td.matches a.count":"toggleMatchesAction"};E.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;this.model.bind("change",this.render);return this.render()};E.prototype.render=function(){d(this.el).html(this.template("enrichment.row",{row:this.model.toJSON()}));return this};E.prototype.selectAction=function(){this.model.toggleSelected();
if(null!=this.popoverView)return d(this.el).find("td.matches a.count").after(this.popoverView.el),this.popoverView.delegateEvents()};E.prototype.toggleMatchesAction=function(a){return null==this.popoverView?d(this.el).find("td.matches a.count").after((this.popoverView=new m({matches:this.model.get("matches"),identifiers:[this.model.get("identifier")],description:this.model.get("description"),template:this.template,matchCb:this.callbacks.matchCb,resultsCb:this.callbacks.resultsCb,listCb:this.callbacks.listCb,
response:this.response,widget:this.widget,size:d(a.target).text()})).el):this.popoverView.toggle()};aa=E;return{TableWidget:ma,EnrichmentWidget:K,InterMineWidget:B,ChartWidget:f,CoreModel:c,EnrichmentLengthCorrectionView:k,EnrichmentView:A,ChartView:l,EnrichmentPopoverView:m,TableView:ga,TablePopoverView:U,ChartPopoverView:b,TableRowView:fa,EnrichmentPopulationView:Z,EnrichmentRowView:aa}};d=window.jQuery||window.Zepto;m=function(){var a,b,g=this;b=1<=arguments.length?p.call(arguments,0):[];if("string"===
typeof b[0])this.service=b[0],this.token=b[1]||"";else{if(null!=b[0].root)this.service=b[0].root;else throw Error("You need to set the `root` parameter pointing to the mine's service");this.token=b[0].token||""}a=function(a){if(a)throw a;d=window.jQuery;n(A,P(window.Backbone));return g.wait=!1};b[0].skipDeps?a():intermine.load(this.resources,a)};m.prototype.VERSION="1.12.6";m.prototype.wait=!0;m.prototype.resources={css:{Bootstrap:{path:"http://cdn.intermine.org/css/bootstrap/2.0.4-prefixed-no-icons/css/bootstrap.min.css"}},
js:{JSON:{path:"http://cdn.intermine.org/js/json3/3.2.2/json3.min.js"},setImmediate:{path:"http://cdn.intermine.org/js/setImmediate/1.0.1/setImmediate.min.js"},async:{path:"http://cdn.intermine.org/js/async/0.2.6/async.min.js",depends:["setImmediate"]},jQuery:{path:"http://cdn.intermine.org/js/jquery/1.9.1/jquery-1.9.1.min.js"},_:{path:"http://cdn.intermine.org/js/underscore.js/1.3.3/underscore-min.js"},Backbone:{path:"http://cdn.intermine.org/js/backbone.js/1.0.0/backbone-min.js",depends:["jQuery",
"_"]},google:{path:"https://www.google.com/jsapi"},"intermine.imjs":{path:"http://cdn.intermine.org/js/intermine/imjs/2.6.0/im.js",depends:["jQuery","_"]},FileSaver:{path:"http://cdn.intermine.org/js/filesaver.js/FileSaver.min.js"}}};m.prototype.chart=function(){var a,b,d=this;a=1<=arguments.length?p.call(arguments,0):[];return(b=function(){return d.wait?setTimeout(b,20):google.load("visualization","1.0",{packages:["corechart"],callback:function(){var b=A.ChartWidget,e=[d.service,d.token].concat(p.call(a)),
c=function(){};c.prototype=b.prototype;c=new c;b=b.apply(c,e);return Object(b)===b?b:c}})})()};m.prototype.enrichment=function(){var a,b,g=this;a=1<=arguments.length?p.call(arguments,0):[];return(b=function(){if(g.wait)return setTimeout(b,20);if(null!=g.lists){var f=A.EnrichmentWidget,e=[g.service,g.token,g.lists].concat(p.call(a)),c=function(){};c.prototype=f.prototype;c=new c;f=f.apply(c,e);return Object(f)===f?f:c}g.wait=!0;return d.ajax({url:""+g.service+"lists?token="+g.token,dataType:"jsonp",
success:function(b){if(200!==b.statusCode&&null==b.lists)return d(a[2]).html(d("<div/>",{"class":"alert alert-error",html:"Problem fetching lists we have access to <a href='"+g.service+"lists'>"+g.service+"lists</a>"}));g.lists=b.lists;g.wait=!1;b=A.EnrichmentWidget;var c=[g.service,g.token,g.lists].concat(p.call(a)),e=function(){};e.prototype=b.prototype;e=new e;b=b.apply(e,c);return Object(b)===b?b:e},error:function(a){return d(el).html(d("<div/>",{"class":"alert alert-error",html:""+a.statusText+
" for <a href='"+g.service+"widgets'>"+g.service+"widgets</a>"}))}})})()};m.prototype.table=function(){var a,b,d=this;a=1<=arguments.length?p.call(arguments,0):[];return(b=function(){var f;if(d.wait)f=setTimeout(b,20);else{f=A.TableWidget;var e=[d.service,d.token].concat(p.call(a)),c=function(){};c.prototype=f.prototype;c=new c;f=f.apply(c,e);f=Object(f)===f?f:c}return f})()};m.prototype.all=function(a,b,g,f){var e,c=this;null==a&&(a="Gene");return(e=function(){return c.wait?setTimeout(e,20):d.ajax({url:""+
c.service+"widgets",dataType:"jsonp",success:function(e){var j,k,n,m,p;if(e.widgets){m=e.widgets;p=[];k=0;for(n=m.length;k<n;k++)if(e=m[k],0<=la.call(e.targets,a))switch(j=e.name.replace(/[^-a-zA-Z0-9,&\s]+/ig,"").replace(/-/gi,"_").replace(/\s/gi,"-").toLowerCase(),d(g).append(d("<div/>",{id:j,"class":"widget span6"})),e.widgetType){case "chart":p.push(c.chart(e.name,b,""+g+" #"+j,f));break;case "enrichment":p.push(c.enrichment(e.name,b,""+g+" #"+j,f));break;case "table":p.push(c.table(e.name,b,
""+g+" #"+j,f));break;default:p.push(void 0)}return p}},error:function(a){return d(g).html(d("<div/>",{"class":"alert alert-error",html:""+a.statusText+" for <a href='"+c.service+"widgets'>"+c.service+"widgets</a>"}))}})})()};if(!window.intermine&&window.intermine.load)throw"You need to include the InterMine API Loader first!";window.intermine.widgets=m}).call(this);