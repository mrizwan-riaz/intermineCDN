!function(){function a(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];if(!g._resolving&&!g.exports){var h={};h.exports={},h.client=h.component=!0,g._resolving=!0,g.call(this,h.exports,a.relative(e),h),delete g._resolving,g.exports=h.exports}return g.exports}a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function d(c){var e=d.resolve(c);return a(e,b,c)}var e=a.normalize(b,"..");return d.resolve=function(d){var f=d.charAt(0);if("/"==f)return d.slice(1);if("."==f)return a.normalize(e,d);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),d=g.slice(0,h+1).join("/")+"/deps/"+d},d.exists=function(b){return a.modules.hasOwnProperty(d.resolve(b))},d},function(){a.register("list-widgets/src/class/ChartWidget.js",function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=b("./InterMineWidget"),d=b("./views/ChartView"),g=b("../utils/type"),e=function(a){function c(a,b,d,e,f,g){this.service=a,this.token=b,this.id=d,this.bagName=e,this.el=f,null==g&&(g={}),this.render=h(this.render,this),this.widgetOptions=_.extend({},g,this.widgetOptions),this.log=[],c.__super__.constructor.call(this),this.render()}return j(c,a),c.prototype.widgetOptions={title:!0,description:!0,matchCb:function(a,b){return"undefined"!=typeof console&&null!==console?console.log(a,b):void 0},resultsCb:function(a){return"undefined"!=typeof console&&null!==console?console.log(a):void 0},listCb:function(a){return"undefined"!=typeof console&&null!==console?console.log(a):void 0}},c.prototype.formOptions={},c.prototype.spec={response:{chartType:g.isString,description:g.isString,error:g.isNull,list:g.isString,notAnalysed:g.isInteger,pathQuery:g.isString,requestedAt:g.isString,results:g.isArray,seriesLabels:g.isString,seriesValues:g.isString,statusCode:g.isHTTPSuccess,title:g.isString,type:g.isString,wasSuccessful:g.isBoolean,filters:g.isString,filterLabel:g.isString,filterSelectedValue:g.isString,simplePathQuery:g.isString,domainLabel:g.isString,rangeLabel:g.isString}},c.prototype.render=function(){var a,c,e,f,g,h,i=this;e=window.setTimeout(function(){return $(i.el).append(i.loading=$(b("../templates/loading")()))},400),null!=(g=this.view)&&g.undelegateEvents(),a={widget:this.id,list:this.bagName,token:this.token},h=this.formOptions;for(c in h)f=h[c],"errorCorrection"!==c&&"pValue"!==c&&(a.filter=f);return this.log.push("Sending data payload "+JSON.stringify(a)),$.ajax({url:""+this.service+"list/chart",dataType:"jsonp",data:a,success:function(a){var b;return i.log.push("Received a response "+JSON.stringify(a)),window.clearTimeout(e),null!=(b=i.loading)&&b.remove(),i.validateType(a,i.spec.response),a.wasSuccessful?(i.name=a.title,i.log.push("Creating new ChartView"),i.view=new d({widget:i,el:i.el,response:a,form:{options:i.formOptions},options:i.widgetOptions})):void 0},error:function(){return clearTimeout(e),i.error({text:""+i.service+"list/chart"},"AJAXTransport")}})},c}(f),c.exports=e}),a.register("list-widgets/src/class/EnrichmentWidget.js",function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=b("./InterMineWidget"),d=b("./views/EnrichmentView"),g=b("../utils/type"),e=function(a){function c(a,b,d,e,f,g,i){this.service=a,this.token=b,this.lists=d,this.id=e,this.bagName=f,this.el=g,null==i&&(i={}),this.render=h(this.render,this),this.widgetOptions=_.extend({},i,this.widgetOptions),this.formOptions={errorCorrection:"Holm-Bonferroni",pValue:"0.05"},this.log=[],c.__super__.constructor.call(this),this.render()}return j(c,a),c.prototype.widgetOptions={title:!0,description:!0,matchCb:function(a,b){return"undefined"!=typeof console&&null!==console?console.log(a,b):void 0},resultsCb:function(a){return"undefined"!=typeof console&&null!==console?console.log(a):void 0},listCb:function(a){return"undefined"!=typeof console&&null!==console?console.log(a):void 0}},c.prototype.errorCorrections=["Holm-Bonferroni","Benjamini Hochberg","Bonferroni","None"],c.prototype.pValues=["0.05","0.10","1.00"],c.prototype.spec={response:{title:g.isString,description:g.isString,pathQuery:g.isJSON,pathConstraint:g.isString,error:g.isNull,list:g.isString,notAnalysed:g.isInteger,requestedAt:g.isString,results:g.isArray,label:g.isString,statusCode:g.isHTTPSuccess,type:g.isString,wasSuccessful:g.isBoolean,filters:g.isString,filterLabel:g.isString,filterSelectedValue:g.isString,externalLink:g.isString,pathQueryForMatches:g.isString,is_logged:g.isBoolean,current_population:g.isStringOrNull,message:g.isString,extraAttribute:g.isStringOrNull}},c.prototype.render=function(){var a,c,e,f,g,h,i=this;e=window.setTimeout(function(){return $(i.el).append(i.loading=$(b("../templates/loading")()))},400),null!=(g=this.view)&&g.undelegateEvents(),a={widget:this.id,list:this.bagName,correction:this.formOptions.errorCorrection,maxp:this.formOptions.pValue,token:this.token},h=this.formOptions;for(c in h)f=h[c],"errorCorrection"!==c&&"pValue"!==c&&"current_population"!==c&&"remember_population"!==c&&"gene_length_correction"!==c&&(c="filter"),a[c]=f;return this.log.push("Sending data payload "+JSON.stringify(a)),$.ajax({url:""+this.service+"list/enrichment",dataType:"jsonp",data:a,success:function(a){var b,c,f;return i.log.push("Received a response "+JSON.stringify(a)),window.clearTimeout(e),null!=(f=i.loading)&&f.remove(),i.validateType(a,i.spec.response),a.wasSuccessful?(i.name=a.title,c=function(){var c,d,e,f;for(e=this.lists,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.type===a.type&&0!==b.size&&f.push(b);return f}.call(i),i.log.push("Creating new EnrichmentView"),i.view=new d({widget:i,el:i.el,template:i.template,response:a,form:{options:i.formOptions,pValues:i.pValues,errorCorrections:i.errorCorrections},options:i.widgetOptions,lists:c})):void 0},error:function(){return clearTimeout(e),i.error({text:""+i.service+"list/enrichment"},"AJAXTransport")}})},c}(f),c.exports=e}),a.register("list-widgets/src/class/InterMineWidget.js",function(a,b,c){var d,e=function(a,b){return function(){return a.apply(b,arguments)}};d=function(){function a(){this.queryRows=e(this.queryRows,this),this.error=e(this.error,this),this.validateType=e(this.validateType,this);var a=this;this.log=this.log||[],this.log.push("Creating wrapping element"),$(this.el).html($("<div/>",{"class":"inner",style:"height:572px;overflow:hidden;position:relative"})),this.el=""+this.el+" div.inner",this.log.push("Initializing InterMine Service"),this._service=new intermine.Service({root:this.service,token:this.token}),this.log.push("Monitoring for debug mode"),$(window).on("hashchange",function(){return"#debug"===window.location.hash?$(a.el).append($("<a/>",{"class":"btn btn-small btn-warning",text:"Debug",style:"z-index:5;position:absolute;display:block;top:0;left:0",click:function(){var b;return b=$("<pre/>",{html:a.log.join("\n\n")}),$(a.el).css("overflow","scroll").html(b)}})):void 0})}return a.prototype.validateType=function(a,c){var d,e,f,g;this.log.push("Validating "+JSON.stringify(a)),d=[];for(e in a)g=a[e],f="function"==typeof c[e]?new c[e](g):void 0,f&&!f.is()&&d.push(b("../templates/invalidjsonkey")({actual:f.is(),expected:new String(f),key:e}));return d.length?this.error(d,"JSONResponse"):void 0},a.prototype.error=function(a,c){switch(null==a&&(a={title:"Error",text:"Generic error"}),a.name=this.name||this.id,c){case"AJAXTransport":a.title="AJAX Request Failed";break;case"JSONResponse":a.title="Invalid JSON Response",a.text="<ol>"+a.join("")+"</ol>"}return $(this.el).html(b("../templates/error")(a)),this.log.push(a.title),this.fireEvent({event:"error",type:c,message:a.title})},a.prototype.fireEvent=function(a){var b,c,d;b=document.createEvent("Events"),b.initEvent("InterMine",!0,!0);for(c in a)d=a[c],b[c]=d;return b.source="ListWidgets",b.widget={id:this.id,bag:this.bagName,el:this.el,service:this.service},window.dispatchEvent(b)},a.prototype.queryRows=function(a,b){var c;return this.log.push("Querying for rows"),c=this._service,async.waterfall([function(b){return c.query(a,function(a){return b(null,a)})},function(a,b){return a.rows(function(a){return b(null,a)})}],function(a,c){return b(c)})},a}(),c.exports=d}),a.register("list-widgets/src/class/TableWidget.js",function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("./InterMineWidget"),e=b("./views/TableView"),g=b("../utils/type"),f=function(a){function c(a,b,d,e,f,g){this.service=a,this.token=b,this.id=d,this.bagName=e,this.el=f,null==g&&(g={}),this.render=h(this.render,this),this.widgetOptions=_.extend({},g,this.widgetOptions),this.log=[],c.__super__.constructor.call(this),this.render()}return j(c,a),c.prototype.widgetOptions={title:!0,description:!0,matchCb:function(a,b){return"undefined"!=typeof console&&null!==console?console.log(a,b):void 0},resultsCb:function(a){return"undefined"!=typeof console&&null!==console?console.log(a):void 0},listCb:function(a){return"undefined"!=typeof console&&null!==console?console.log(a):void 0}},c.prototype.spec={response:{columnTitle:g.isString,title:g.isString,description:g.isString,pathQuery:g.isString,columns:g.isString,pathConstraint:g.isString,requestedAt:g.isString,list:g.isString,type:g.isString,notAnalysed:g.isInteger,results:g.isArray,wasSuccessful:g.isBoolean,error:g.isNull,statusCode:g.isHTTPSuccess}},c.prototype.render=function(){var a,c,d,f=this;return c=window.setTimeout(function(){return $(f.el).append(f.loading=$(b("../templates/loading")()))},400),null!=(d=this.view)&&d.undelegateEvents(),a={widget:this.id,list:this.bagName,token:this.token},this.log.push("Sending data payload "+JSON.stringify(a)),$.ajax({url:""+this.service+"list/table",dataType:"jsonp",data:a,success:function(a){var b;return f.log.push("Received a response "+JSON.stringify(a)),window.clearTimeout(c),null!=(b=f.loading)&&b.remove(),f.validateType(a,f.spec.response),a.wasSuccessful?(f.name=a.title,f.log.push("Creating new TableView"),f.view=new e({widget:f,el:f.el,response:a,options:f.widgetOptions})):void 0},error:function(){return clearTimeout(c),f.error({text:""+f.service+"list/table"},"AJAXTransport")}})},c}(d),c.exports=f}),a.register("list-widgets/src/class/models/CoreModel.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=function(a,b){return function(){return a.apply(b,arguments)}},r={}.hasOwnProperty,s=function(a,b){function c(){this.constructor=a}for(var d in b)r.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=b("../../utils/type"),e=function(a){function b(){return this.toggleSelected=q(this.toggleSelected,this),this.validate=q(this.validate,this),k=b.__super__.constructor.apply(this,arguments)}return s(b,a),b.prototype.defaults={selected:!1},b.prototype.initialize=function(a,b){return this.widget=b,this.validate(a)},b.prototype.validate=function(a){return this.widget.validateType(a,this.spec)},b.prototype.toggleSelected=function(){return this.set({selected:!this.get("selected")})},b}(Backbone.Model),d=function(a){function b(){return l=b.__super__.constructor.apply(this,arguments)}return s(b,a),b.prototype.model=e,b.prototype.selected=function(){return this.filter(function(a){return a.get("selected")})},b.prototype.toggleSelected=function(){var a,b,c,d,e,f,g,h,i;if(this.models.length-this.selected().length){for(f=this.models,h=[],b=0,d=f.length;d>b;b++)a=f[b],h.push(a.set({selected:!0},{silent:!0}));return h}for(g=this.models,i=[],c=0,e=g.length;e>c;c++)a=g[c],i.push(a.set({selected:!1},{silent:!0}));return i},b}(Backbone.Collection),g=function(a){function b(){return m=b.__super__.constructor.apply(this,arguments)}return s(b,a),b.prototype.spec={description:j.isString,identifier:j.isString,matches:j.isInteger,"p-value":j.isInteger,selected:j.isBoolean,externalLink:j.isString},b.prototype.toJSON=function(){var a;return a=_.clone(this.attributes),a["p-value"]=a["p-value"]<.001?a["p-value"].toExponential(6):a["p-value"].toFixed(6),a},b}(e),f=function(a){function b(){return n=b.__super__.constructor.apply(this,arguments)}return s(b,a),b.prototype.model=g,b}(d),i=function(a){function b(){return o=b.__super__.constructor.apply(this,arguments)}return s(b,a),b.prototype.spec={matches:j.isInteger,identifier:j.isInteger,descriptions:j.isArray,selected:j.isBoolean},b}(e),h=function(a){function b(){return p=b.__super__.constructor.apply(this,arguments)}return s(b,a),b.prototype.model=i,b}(d),c.exports={EnrichmentRow:g,EnrichmentResults:f,TableRow:i,TableResults:h}}),a.register("list-widgets/src/class/views/ChartPopoverView.js",function(a,b,c){var d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(a){function c(){return this.close=f(this.close,this),this.listAction=f(this.listAction,this),this.resultsAction=f(this.resultsAction,this),this.matchAction=f(this.matchAction,this),this.renderValues=f(this.renderValues,this),this.render=f(this.render,this),e=c.__super__.constructor.apply(this,arguments)}return h(c,a),c.prototype.descriptionLimit=50,c.prototype.valuesLimit=5,c.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"close"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()},c.prototype.render=function(){return $(this.el).html(b("../../templates/popover/popover")({description:this.description,descriptionLimit:this.descriptionLimit,style:"width:300px"})),this.widget.queryRows(this.quickPq,this.renderValues),this},c.prototype.renderValues=function(a){var c,d,e,f;for(d=[],e=0,f=a.length;f>e;e++)c=a[e],d.push(function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],b&&b.length>0)return b}(c));return $(this.el).find("div.values").html(b("../../templates/popover/popover.values")({values:d,type:this.type,valuesLimit:this.valuesLimit,size:d.length}))},c.prototype.matchAction=function(a){return this.matchCb($(a.target).text(),this.type),a.preventDefault()},c.prototype.resultsAction=function(){return this.resultsCb(this.resultsPq)},c.prototype.listAction=function(){return this.listCb(this.resultsPq)},c.prototype.close=function(){return $(this.el).remove()},c}(Backbone.View),c.exports=d}),a.register("list-widgets/src/class/views/ChartView.js",function(a,b,c){var d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("./ChartPopoverView"),e=function(a){function c(){return this.formAction=g(this.formAction,this),this.viewSeriesAction=g(this.viewSeriesAction,this),this.viewAllAction=g(this.viewAllAction,this),this.viewBarsAction=g(this.viewBarsAction,this),this.viewBarAction=g(this.viewBarAction,this),this.keypressAction=g(this.keypressAction,this),this.renderToolbar=g(this.renderToolbar,this),f=c.__super__.constructor.apply(this,arguments)}return i(c,a),c.prototype.chartOptions={fontName:"Sans-Serif",fontSize:11,colors:["#2F72FF","#9FC0FF"],legend:{position:"top"},chartArea:{top:30,bottom:80,left:50},hAxis:{titleTextStyle:{fontName:"Sans-Serif"}},vAxis:{titleTextStyle:{fontName:"Sans-Serif"}}},c.prototype.brewer={3:["rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],4:["rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],5:["rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:["rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],7:["rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],8:["rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,81,156)","rgb(8,48,107)"]},c.prototype.multiselect=!1,c.prototype.events={"change div.form select":"formAction","click div.actions a.view-all":"viewAllAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return $(document).on("keyup keydown",this.keypressAction),this.render()},c.prototype.render=function(){var a,c,d,e,f,g=this;return $(this.el).html(b("../../templates/chart/chart")({title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type})),null!=this.response.filterLabel&&$(this.el).find("div.form form").append(b("../../templates/extra")({label:this.response.filterLabel,possible:this.response.filters.split(","),selected:this.response.filterSelectedValue})),this.response.results.length>1?this.response.chartType in google.visualization?(this.renderToolbar(),f=$(this.el).width(),c=$(this.el).height()-$(this.el).find("div.header").height(),this.chartOptions.width=f,this.chartOptions.chartArea.width=f-this.chartOptions.chartArea.left,this.chartOptions.height=c,this.chartOptions.chartArea.height=c-this.chartOptions.chartArea.top-this.chartOptions.chartArea.bottom,this.chartOptions.hAxis={title:"BarChart"===this.response.chartType?this.response.rangeLabel:this.response.domainLabel},this.chartOptions.vAxis={title:"BarChart"===this.response.chartType?this.response.domainLabel:this.response.rangeLabel},a=new google.visualization[this.response.chartType]($(this.el).find("div.content")[0]),google.visualization.events.addListener(a,"click",function(){var a;return $(g.el).find(".content").prepend(a=$("<input/>",{"class":"focus",type:"text"})),a.focus().remove()}),null!=this.response.pathQuery&&google.visualization.events.addListener(a,"select",function(){return g.viewBarAction(a)}),1===this.response.results[0].length&&(this.response.results[0]=[this.response.domainLabel,this.response.results[0][0]]),e=JSON.parse(JSON.stringify(this.chartOptions)),"PieChart"===this.response.chartType&&(d=this.response.results.length-1)>=3&&(d>8&&(d=8),e.colors=this.brewer[d].reverse()),a.draw(google.visualization.arrayToDataTable(this.response.results,!1),e)):this.error({title:this.response.chartType,text:"This chart type does not exist in Google Visualization API"}):$(this.el).find("div.content").html($(b("../../templates/noresults")({text:'No "'+this.response.title+'" with your list.'}))),this.widget.fireEvent({"class":"ChartView",event:"rendered"}),this},c.prototype.renderToolbar=function(){return $(this.el).find("div.actions").html(b("../../templates/chart/chart.actions")())},c.prototype.translate=function(a,b){return null!=a.seriesValues?a.seriesValues.split(",")[a.seriesLabels.split(",").indexOf(b)]:void 0},c.prototype.keypressAction=function(a){if("keydown"===a.type){if(a.keyCode>=16&&a.keyCode<=18)return this.multiselect=!0}else if(a.keyCode>=16&&a.keyCode<=18&&(this.multiselect=!1,null!=this.selection&&0!==this.selection.length))return this.viewBarsAction(this.selection),this.selection=null},c.prototype.viewBarAction=function(a){var b,c,e,f,g,h;if(null!=this.barView&&this.barView.close(),h=a.getSelection()[0],this.multiselect)return null==this.selection&&(this.selection=[]),this.selection.push(h);if(h){if(c="",f=this.response.pathQuery,e=this.response.simplePathQuery,null!=h.row){if(g=this.response.results[h.row+1][0],c+=g,f=f.replace("%category",g),e=e.replace("%category",g),null!=h.column){if("ActualExpectedCriteria"===this.response.seriesPath&&2===h.column)return!1;b=this.response.results[0][h.column],c+=" "+b,f=f.replace("%series",this.translate(this.response,b)),e=f.replace("%series",this.translate(this.response,b))}}else if(null!=h.column)return this.viewSeriesAction(f.replace("%series",this.translate(this.response,this.response.results[0][h.column])));if(f=JSON.parse(f),e=JSON.parse(e),c)return $(this.el).find("div.content").append((this.barView=new d({description:c,resultsPq:f,resultsCb:this.options.resultsCb,listCb:this.options.listCb,matchCb:this.options.matchCb,quickPq:e,widget:this.widget,type:this.response.type})).el)}},c.prototype.viewBarsAction=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;m=JSON.parse(this.response.pathQuery),r=m.where;for(k in r)switch(i=r[k],i.value){case"%category":e=i;break;case"%series":o=i;break;default:i.code="A",d=i}for(m.where=[d,e,o],m.constraintLogic="",l=[],f=66,h=[d],j=function(a){var b,c,d;for(c=0,d=h.length;d>c;c++)if(b=h[c],b.path===a.path&&b.value===a.value)return b.code},p=0,q=a.length;q>p;p++)n=a[p],null!=n&&null!=e&&(g=$.extend(!0,{},e,{value:this.response.results[n.row+1][0]}),b=j(g),null==b&&(g.code=b=String.fromCharCode(f++).toUpperCase(),h.push(g)),null!=n.column&&null!=o?(g=$.extend(!0,{},o,{value:this.translate(this.response,this.response.results[0][n.column])}),c=j(g),null==c&&(g.code=c=String.fromCharCode(f++).toUpperCase(),h.push(g)),l.push("("+[b,c].join(" AND ")+")")):l.push(b));if(f>90)throw"Too many constraints";return m.constraintLogic=["A","("+l.join(" OR ")+")"].join(" AND "),m.where=h,f>66?this.options.resultsCb(m):void 0},c.prototype.viewAllAction=function(){var a,b,c,d,e,f,g,h;for(c=JSON.parse(this.response.pathQuery),g=["%category","%series"],e=0,f=g.length;f>e;e++){d=g[e],h=c.where;for(b in h)if(a=h[b],(null!=a?a.value:void 0)===d){c.where.splice(b,1);break}}return this.options.resultsCb(c)},c.prototype.viewSeriesAction=function(a){var b,c,d,e;d=JSON.parse(a),e=d.where;for(c in e)if(b=e[c],"%category"===(null!=b?b.value:void 0)){d.where.splice(c,1);break}return this.options.resultsCb(d)},c.prototype.formAction=function(a){return this.widget.formOptions[$(a.target).attr("name")]=$(a.target[a.target.selectedIndex]).attr("value"),this.widget.render()},c}(Backbone.View),c.exports=e}),a.register("list-widgets/src/class/views/EnrichmentLengthCorrectionView.js",function(a,b,c){var d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(a){function c(){return this.seeWhich=f(this.seeWhich,this),this.toggleCull=f(this.toggleCull,this),this.hideHelp=f(this.hideHelp,this),this.showHelp=f(this.showHelp,this),this.render=f(this.render,this),e=c.__super__.constructor.apply(this,arguments)}return h(c,a),c.prototype.help="Depending on the type of experiment your data comes from, it is sometimes \nnecessary to normalize by gene length in order to get the correct p-values. \nIf your data comes from a genome-wide binding experiment such as ChIP-seq \nor DamID, binding intervals are more likely to be associated with longer \ngenes than shorter ones, and you should therefore normalize by gene length. \nThis is not the case for experiments such as gene expression studies, where \ngene length does not play a role in the likelihood that a particular set of \ngenes will be overrepresented in the list.",c.prototype.events={"click .correction a.correction":"toggleCull","click .correction a.which":"seeWhich","hover .correction label .badge":"showHelp","click .correction a.close":"hideHelp"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return null!==this.gene_length_correction?this.render():void 0},c.prototype.render=function(){return $(this.el).append(b("../../templates/enrichment/enrichment.correction")(),this),this},c.prototype.showHelp=function(){return $(this.el).find(".hjalp").html(b("../../templates/popover/popover.help")({title:'What does "Normalise by length" mean?',text:this.help}))},c.prototype.hideHelp=function(){return $(this.el).find(".hjalp").empty()},c.prototype.toggleCull=function(a){var b;return(b=$(a.target)).toggleClass("active").text(function(){return b.hasClass("active")?"Normalised":"Normalise"}),this.widget.widget.formOptions.gene_length_correction=b.hasClass("active"),this.widget.widget.render()},c.prototype.seeWhich=function(a){var b;return b=JSON.parse(this.pathQueryGeneLengthNull),this.cb(b),a.preventDefault()},c}(Backbone.View),c.exports=d}),a.register("list-widgets/src/class/views/EnrichmentPopoverView.js",function(a,b,c){var d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};d=function(a){function c(){return this.listAction=f(this.listAction,this),this.resultsAction=f(this.resultsAction,this),this.matchAction=f(this.matchAction,this),this.getPq=f(this.getPq,this),this.toggle=f(this.toggle,this),this.adjustPopover=f(this.adjustPopover,this),this.renderValues=f(this.renderValues,this),this.render=f(this.render,this),e=c.__super__.constructor.apply(this,arguments)}return h(c,a),c.prototype.descriptionLimit=50,c.prototype.valuesLimit=5,c.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"toggle"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()},c.prototype.render=function(){var a;return $(this.el).css({position:"relative"}),$(this.el).html(b("../../templates/popover/popover")({description:this.description,descriptionLimit:this.descriptionLimit,style:this.style||"width:300px;margin-left:-300px"})),a=JSON.parse(this.response.pathQueryForMatches),a.where.push({path:this.response.pathConstraint,op:"ONE OF",values:this.identifiers}),this.widget.queryRows(a,this.renderValues),this},c.prototype.renderValues=function(a){var c,d,e,f,g;for(e=[],f=0,g=a.length;g>f;f++)c=a[f],d=function(a){var b,c,d,e;for(e=a.reverse(),c=0,d=e.length;d>c;c++)if(b=e[c],b&&b.length>0)return b}(c),i.call(e,d)<0&&e.push(d);return $(this.el).find("div.values").html(b("../../templates/popover/popover.values")({values:e,type:this.response.type,valuesLimit:this.valuesLimit,size:this.size})),this.adjustPopover()},c.prototype.adjustPopover=function(){var a=this;return window.setTimeout(function(){var b,c,d,e,f,g,h;return g=$(a.el).closest("div.wrapper"),f=$(a.el).find(".popover"),e=f.closest("td.matches"),e.length?(h=e.closest("div.inner"),d=h.find("div.header"),c=h.find("div.content div.head"),b=e.position().top-d.height()+c.height()+f.outerHeight()-g.height(),b>0?f.css("top",-b):void 0):void 0},0)},c.prototype.toggle=function(){return $(this.el).toggle(),this.adjustPopover()},c.prototype.getPq=function(){var a;return a=this.response.pathQuery,this.pq=JSON.parse(a),this.pq.where.push({path:this.response.pathConstraint,op:"ONE OF",values:this.identifiers})},c.prototype.matchAction=function(a){return this.matchCb($(a.target).text(),this.response.type),a.preventDefault()},c.prototype.resultsAction=function(){return null==this.pq&&this.getPq(),this.resultsCb(this.pq)},c.prototype.listAction=function(){return null==this.pq&&this.getPq(),this.listCb(this.pq)},c}(Backbone.View),c.exports=d}),a.register("list-widgets/src/class/views/EnrichmentPopulationView.js",function(a,b,c){var d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(a){function c(){return this.selectListAction=f(this.selectListAction,this),this.filterAction=f(this.filterAction,this),this.toggleAction=f(this.toggleAction,this),this.renderLists=f(this.renderLists,this),this.render=f(this.render,this),e=c.__super__.constructor.apply(this,arguments)}return h(c,a),c.prototype.events={"click .background a.change":"toggleAction","click .background a.close":"toggleAction","keyup .background input.filter":"filterAction","click .background table a":"selectListAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()},c.prototype.render=function(){return $(this.el).append(b("../../templates/enrichment/enrichment.population")({current:null!=this.current?this.current:"Default",loggedIn:this.loggedIn})),this.renderLists(this.lists),this},c.prototype.renderLists=function(a){return $(this.el).find("div.values").html(b("../../templates/enrichment/enrichment.populationlist")({lists:a,current:this.current}))},c.prototype.toggleAction=function(){return $(this.el).find("div.popover").toggle()},c.prototype.filterAction=function(a){var b=this;return null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){var c,d,e;return d=$(a.target).val(),d!==b.query?(b.query=d,e=new RegExp(""+d+".*","i"),b.renderLists(function(){var a,b,d,f;for(d=this.lists,f=[],a=0,b=d.length;b>a;a++)c=d[a],c.name.match(e)&&f.push(c);return f}.call(b))):void 0},500)},c.prototype.selectListAction=function(a){var b;return b=$(a.target).text(),a.preventDefault(),this.toggleAction(),this.widget.selectBackgroundList(b,1===$(this.el).find("input.save:checked").length)},c}(Backbone.View),c.exports=d}),a.register("list-widgets/src/class/views/EnrichmentRowView.js",function(a,b,c){var d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("./EnrichmentPopoverView"),e=function(a){function c(){return this.toggleMatchesAction=g(this.toggleMatchesAction,this),this.selectAction=g(this.selectAction,this),this.render=g(this.render,this),f=c.__super__.constructor.apply(this,arguments)}return i(c,a),c.prototype.tagName="tr",c.prototype.events={"click td.check input":"selectAction","click td.matches a.count":"toggleMatchesAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.model.bind("change",this.render),this.render()},c.prototype.render=function(){return $(this.el).html(b("../../templates/enrichment/enrichment.row")({row:this.model.toJSON()})),this},c.prototype.selectAction=function(){return this.model.toggleSelected(),null!=this.popoverView?($(this.el).find("td.matches a.count").after(this.popoverView.el),this.popoverView.delegateEvents()):void 0},c.prototype.toggleMatchesAction=function(a){return null==this.popoverView?$(this.el).find("td.matches a.count").after((this.popoverView=new d({matches:this.model.get("matches"),identifiers:[this.model.get("identifier")],description:this.model.get("description"),matchCb:this.callbacks.matchCb,resultsCb:this.callbacks.resultsCb,listCb:this.callbacks.listCb,response:this.response,widget:this.widget,size:$(a.target).text()})).el):this.popoverView.toggle()
},c}(Backbone.View),c.exports=e}),a.register("list-widgets/src/class/views/EnrichmentView.js",function(a,b,c){var d,e,f,g,h,i,j,k,l=function(a,b){return function(){return a.apply(b,arguments)}},m={}.hasOwnProperty,n=function(a,b){function c(){this.constructor=a}for(var d in b)m.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=b("../models/CoreModel"),g=b("./EnrichmentRowView"),e=b("./EnrichmentPopoverView"),f=b("./EnrichmentPopulationView"),d=b("./EnrichmentLengthCorrectionView"),j=b("../../utils/exporter"),h=function(a){function c(){return this.selectBackgroundList=l(this.selectBackgroundList,this),this.viewAction=l(this.viewAction,this),this.exportAction=l(this.exportAction,this),this.selectAllAction=l(this.selectAllAction,this),this.formAction=l(this.formAction,this),this.renderTableBody=l(this.renderTableBody,this),this.renderTable=l(this.renderTable,this),this.renderToolbar=l(this.renderToolbar,this),k=c.__super__.constructor.apply(this,arguments)}return n(c,a),c.prototype.events={"click div.actions a.view":"viewAction","click div.actions a.export":"exportAction","change div.form select":"formAction","click div.content input.check":"selectAllAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.collection=new i.EnrichmentResults,this.collection.bind("change",this.renderToolbar),this.render()},c.prototype.render=function(){var a,c;return $(this.el).html(b("../../templates/enrichment/enrichment")({title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type})),$(this.el).find("div.form").html(b("../../templates/enrichment/enrichment.form")({options:this.form.options,pValues:this.form.pValues,errorCorrections:this.form.errorCorrections})),null!=this.response.filterLabel&&$(this.el).find("div.form form").append(b("../../templates/extra")({label:this.response.filterLabel,possible:this.response.filters.split(","),selected:this.response.filterSelectedValue})),new f({el:$(this.el).find("div.form form"),lists:this.lists,current:this.response.current_population,loggedIn:this.response.is_logged,widget:this}),this.response.extraAttribute&&(a=JSON.parse(this.response.extraAttribute),a.gene_length&&(c=_.extend({},a.gene_length,{el:$(this.el).find("div.form form"),widget:this,cb:this.options.resultsCb}),new d(c))),null!=this.response.current_list?$(this.el).addClass("customBackgroundPopulation"):$(this.el).removeClass("customBackgroundPopulation"),this.response.results.length>0&&null==this.response.message?(this.renderToolbar(),this.renderTable()):$(this.el).find("div.content").html($(b("../../templates/noresults")({text:this.response.message||"No enrichment found."}))),this.widget.fireEvent({"class":"EnrichmentView",event:"rendered"}),this},c.prototype.renderToolbar=function(){return $(this.el).find("div.actions").html(b("../../templates/actions")())},c.prototype.renderTable=function(){var a,c,d,e,f,g,h=this;for($(this.el).find("div.content").html(b("../../templates/enrichment/enrichment.table")({label:this.response.label})),d=$(this.el).find("div.content table"),e=function(a){var b,c;return b=h.response.results[a],h.response.externalLink&&(b.externalLink=h.response.externalLink+b.identifier),c=new i.EnrichmentRow(b,h.widget),h.collection.add(c)},c=f=0,g=this.response.results.length;g>=0?g>f:f>g;c=g>=0?++f:--f)e(c);return this.renderTableBody(d),a=$(this.el).height()-$(this.el).find("div.header").height()-$(this.el).find("div.content table thead").height(),$(this.el).find("div.content div.wrapper").css("height",""+a+"px"),$(this.el).find("div.content div.head").css("width",$(this.el).find("div.content table").width()+"px"),d.find("thead th").each(function(a,b){return $(h.el).find("div.content div.head div:eq("+a+")").width($(b).width())}),d.css({"margin-top":"-"+d.find("thead").height()+"px"})},c.prototype.renderTableBody=function(a){var b,c,d,e,f;for(b=document.createDocumentFragment(),f=this.collection.models,d=0,e=f.length;e>d;d++)c=f[d],b.appendChild(new g({model:c,type:this.response.type,callbacks:{matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb},response:this.response,widget:this.widget}).el);return a.find("tbody").html(b)},c.prototype.formAction=function(a){return this.widget.formOptions[$(a.target).attr("name")]=$(a.target[a.target.selectedIndex]).attr("value"),this.widget.render()},c.prototype.selectAllAction=function(){return this.collection.toggleSelected(),this.renderToolbar(),this.renderTableBody($(this.el).find("div.content table"))},c.prototype.exportAction=function(a){var b,c,d,e,f,g,h=this;for(e=this.collection.selected(),e.length||(e=this.collection.models),d=[],f=0,g=e.length;g>f;f++)b=e[f],d.push(b.get("identifier"));return c=JSON.parse(this.response.pathQueryForMatches),c.where.push({path:this.response.pathConstraint,op:"ONE OF",values:d}),this.widget.queryRows(c,function(c){var d,f,g,i,k,l,m,n;for(f={},k=0,m=c.length;m>k;k++)g=c[k],null==f[g[0]]&&(f[g[0]]=[]),f[g[0]].push(g[1]);for(i=[],l=0,n=e.length;n>l;l++)b=e[l],i.push([b.get("description"),b.get("p-value")].join("	")+"	"+f[b.get("identifier")].join(","));if(i.length)try{return new j.Exporter(i.join("\n"),""+h.widget.bagName+" "+h.widget.id+".tsv")}catch(o){return d=o,new j.PlainExporter($(a.target),i.join("\n"))}})},c.prototype.viewAction=function(){var a,b,c,d,f,g,h;for(d=this.collection.selected(),d.length||(d=this.collection.models),a=[],c=[],f=0,g=d.length;g>f;f++)b=d[f],a.push(b.get("description")),c.push(b.get("identifier"));return c.length?(null!=(h=this.popoverView)&&h.remove(),$(this.el).find("div.actions").after((this.popoverView=new e({identifiers:c,description:a.join(", "),style:"width:300px",matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,response:this.response,widget:this.widget})).el)):void 0},c.prototype.selectBackgroundList=function(a,b){return null==b&&(b=!1),"Default"===a&&(a=""),this.widget.formOptions.current_population=a,this.widget.formOptions.remember_population=b,this.widget.render()},c}(Backbone.View),c.exports=h}),a.register("list-widgets/src/class/views/TablePopoverView.js",function(a,b,c){var d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(a){function c(){return this.toggle=f(this.toggle,this),this.adjustPopover=f(this.adjustPopover,this),this.listAction=f(this.listAction,this),this.resultsAction=f(this.resultsAction,this),this.matchAction=f(this.matchAction,this),this.renderValues=f(this.renderValues,this),this.render=f(this.render,this),e=c.__super__.constructor.apply(this,arguments)}return h(c,a),c.prototype.descriptionLimit=50,c.prototype.valuesLimit=5,c.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"toggle"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.render()},c.prototype.render=function(){return $(this.el).css({position:"relative"}),$(this.el).html(b("../../templates/popover/popover")({description:this.description,descriptionLimit:this.descriptionLimit,style:this.style||"width:300px;margin-left:-300px"})),this.pathQuery=JSON.parse(this.pathQuery),this.pathQuery.where.push({path:this.pathConstraint,op:"ONE OF",values:this.identifiers}),this.widget.queryRows(this.pathQuery,this.renderValues),this},c.prototype.renderValues=function(a){var c,d,e,f;for(d=[],e=0,f=a.length;f>e;e++)c=a[e],d.push(function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],b&&b.length>0)return b}(c));return $(this.el).find("div.values").html(b("../../templates/popover/popover.values")({values:d,type:this.type,valuesLimit:this.valuesLimit,size:this.size})),this.adjustPopover()},c.prototype.matchAction=function(a){return this.matchCb($(a.target).text(),this.type),a.preventDefault()},c.prototype.resultsAction=function(){return this.resultsCb(this.pathQuery)},c.prototype.listAction=function(){return this.listCb(this.pathQuery)},c.prototype.adjustPopover=function(){var a=this;return window.setTimeout(function(){var b,c,d,e,f,g,h;return g=$(a.el).closest("div.wrapper"),f=$(a.el).find(".popover"),e=f.closest("td.matches"),e.length?(h=e.closest("div.inner"),d=h.find("div.header"),c=h.find("div.content div.head"),b=e.position().top-d.height()+c.height()+f.outerHeight()-g.height(),b>0?f.css("top",-b):void 0):void 0},0)},c.prototype.toggle=function(){return $(this.el).toggle(),this.adjustPopover()},c}(Backbone.View),c.exports=d}),a.register("list-widgets/src/class/views/TableRowView.js",function(a,b,c){var d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("./TablePopoverView"),e=function(a){function c(){return this.toggleMatchesAction=g(this.toggleMatchesAction,this),this.selectAction=g(this.selectAction,this),this.render=g(this.render,this),f=c.__super__.constructor.apply(this,arguments)}return i(c,a),c.prototype.tagName="tr",c.prototype.events={"click td.check input":"selectAction","click td.matches a.count":"toggleMatchesAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.model.bind("change",this.render),this.render()},c.prototype.render=function(){return $(this.el).html(b("../../templates/table/table.row")({row:this.model.toJSON()})),this},c.prototype.selectAction=function(){return this.model.toggleSelected(),null!=this.popoverView?($(this.el).find("td.matches a.count").after(this.popoverView.el),this.popoverView.delegateEvents()):void 0},c.prototype.toggleMatchesAction=function(a){return null==this.popoverView?$(this.el).find("td.matches a.count").after((this.popoverView=new d({identifiers:[this.model.get("identifier")],description:this.model.get("descriptions").join(", "),matchCb:this.matchCb,resultsCb:this.resultsCb,listCb:this.listCb,pathQuery:this.response.pathQuery,pathConstraint:this.response.pathConstraint,widget:this.widget,type:this.response.type,size:$(a.target).text()})).el):this.popoverView.toggle()},c}(Backbone.View),c.exports=e}),a.register("list-widgets/src/class/views/TableView.js",function(a,b,c){var d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("../models/CoreModel"),f=b("./TableRowView"),e=b("./TablePopoverView"),h=b("../../utils/exporter"),g=function(a){function c(){return this.viewAction=j(this.viewAction,this),this.exportAction=j(this.exportAction,this),this.selectAllAction=j(this.selectAllAction,this),this.renderTableBody=j(this.renderTableBody,this),this.renderTable=j(this.renderTable,this),this.renderToolbar=j(this.renderToolbar,this),i=c.__super__.constructor.apply(this,arguments)}return l(c,a),c.prototype.events={"click div.actions a.view":"viewAction","click div.actions a.export":"exportAction","click div.content input.check":"selectAllAction"},c.prototype.initialize=function(a){var b,c;for(b in a)c=a[b],this[b]=c;return this.collection=new d.TableResults,this.collection.bind("change",this.renderToolbar),this.render()},c.prototype.render=function(){return $(this.el).html(b("../../templates/table/table")({title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type})),this.response.results.length>0?(this.renderToolbar(),this.renderTable()):$(this.el).find("div.content").html(b("../../templates/noresults")({text:'No "'+this.response.title+'" with your list.'})),this.widget.fireEvent({"class":"TableView",event:"rendered"}),this},c.prototype.renderToolbar=function(){return $(this.el).find("div.actions").html(b("../../templates/actions")())},c.prototype.renderTable=function(){var a,c,e,f,g,h,i=this;for($(this.el).find("div.content").html(b("../../templates/table/table.table")({columns:this.response.columns.split(",")})),e=$(this.el).find("div.content table"),f=function(a){var b;return b=new d.TableRow(i.response.results[a],i.widget),i.collection.add(b)},c=g=0,h=this.response.results.length;h>=0?h>g:g>h;c=h>=0?++g:--g)f(c);return this.renderTableBody(e),a=$(this.el).height()-$(this.el).find("div.header").height()-$(this.el).find("div.content div.head").height(),$(this.el).find("div.content div.wrapper").css("height",""+a+"px"),$(this.el).find("div.content div.head").css("width",$(this.el).find("div.content table").width()+"px"),e.find("thead th").each(function(a,b){return $(i.el).find("div.content div.head div:eq("+a+")").width($(b).width())}),e.css({"margin-top":"-"+e.find("thead").height()+"px"})},c.prototype.renderTableBody=function(a){var b,c,d,e,g;for(b=document.createDocumentFragment(),g=this.collection.models,d=0,e=g.length;e>d;d++)c=g[d],b.appendChild(new f({model:c,response:this.response,matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,widget:this.widget}).el);return a.find("tbody").html(b)},c.prototype.selectAllAction=function(){return this.collection.toggleSelected(),this.renderToolbar(),this.renderTableBody($(this.el).find("div.content table"))},c.prototype.exportAction=function(a){var b,c,d,e,f,g;for(e=this.collection.selected(),e.length||(e=this.collection.models),d=[this.response.columns.replace(/,/g,"	")],f=0,g=e.length;g>f;f++)c=e[f],d.push(c.get("descriptions").join("	")+"	"+c.get("matches"));if(d.length)try{return new h.Exporter(d.join("\n"),""+this.widget.bagName+" "+this.widget.id+".tsv")}catch(i){return b=i,new h.PlainExporter($(a.target),d.join("\n"))}},c.prototype.viewAction=function(){var a,b,c,d,f,g,h;for(d=this.collection.selected(),d.length||(d=this.collection.models),a=[],c=[],f=0,g=d.length;g>f;f++)b=d[f],a.push(b.get("descriptions")[0]),c.push(b.get("identifier"));return c.length?(null!=(h=this.popoverView)&&h.remove(),$(this.el).find("div.actions").after((this.popoverView=new e({identifiers:c,description:a.join(", "),matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,pathQuery:this.response.pathQuery,pathConstraint:this.response.pathConstraint,widget:this.widget,type:this.response.type,style:"width:300px"})).el)):void 0},c}(Backbone.View),c.exports=g}),a.register("list-widgets/src/templates/actions.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<a class="btn btn-small view">View</a>\n<a class="btn btn-small export">Download</a>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("list-widgets/src/templates/chart/chart.actions.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<a class="btn btn-small view-all">View in table</a>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("list-widgets/src/templates/chart/chart.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="header">\n    <h3>'),this.title&&c.push(d(this.title)),c.push("</h3>\n    <p>"),this.description&&c.push(this.description),c.push("</p>\n    "),this.notAnalysed?(c.push("\n        <p>Number of "),c.push(d(this.type)),c.push("s in this list not analysed in this widget: <a>"),c.push(d(this.notAnalysed)),c.push("</a></p>\n    ")):c.push("\n        <p>All items in your list have been analysed.</p>\n    "),c.push('\n\n    <div class="form">\n        <form style="margin:0">\n            <!-- extra.eco -->\n        </form>\n    </div>\n\n    <div class="actions" style="padding:10px 0">\n        <!-- chart.actions.eco -->\n    </div>\n</div>\n<div class="content"></div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/enrichment/enrichment.correction.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="group correction" style="display:inline-block;margin-right:10px;float:left;height:60px">\n    <label>Normalise by length <em class="badge badge-info" style="font-size:11px;font-family:serif;padding:1px 3px;border-radius:2px">i</em><div class="hjalp" style="padding:0"></div></label>\n\n    '),this.gene_length_correction?c.push('\n        <a class="btn btn-small active correction" style="float:right">Normalised</a>\n    '):c.push('\n        <a class="btn btn-small correction" style="float:right">Normalise</a>\n    '),c.push("\n\n    "),this.percentage_gene_length_not_null&&(c.push("\n    	"),c.push(d(this.percentage_gene_length_not_null)),c.push(' of genes in your list do not have a length and will be discarded, <a class="which" style="cursor:pointer">see which</a>.\n    ')),c.push("\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/enrichment/enrichment.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="header">\n    <h3>'),this.title&&c.push(d(this.title)),c.push("</h3>\n    <p>"),this.description&&c.push(this.description),c.push("</p>\n    "),this.notAnalysed?(c.push("\n        <p>Number of "),c.push(d(this.type)),c.push("s in this list not analysed in this widget: <a>"),c.push(d(this.notAnalysed)),c.push("</a></p>\n    ")):c.push("\n        <p>All items in your list have been analysed.</p>\n    "),c.push('\n\n    <div class="form">\n        <!-- enrichment.form.eco -->\n    </div>\n\n    <div class="actions" style="padding:10px 0">\n        <!-- actions.eco -->\n    </div>\n</div>\n<div class="content">\n    <!-- enrichment.table.eco -->\n</div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/enrichment/enrichment.form.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f,g,h,i,j;for(c.push('<form style="margin:0">\n    <div class="group" style="display:inline-block;margin-right:10px;float:left;height:60px">\n        <label>Test Correction</label>\n        <select name="errorCorrection" class="span2">\n            '),i=this.errorCorrections,e=0,g=i.length;g>e;e++)a=i[e],c.push('\n                <option value="'),c.push(d(a)),c.push('" '),this.options.errorCorrection===a&&c.push(d('selected="selected"')),c.push(">\n                    "),c.push(d(a)),c.push("\n            </option>\n            ");for(c.push('\n        </select>\n    </div>\n\n    <div class="group" style="display:inline-block;margin-right:10px;float:left;height:60px">\n        <label>Max p-value</label>\n        <select name="pValue" class="span2">\n            '),j=this.pValues,f=0,h=j.length;h>f;f++)b=j[f],c.push('\n                <option value="'),c.push(d(b)),c.push('" '),this.options.pValue===b&&c.push(d('selected="selected"')),c.push(">\n                    "),c.push(d(b)),c.push("\n                </option>\n            ");c.push('\n        </select>\n    </div>\n</form>\n<div style="clear:both"></div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/enrichment/enrichment.population.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="group background" style="display:inline-block;margin-right:10px;float:left;height:60px">\n    <label>Background population</label>\n    '),c.push(d(this.current)),c.push(' <a class="btn btn-small change">Change</a>\n\n    <div class="popover" style="position:absolute;top:0;right:0;z-index:1;display:none">\n        <div class="popover-inner">\n            <a style="cursor:pointer;margin:2px 5px 0 0" class="close">×</a>\n            <h4 class="popover-title">Change background population</h4>\n            <div class="popover-content">\n                <p style="margin-bottom:5px">\n                    '),this.loggedIn?c.push('\n                        <input type="checkbox" class="save" style="vertical-align:top" /> Save your preference for next time\n                    '):c.push("\n                        Login to save your preference for next time\n                    "),c.push('\n                </p>\n\n                <input type="text" class="filter" style="width:96%" placeholder="Filter..." />\n                \n                <div class="values" style="max-height:300px;overflow-y:auto">\n                    <!-- enrichment.populationlist.eco -->\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/enrichment/enrichment.populationlist.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f,g,h,i,j;for(c.push('<table class="table table-striped">\n    <tbody>\n        <tr><td>\n            '),null==this.current?c.push('\n                <strong><a href="#">Default</a></strong>\n            '):c.push('\n                <a href="#">Default</a>\n            '),c.push("\n        </td></tr>\n        "),i=this.lists,e=0,g=i.length;g>e;e++){for(a=i[e],c.push("\n            <tr><td>\n                "),a.name===this.current?(c.push("\n                    <strong>\n                        <a "),a.description&&(c.push('title="'),c.push(d(a.description)),c.push('"')),c.push(' href="#">'),c.push(d(a.name)),c.push("</a> ("),c.push(d(a.size)),c.push(")\n                    </strong>\n                ")):(c.push("\n                    <a "),a.description&&(c.push('title="'),c.push(d(a.description)),c.push('"')),c.push(' href="#">'),c.push(d(a.name)),c.push("</a> ("),c.push(d(a.size)),c.push(")\n                ")),c.push("\n                \n                "),j=a.tags,f=0,h=j.length;h>f;f++)b=j[f],c.push('\n                    <span class="label" style="vertical-align:text-bottom">'),c.push(d(b)),c.push("</span>\n                ");c.push("\n            </td></tr>\n        ")}c.push("\n    </tbody>\n</table>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/enrichment/enrichment.row.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<td class="check"><input type="checkbox" '),this.row.selected&&c.push('checked="checked"'),c.push(' /></td>\n<td class="description">\n    '),c.push(d(this.row.description)),c.push("\n    "),this.row.externalLink&&(c.push('\n        [<a href="'),c.push(this.row.externalLink),c.push('" target="_blank">'),c.push(d(this.row.identifier)),c.push("</a>]\n    ")),c.push('\n</td>\n<td class="pValue" style="white-space:nowrap">'),c.push(d(this.row["p-value"])),c.push('</td>\n<td class="matches">\n    <a class="count" style="cursor:pointer">'),c.push(d(this.row.matches)),c.push("</a>\n</td>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/enrichment/enrichment.table.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<!-- actual fixed head -->\n<div class="head" style="display:table">\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;"><input type="checkbox" class="check" /></div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;">'),c.push(d(this.label)),c.push('</div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;white-space:nowrap">p-Value <a href="http://intermine.readthedocs.org/en/latest/embedding/list-widgets/enrichment-widgets/" target="_blank" class="badge badge-info" style="font-size:11px;font-family:serif;padding:1px 3px;border-radius:2px;font-style:italic;color:#FFF!important">i</a></div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;">Matches</div>\n    <div style="clear:both"></div>\n</div>\n<div class="wrapper" style="overflow:auto;overflow-x:hidden">\n    <table class="table table-striped">\n        <!-- head for proper cell width -->\n        <thead style="visibility:hidden">\n            <tr>\n                <th></th>\n                <th>'),c.push(d(this.label)),c.push("</th>\n                <th>p-Value</th>\n                <th>Matches</th>\n            </tr>\n        </thead>\n        <tbody>\n            <!-- loop enrichment.row.eco -->\n        </tbody>\n    </table>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/error.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="alert alert-block">\n    <h4 class="alert-heading">'),c.push(d(this.title)),c.push(" for "),c.push(d(this.name)),c.push("</h4>\n    <p>"),c.push(this.text),c.push("</p>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/extra.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;if(c.push('<div class="group" style="display:inline-block;margin-right:5px;float:left">\n    <label>'),c.push(d(this.label)),c.push("</label>\n    "),this.possible.length>1){for(c.push('\n        <select name="'),c.push(d(this.label)),c.push('" class="span2">\n            '),f=this.possible,b=0,e=f.length;e>b;b++)a=f[b],c.push('\n                <option value="'),c.push(d(a)),c.push('" '),this.selected===a&&c.push(d('selected="selected"')),c.push(">\n                    "),c.push(d(a)),c.push("\n                </option>\n            ");c.push("\n        </select>\n    ")}else c.push("\n        "),c.push(d(this.possible[0])),c.push("\n    ");c.push('\n</div>\n<div style="clear:both"></div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/invalidjsonkey.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<li style="vertical-align:bottom">\n    <span style="display:inline-block" class="label label-important">'),c.push(d(this.key)),c.push("</span> is "),c.push(d(this.actual)),c.push("; was expecting "),c.push(d(this.expected)),c.push("\n</li>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/loading.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="loading" style="background:rgba(255,255,255,0.9);position:absolute;top:0;left:0;height:100%;width:100%;text-align:center;">\n    <p style="padding-top:50%;font-weight:bold;">Loading &hellip;</p>\n</div>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),a.register("list-widgets/src/templates/noresults.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")
}),function(){(function(){c.push('<div class="alert alert-info">\n    <p>'),c.push(d(this.text||"The Widget has no results.")),c.push("</p>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/popover/popover.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="popover" style="position:absolute;top:5px;right:0;z-index:1;display:block">\n    <div class="popover-inner" style="'),c.push(d(this.style)),c.push('">\n        <a style="cursor:pointer;margin:2px 5px 0 0" class="close">×</a>\n        <h3 class="popover-title">\n            '),c.push(d(this.description.slice(0,+(this.descriptionLimit-1)+1||9e9))),c.push("\n            "),this.description.length>this.descriptionLimit&&c.push("&hellip;"),c.push('\n        </h3>\n        <div class="popover-content">\n            <div class="values">\n                <!-- popover.values.eco -->\n            </div>\n            <div style="margin-top:10px">\n                <a class="btn btn-small btn-primary results">View results</a>\n                <a class="btn btn-small list">Create list</a>\n            </div>\n        </div>\n    </div>\n</div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/popover/popover.help.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="popover" style="position:absolute;top:5px;right:0;z-index:1;display: block;">\n    <div class="popover-inner">\n        <a style="cursor:pointer;margin:2px 5px 0 0" class="close">×</a>\n        <h3 class="popover-title">'),c.push(d(this.title)),c.push('</h3>\n        <div class="popover-content">\n            <p>'),c.push(d(this.text)),c.push("</p>\n        </div>\n    </div>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/popover/popover.values.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;for(c.push("<h4>"),c.push(d(this.size)),c.push(" "),c.push(d(this.type)),1!==parseInt(this.size)&&c.push(d("s")),c.push(":</h4>\n\n"),f=this.values.slice(0,+(this.valuesLimit-1)+1||9e9),b=0,e=f.length;e>b;b++)a=f[b],c.push('\n    <a href="#" class="match">'),c.push(d(a)),c.push("</a>\n");c.push("\n"),this.values.length>this.valuesLimit&&c.push("&hellip;"),c.push("\n")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/table/table.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="header">\n    <h3>'),this.title&&c.push(d(this.title)),c.push("</h3>\n    <p>"),this.description&&c.push(this.description),c.push("</p>\n    "),this.notAnalysed?(c.push("\n        <p>Number of "),c.push(d(this.type)),c.push("s in this list not analysed in this widget: <a>"),c.push(d(this.notAnalysed)),c.push("</a></p>\n    ")):c.push("\n        <p>All items in your list have been analysed.</p>\n    "),c.push('\n\n    <div class="actions" style="padding:10px 0">\n        <!-- actions.eco -->\n    </div>\n</div>\n<div class="content">\n    <!-- table.table.eco -->\n</div>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/table/table.row.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;for(c.push('<td class="check"><input type="checkbox" '),this.row.selected&&c.push('checked="checked"'),c.push(" /></td>\n"),f=this.row.descriptions,b=0,e=f.length;e>b;b++)a=f[b],c.push("\n    <td>"),c.push(d(a)),c.push("</td>\n");c.push('\n<td class="matches">\n    <a class="count" style="cursor:pointer">'),c.push(d(this.row.matches)),c.push("</a>\n</td>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/templates/table/table.table.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f,g,h,i;for(c.push('<!-- actual fixed head -->\n<div class="head" style="display:table">\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;"><input type="checkbox" class="check" /></div>\n    '),h=this.columns,b=0,f=h.length;f>b;b++)a=h[b],c.push('\n        <div style="font-weight:bold;display:table-cell;padding:0 8px;">'),c.push(d(a)),c.push("</div>\n    ");for(c.push('\n    <div style="clear:both"></div>\n</div>\n<div class="wrapper" style="overflow:auto;overflow-x:hidden">\n    <table class="table table-striped">\n        <!-- head for proper cell width -->\n        <thead style="visibility:hidden">\n            <tr>\n                <th></th>\n                '),i=this.columns,e=0,g=i.length;g>e;e++)a=i[e],c.push("\n                    <th>"),c.push(d(a)),c.push("</th>\n                ");c.push("\n            </tr>\n        </thead>\n        <tbody>\n            <!-- loop table.row.eco -->\n        </tbody>\n    </table>\n</div>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),a.register("list-widgets/src/utils/exporter.js",function(a){a.Exporter=function(){function a(a,b){var c;null==b&&(b="widget.tsv"),c=new Blob([a],{type:""+this.mime+";charset="+this.charset}),saveAs(c,b)}return a.prototype.mime="text/plain",a.prototype.charset="utf-8",a}(),a.PlainExporter=function(){function a(a,b){var c,d,e=this;d=window.open(),null==d||"undefined"==typeof d?a.after(this.msg=$("<span/>",{style:"margin-left:5px","class":"label label-inverse",text:"Please enable popups"})):(d.document.open(),d.document.write("<pre>"+b+"</pre>"),d.document.close()),c=function(){var a;return null!=(a=e.msg)?a.fadeOut():void 0},setTimeout(c,5e3)}return a}()}),a.register("list-widgets/src/utils/type.js",function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c.exports=d={},d.Root=function(){function a(){}return a.prototype.result=!1,a.prototype.is=function(){return this.result},a.prototype.toString=function(){return""+this.expected+" but got "+this.actual},a}(),d.isString=function(a){function b(a){this.actual=a,this.result="string"==typeof a}return g(b,a),b.prototype.expected="String",b}(d.Root),d.isStringOrNull=function(a){function b(a){this.actual=a,this.result=null===a||"string"==typeof a}return g(b,a),b.prototype.expected="String or Null",b}(d.Root),d.isInteger=function(a){function b(a){this.actual=a,this.result="number"==typeof a}return g(b,a),b.prototype.expected="Integer",b}(d.Root),d.isBoolean=function(a){function b(a){this.actual=a,this.result="boolean"==typeof a}return g(b,a),b.prototype.expected="Boolean true",b}(d.Root),d.isBooleanOrNull=function(a){function b(a){this.actual=a,this.result=null===a||"boolean"==typeof a}return g(b,a),b.prototype.expected="Boolean or Null",b}(d.Root),d.isNull=function(a){function b(a){this.actual=a,this.result=null===a}return g(b,a),b.prototype.expected="Null",b}(d.Root),d.isArray=function(a){function b(a){this.actual=a,this.result=a instanceof Array}return g(b,a),b.prototype.expected="Array",b}(d.Root),d.isHTTPSuccess=function(a){function b(a){this.actual=a,this.result=200===a}return g(b,a),b.prototype.expected="HTTP code 200",b}(d.Root),d.isJSON=function(a){function b(a){var b;this.actual=a,this.result=!0;try{JSON.parse(a)}catch(c){b=c,this.result=!1}}return g(b,a),b.prototype.expected="JSON Object",b}(d.Root),d.isUndefined=function(a){function b(){return e=b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.expected="it to be undefined",b}(d.Root)}),a.register("list-widgets/src/widgets.js",function(a,b,c){var d,e,f,g,h=[].slice,i=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};d=b("./class/ChartWidget"),e=b("./class/EnrichmentWidget"),f=b("./class/TableWidget"),g=function(){function a(){var a;if(a=1<=arguments.length?h.call(arguments,0):[],"string"==typeof a[0])this.service=a[0],this.token=a[1]||"";else{if(null==a[0].root)throw Error("You need to set the `root` parameter pointing to the mine's service");this.service=a[0].root,this.token=a[0].token||""}}return a.prototype.chart=function(){var a,b,c=this;return a=1<=arguments.length?h.call(arguments,0):[],(b=function(){return c.wait?setTimeout(b,20):(c.wait=!0,google.load("visualization","1.0",{packages:["corechart"],callback:function(){return b=!1,function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(d,[c.service,c.token].concat(h.call(a)),function(){})}}))})()},a.prototype.enrichment=function(){var a,b,c=this;return a=1<=arguments.length?h.call(arguments,0):[],(b=function(){return c.wait?setTimeout(b,20):null!=c.lists?function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(e,[c.service,c.token,c.lists].concat(h.call(a)),function(){}):(c.wait=!0,$.ajax({url:""+c.service+"lists?token="+c.token+"&format=json",dataType:"jsonp",success:function(b){return 200!==b.statusCode&&null==b.lists?$(a[2]).html($("<div/>",{"class":"alert alert-error",html:"Problem fetching lists we have access to <a href='"+c.service+"lists'>"+c.service+"lists</a>"})):(c.lists=b.lists,c.wait=!1,function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(e,[c.service,c.token,c.lists].concat(h.call(a)),function(){}))},error:function(a,b){return $(b[2]).html($("<div/>",{"class":"alert alert-error",html:""+a.statusText+" for <a href='"+c.service+"widgets'>"+c.service+"widgets</a>"}))}}))})()},a.prototype.table=function(){var a;return a=1<=arguments.length?h.call(arguments,0):[],function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(f,[this.service,this.token].concat(h.call(a)),function(){})},a.prototype.all=function(a,b,c,d){var e=this;return null==a&&(a="Gene"),$.ajax({url:""+this.service+"widgets",dataType:"jsonp",success:function(f){var g,h,j,k,l,m;if(f.widgets){for(l=f.widgets,m=[],j=0,k=l.length;k>j;j++)if(g=l[j],i.call(g.targets,a)>=0)switch(h=g.name.replace(/[^-a-zA-Z0-9,&\s]+/gi,"").replace(/-/gi,"_").replace(/\s/gi,"-").toLowerCase(),$(c).append($("<div/>",{id:h,"class":"widget span6"})),g.widgetType){case"chart":m.push(e.chart(g.name,b,""+c+" #"+h,d));break;case"enrichment":m.push(e.enrichment(g.name,b,""+c+" #"+h,d));break;case"table":m.push(e.table(g.name,b,""+c+" #"+h,d));break;default:m.push(void 0)}return m}},error:function(a){return $(c).html($("<div/>",{"class":"alert alert-error",html:""+a.statusText+" for <a href='"+e.service+"widgets'>"+e.service+"widgets</a>"}))}})},a}(),c.exports=g})}();var b=a("list-widgets/src/widgets.js"),c=this;"undefined"!=typeof define&&define.amd?define("list-widgets",[],function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:c["list-widgets"]=b,a.alias("list-widgets/src/widgets.js","list-widgets/index.js"),c.require="undefined"!=typeof c.require?c.require:a}();