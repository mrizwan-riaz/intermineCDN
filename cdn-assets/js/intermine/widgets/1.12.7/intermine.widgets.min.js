(function(){var e={};var t={};t["noresults.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="alert alert-info">\n    <p>'),n.push(r(this.text||"The Widget has no results.")),n.push("</p>\n</div>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["extra.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){var e,t,i,s;if(n.push('<div class="group" style="display:inline-block;margin-right:5px;float:left">\n    <label>'),n.push(r(this.label)),n.push("</label>\n    "),this.possible.length>1){for(n.push('\n        <select name="'),n.push(r(this.label)),n.push('" class="span2">\n            '),s=this.possible,t=0,i=s.length;i>t;t++)e=s[t],n.push('\n                <option value="'),n.push(r(e)),n.push('" '),this.selected===e&&n.push(r('selected="selected"')),n.push(">\n                    "),n.push(r(e)),n.push("\n                </option>\n            ");n.push("\n        </select>\n    ")}else n.push("\n        "),n.push(r(this.possible[0])),n.push("\n    ");n.push('\n</div>\n<div style="clear:both"></div>')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["invalidjsonkey.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<li style="vertical-align:bottom">\n    <span style="display:inline-block" class="label label-important">'),n.push(r(this.key)),n.push("</span> is "),n.push(r(this.actual)),n.push("; was expecting "),n.push(r(this.expected)),n.push("\n</li>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["error.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="alert alert-block">\n    <h4 class="alert-heading">'),n.push(r(this.title)),n.push(" for "),n.push(r(this.name)),n.push("</h4>\n    <p>"),n.push(this.text),n.push("</p>\n</div>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["actions.eco"]=function(e){e||(e={});var t,n=[],r=e.safe,i=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},i||(i=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<a class="btn btn-small view">View</a>\n<a class="btn btn-small export">Download</a>')}).call(this)}.call(e),e.safe=r,e.escape=i,n.join("")};t["loading.eco"]=function(e){e||(e={});var t,n=[],r=e.safe,i=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},i||(i=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="loading" style="background:rgba(255,255,255,0.9);position:absolute;top:0;left:0;height:100%;width:100%;text-align:center;">\n    <p style="padding-top:50%;font-weight:bold;">Loading …</p>\n</div>')}).call(this)}.call(e),e.safe=r,e.escape=i,n.join("")};t["popover.values.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){var e,t,i,s;for(n.push("<h4>"),n.push(r(this.size)),n.push(" "),n.push(r(this.type)),1!==parseInt(this.size)&&n.push(r("s")),n.push(":</h4>\n\n"),s=this.values.slice(0,+(this.valuesLimit-1)+1||9e9),t=0,i=s.length;i>t;t++)e=s[t],n.push('\n    <a href="#" class="match">'),n.push(r(e)),n.push("</a>\n");n.push("\n"),this.values.length>this.valuesLimit&&n.push("…"),n.push("\n")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["popover.help.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="popover" style="position:absolute;top:5px;right:0;z-index:1;display: block;">\n    <div class="popover-inner">\n        <a style="cursor:pointer;margin:2px 5px 0 0" class="close">×</a>\n        <h3 class="popover-title">'),n.push(r(this.title)),n.push('</h3>\n        <div class="popover-content">\n            <p>'),n.push(r(this.text)),n.push("</p>\n        </div>\n    </div>\n</div>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["popover.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="popover" style="position:absolute;top:5px;right:0;z-index:1;display:block">\n    <div class="popover-inner" style="'),n.push(r(this.style)),n.push('">\n        <a style="cursor:pointer;margin:2px 5px 0 0" class="close">×</a>\n        <h3 class="popover-title">\n            '),n.push(r(this.description.slice(0,+(this.descriptionLimit-1)+1||9e9))),n.push("\n            "),this.description.length>this.descriptionLimit&&n.push("…"),n.push('\n        </h3>\n        <div class="popover-content">\n            <div class="values">\n                <!-- popover.values.eco -->\n            </div>\n            <div style="margin-top:10px">\n                <a class="btn btn-small btn-primary results">View results</a>\n                <a class="btn btn-small list">Create list</a>\n            </div>\n        </div>\n    </div>\n</div>')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["enrichment.correction.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="group correction" style="display:inline-block;margin-right:10px;float:left;height:60px">\n    <label>Normalise by length <em class="badge badge-info" style="font-size:11px;font-family:serif;padding:1px 3px;border-radius:2px">i</em><div class="hjalp" style="padding:0"></div></label>\n\n    '),this.gene_length_correction?n.push('\n        <a class="btn btn-small active correction" style="float:right">Normalised</a>\n    '):n.push('\n        <a class="btn btn-small correction" style="float:right">Normalise</a>\n    '),n.push("\n\n    "),this.percentage_gene_length_not_null&&(n.push("\n    	"),n.push(r(this.percentage_gene_length_not_null)),n.push(' of genes in your list do not have a length and will be discarded, <a class="which" style="cursor:pointer">see which</a>.\n    ')),n.push("\n</div>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["enrichment.form.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){var e,t,i,s,o,u,a,f;for(n.push('<form style="margin:0">\n    <div class="group" style="display:inline-block;margin-right:10px;float:left;height:60px">\n        <label>Test Correction</label>\n        <select name="errorCorrection" class="span2">\n            '),a=this.errorCorrections,i=0,o=a.length;o>i;i++)e=a[i],n.push('\n                <option value="'),n.push(r(e)),n.push('" '),this.options.errorCorrection===e&&n.push(r('selected="selected"')),n.push(">\n                    "),n.push(r(e)),n.push("\n            </option>\n            ");for(n.push('\n        </select>\n    </div>\n\n    <div class="group" style="display:inline-block;margin-right:10px;float:left;height:60px">\n        <label>Max p-value</label>\n        <select name="pValue" class="span2">\n            '),f=this.pValues,s=0,u=f.length;u>s;s++)t=f[s],n.push('\n                <option value="'),n.push(r(t)),n.push('" '),this.options.pValue===t&&n.push(r('selected="selected"')),n.push(">\n                    "),n.push(r(t)),n.push("\n                </option>\n            ");n.push('\n        </select>\n    </div>\n</form>\n<div style="clear:both"></div>')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["enrichment.populationlist.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){var e,t,i,s,o,u,a,f;for(n.push('<table class="table table-striped">\n    <tbody>\n        <tr><td>\n            '),null==this.current?n.push('\n                <strong><a href="#">Default</a></strong>\n            '):n.push('\n                <a href="#">Default</a>\n            '),n.push("\n        </td></tr>\n        "),a=this.lists,i=0,o=a.length;o>i;i++){for(e=a[i],n.push("\n            <tr><td>\n                "),e.name===this.current?(n.push("\n                    <strong>\n                        <a "),e.description&&(n.push('title="'),n.push(r(e.description)),n.push('"')),n.push(' href="#">'),n.push(r(e.name)),n.push("</a> ("),n.push(r(e.size)),n.push(")\n                    </strong>\n                ")):(n.push("\n                    <a "),e.description&&(n.push('title="'),n.push(r(e.description)),n.push('"')),n.push(' href="#">'),n.push(r(e.name)),n.push("</a> ("),n.push(r(e.size)),n.push(")\n                ")),n.push("\n                \n                "),f=e.tags,s=0,u=f.length;u>s;s++)t=f[s],n.push('\n                    <span class="label" style="vertical-align:text-bottom">'),n.push(r(t)),n.push("</span>\n                ");n.push("\n            </td></tr>\n        ")}n.push("\n    </tbody>\n</table>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["enrichment.table.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<!-- actual fixed head -->\n<div class="head" style="display:table">\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;"><input type="checkbox" class="check" /></div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;">'),n.push(r(this.label)),n.push('</div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;white-space:nowrap">p-Value <a href="http://intermine.readthedocs.org/en/latest/embedding/list-widgets/enrichment-widgets/" target="_blank" class="badge badge-info" style="font-size:11px;font-family:serif;padding:1px 3px;border-radius:2px;font-style:italic;color:#FFF!important">i</a></div>\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;">Matches</div>\n    <div style="clear:both"></div>\n</div>\n<div class="wrapper" style="overflow:auto;overflow-x:hidden">\n    <table class="table table-striped">\n        <!-- head for proper cell width -->\n        <thead style="visibility:hidden">\n            <tr>\n                <th></th>\n                <th>'),n.push(r(this.label)),n.push("</th>\n                <th>p-Value</th>\n                <th>Matches</th>\n            </tr>\n        </thead>\n        <tbody>\n            <!-- loop enrichment.row.eco -->\n        </tbody>\n    </table>\n</div>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["enrichment.population.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="group background" style="display:inline-block;margin-right:10px;float:left;height:60px">\n    <label>Background population</label>\n    '),n.push(r(this.current)),n.push(' <a class="btn btn-small change">Change</a>\n\n    <div class="popover" style="position:absolute;top:0;right:0;z-index:1;display:none">\n        <div class="popover-inner">\n            <a style="cursor:pointer;margin:2px 5px 0 0" class="close">×</a>\n            <h4 class="popover-title">Change background population</h4>\n            <div class="popover-content">\n                <p style="margin-bottom:5px">\n                    '),this.loggedIn?n.push('\n                        <input type="checkbox" class="save" style="vertical-align:top" /> Save your preference for next time\n                    '):n.push("\n                        Login to save your preference for next time\n                    "),n.push('\n                </p>\n\n                <input type="text" class="filter" style="width:96%" placeholder="Filter..." />\n                \n                <div class="values" style="max-height:300px;overflow-y:auto">\n                    <!-- enrichment.populationlist.eco -->\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["enrichment.row.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<td class="check"><input type="checkbox" '),this.row.selected&&n.push('checked="checked"'),n.push(' /></td>\n<td class="description">\n    '),n.push(r(this.row.description)),n.push("\n    "),this.row.externalLink&&(n.push('\n        [<a href="'),n.push(this.row.externalLink),n.push('" target="_blank">'),n.push(r(this.row.identifier)),n.push("</a>]\n    ")),n.push('\n</td>\n<td class="pValue" style="white-space:nowrap">'),n.push(r(this.row["p-value"])),n.push('</td>\n<td class="matches">\n    <a class="count" style="cursor:pointer">'),n.push(r(this.row.matches)),n.push("</a>\n</td>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["enrichment.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="header">\n    <h3>'),this.title&&n.push(r(this.title)),n.push("</h3>\n    <p>"),this.description&&n.push(this.description),n.push("</p>\n    "),this.notAnalysed?(n.push("\n        <p>Number of "),n.push(r(this.type)),n.push("s in this list not analysed in this widget: <a>"),n.push(r(this.notAnalysed)),n.push("</a></p>\n    ")):n.push("\n        <p>All items in your list have been analysed.</p>\n    "),n.push('\n\n    <div class="form">\n        <!-- enrichment.form.eco -->\n    </div>\n\n    <div class="actions" style="padding:10px 0">\n        <!-- actions.eco -->\n    </div>\n</div>\n<div class="content">\n    <!-- enrichment.table.eco -->\n</div>')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["chart.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="header">\n    <h3>'),this.title&&n.push(r(this.title)),n.push("</h3>\n    <p>"),this.description&&n.push(this.description),n.push("</p>\n    "),this.notAnalysed?(n.push("\n        <p>Number of "),n.push(r(this.type)),n.push("s in this list not analysed in this widget: <a>"),n.push(r(this.notAnalysed)),n.push("</a></p>\n    ")):n.push("\n        <p>All items in your list have been analysed.</p>\n    "),n.push('\n\n    <div class="form">\n        <form style="margin:0">\n            <!-- extra.eco -->\n        </form>\n    </div>\n\n    <div class="actions" style="padding:10px 0">\n        <!-- chart.actions.eco -->\n    </div>\n</div>\n<div class="content"></div>')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["chart.actions.eco"]=function(e){e||(e={});var t,n=[],r=e.safe,i=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},i||(i=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<a class="btn btn-small view-all">View in table</a>')}).call(this)}.call(e),e.safe=r,e.escape=i,n.join("")};t["table.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){n.push('<div class="header">\n    <h3>'),this.title&&n.push(r(this.title)),n.push("</h3>\n    <p>"),this.description&&n.push(this.description),n.push("</p>\n    "),this.notAnalysed?(n.push("\n        <p>Number of "),n.push(r(this.type)),n.push("s in this list not analysed in this widget: <a>"),n.push(r(this.notAnalysed)),n.push("</a></p>\n    ")):n.push("\n        <p>All items in your list have been analysed.</p>\n    "),n.push('\n\n    <div class="actions" style="padding:10px 0">\n        <!-- actions.eco -->\n    </div>\n</div>\n<div class="content">\n    <!-- table.table.eco -->\n</div>')}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["table.table.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){var e,t,i,s,o,u,a;for(n.push('<!-- actual fixed head -->\n<div class="head" style="display:table">\n    <div style="font-weight:bold;display:table-cell;padding:0 8px;"><input type="checkbox" class="check" /></div>\n    '),u=this.columns,t=0,s=u.length;s>t;t++)e=u[t],n.push('\n        <div style="font-weight:bold;display:table-cell;padding:0 8px;">'),n.push(r(e)),n.push("</div>\n    ");for(n.push('\n    <div style="clear:both"></div>\n</div>\n<div class="wrapper" style="overflow:auto;overflow-x:hidden">\n    <table class="table table-striped">\n        <!-- head for proper cell width -->\n        <thead style="visibility:hidden">\n            <tr>\n                <th></th>\n                '),a=this.columns,i=0,o=a.length;o>i;i++)e=a[i],n.push("\n                    <th>"),n.push(r(e)),n.push("</th>\n                ");n.push("\n            </tr>\n        </thead>\n        <tbody>\n            <!-- loop table.row.eco -->\n        </tbody>\n    </table>\n</div>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};t["table.row.eco"]=function(e){e||(e={});var t,n=[],r=function(e){return e&&e.ecoSafe?e:e!==void 0&&null!=e?s(e):""},i=e.safe,s=e.escape;return t=e.safe=function(e){if(e&&e.ecoSafe)return e;(void 0===e||null==e)&&(e="");var t=new String(e);return t.ecoSafe=!0,t},s||(s=e.escape=function(e){return(""+e).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,""")}),function(){(function(){var e,t,i,s;for(n.push('<td class="check"><input type="checkbox" '),this.row.selected&&n.push('checked="checked"'),n.push(" /></td>\n"),s=this.row.descriptions,t=0,i=s.length;i>t;t++)e=s[t],n.push("\n    <td>"),n.push(r(e)),n.push("</td>\n");n.push('\n<td class="matches">\n    <a class="count" style="cursor:pointer">'),n.push(r(this.row.matches)),n.push("</a>\n</td>")}).call(this)}.call(e),e.safe=i,e.escape=s,n.join("")};var n,r,i,s,o,u,a,f,l={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t){if(l.call(t,n))e[n]=t[n]}r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e},h=function(e,t){return function(){return e.apply(t,arguments)}},p=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1},d=[].slice;r=function(){function e(e,t){var n;if(t==null){t="widget.tsv"}n=new Blob([e],{type:""+this.mime+";charset="+this.charset});saveAs(n,t)}e.prototype.mime="text/plain";e.prototype.charset="utf-8";return e}();i=function(){function e(e,t){var r,i,s=this;i=window.open();if(i==null||typeof i==="undefined"){e.after(this.msg=n("<span/>",{style:"margin-left:5px","class":"label label-inverse",text:"Please enable popups"}))}else{i.document.open();i.document.write("<pre>"+t+"</pre>");i.document.close()}r=function(){var e;return(e=s.msg)!=null?e.fadeOut():void 0};setTimeout(r,5e3)}return e}();if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){var t,n;n=this.length>>>0;t=Number(arguments[1])||0;t=t<0?Math.ceil(t):Math.floor(t);if(t<0){t+=n}while(t<n){if(t in this&&this[t]===e){return t}t++}return-1}}a={};a.Root=function(){function e(){}e.prototype.result=false;e.prototype.is=function(){return this.result};e.prototype.toString=function(){return""+this.expected+" but got "+this.actual};return e}();a.isString=function(e){function t(e){this.actual=e;this.result=typeof e==="string"}c(t,e);t.prototype.expected="String";return t}(a.Root);a.isStringOrNull=function(e){function t(e){this.actual=e;this.result=e===null||typeof e==="string"}c(t,e);t.prototype.expected="String or Null";return t}(a.Root);a.isInteger=function(e){function t(e){this.actual=e;this.result=typeof e==="number"}c(t,e);t.prototype.expected="Integer";return t}(a.Root);a.isBoolean=function(e){function t(e){this.actual=e;this.result=typeof e==="boolean"}c(t,e);t.prototype.expected="Boolean true";return t}(a.Root);a.isBooleanOrNull=function(e){function t(e){this.actual=e;this.result=e===null||typeof e==="boolean"}c(t,e);t.prototype.expected="Boolean or Null";return t}(a.Root);a.isNull=function(e){function t(e){this.actual=e;this.result=e===null}c(t,e);t.prototype.expected="Null";return t}(a.Root);a.isArray=function(e){function t(e){this.actual=e;this.result=e instanceof Array}c(t,e);t.prototype.expected="Array";return t}(a.Root);a.isHTTPSuccess=function(e){function t(e){this.actual=e;this.result=e===200}c(t,e);t.prototype.expected="HTTP code 200";return t}(a.Root);a.isJSON=function(e){function t(e){var t;this.actual=e;this.result=true;try{JSON.parse(e)}catch(n){t=n;this.result=false}}c(t,e);t.prototype.expected="JSON Object";return t}(a.Root);a.isUndefined=function(e){function t(){f=t.__super__.constructor.apply(this,arguments);return f}c(t,e);t.prototype.expected="it to be undefined";return t}(a.Root);u=function(e,t){var n;for(n in t){if(e[n]==null){if(Object.prototype.hasOwnProperty.call(t,n)){e[n]=t[n]}}}return e};o=function(e){var s,o,f,l,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B,j,F,I,q,R,U,z,W,X,V;x=function(){function e(){this.queryRows=h(this.queryRows,this);this.error=h(this.error,this);this.validateType=h(this.validateType,this);this.template=h(this.template,this);var e=this;this.log=this.log||[];this.log.push("Creating wrapping element");n(this.el).html(n("<div/>",{"class":"inner",style:"height:572px;overflow:hidden;position:relative"}));this.el=""+this.el+" div.inner";this.log.push("Initializing InterMine Service");this._service=new intermine.Service({root:this.service,token:this.token});this.log.push("Monitoring for debug mode");n(window).on("hashchange",function(){if(window.location.hash==="#debug"){return n(e.el).append(n("<a/>",{"class":"btn btn-small btn-warning",text:"Debug",style:"z-index:5;position:absolute;display:block;top:0;left:0",click:function(){var t;t=n("<pre/>",{html:e.log.join("\n\n")});return n(e.el).css("overflow","scroll").html(t)}}))}})}e.prototype.template=function(e,n){var r;if(n==null){n={}}this.log.push("Get eco template `"+e+"`");return typeof t[r=""+e+".eco"]==="function"?t[r](n):void 0};e.prototype.validateType=function(e,t){var n,r,i,s;this.log.push("Validating "+JSON.stringify(e));n=[];for(r in e){s=e[r];i=typeof t[r]==="function"?new t[r](s):void 0;if(i&&!i.is()){n.push(this.template("invalidjsonkey",{key:r,actual:i.is(),expected:new String(i)}))}}if(n.length){return this.error(n,"JSONResponse")}};e.prototype.error=function(e,t){if(e==null){e={title:"Error",text:"Generic error"}}e.name=this.name||this.id;switch(t){case"AJAXTransport":e.title="AJAX Request Failed";break;case"JSONResponse":e.title="Invalid JSON Response";e.text="<ol>"+e.join("")+"</ol>"}n(this.el).html(this.template("error",e));this.log.push(e.title);return this.fireEvent({event:"error",type:t,message:e.title})};e.prototype.fireEvent=function(e){var t,n,r;t=document.createEvent("Events");t.initEvent("InterMine",true,true);for(n in e){r=e[n];t[n]=r}t.source="ListWidgets";t.widget={id:this.id,bag:this.bagName,el:this.el,service:this.service};return window.dispatchEvent(t)};e.prototype.queryRows=function(e,t){var n;this.log.push("Querying for rows");n=this._service;return async.waterfall([function(t){return n.query(e,function(e){return t(null,e)})},function(e,t){return e.rows(function(e){return t(null,e)})}],function(e,n){return t(n)})};return e}();A=function(e){function t(e,n,r,i,s,o){this.service=e;this.token=n;this.id=r;this.bagName=i;this.el=s;if(o==null){o={}}this.render=h(this.render,this);this.widgetOptions=u(o,this.widgetOptions);this.log=[];t.__super__.constructor.call(this);this.render()}c(t,e);t.prototype.widgetOptions={title:true,description:true,matchCb:function(e,t){return typeof console!=="undefined"&&console!==null?console.log(e,t):void 0},resultsCb:function(e){return typeof console!=="undefined"&&console!==null?console.log(e):void 0},listCb:function(e){return typeof console!=="undefined"&&console!==null?console.log(e):void 0}};t.prototype.spec={response:{columnTitle:a.isString,title:a.isString,description:a.isString,pathQuery:a.isString,columns:a.isString,pathConstraint:a.isString,requestedAt:a.isString,list:a.isString,type:a.isString,notAnalysed:a.isInteger,results:a.isArray,wasSuccessful:a.isBoolean,error:a.isNull,statusCode:a.isHTTPSuccess}};t.prototype.render=function(){var e,t,r,i=this;t=window.setTimeout(function(){return n(i.el).append(i.loading=n(i.template("loading")))},400);if((r=this.view)!=null){r.undelegateEvents()}e={widget:this.id,list:this.bagName,token:this.token};this.log.push("Sending data payload "+JSON.stringify(e));return n.ajax({url:""+this.service+"list/table",dataType:"jsonp",data:e,success:function(e){var n;i.log.push("Received a response "+JSON.stringify(e));window.clearTimeout(t);if((n=i.loading)!=null){n.remove()}i.validateType(e,i.spec.response);if(e.wasSuccessful){i.name=e.title;i.log.push("Creating new TableView");return i.view=new L({widget:i,el:i.el,template:i.template,response:e,options:i.widgetOptions})}},error:function(e,n,r){clearTimeout(t);return i.error({text:""+i.service+"list/table"},"AJAXTransport")}})};return t}(x);S=function(e){function t(e,n,r,i,s,o,a){this.service=e;this.token=n;this.lists=r;this.id=i;this.bagName=s;this.el=o;if(a==null){a={}}this.render=h(this.render,this);this.widgetOptions=u(a,this.widgetOptions);this.formOptions={errorCorrection:"Holm-Bonferroni",pValue:"0.05"};this.log=[];t.__super__.constructor.call(this);this.render()}c(t,e);t.prototype.widgetOptions={title:true,description:true,matchCb:function(e,t){return typeof console!=="undefined"&&console!==null?console.log(e,t):void 0},resultsCb:function(e){return typeof console!=="undefined"&&console!==null?console.log(e):void 0},listCb:function(e){return typeof console!=="undefined"&&console!==null?console.log(e):void 0}};t.prototype.errorCorrections=["Holm-Bonferroni","Benjamini Hochberg","Bonferroni","None"];t.prototype.pValues=["0.05","0.10","1.00"];t.prototype.spec={response:{title:a.isString,description:a.isString,pathQuery:a.isJSON,pathConstraint:a.isString,error:a.isNull,list:a.isString,notAnalysed:a.isInteger,requestedAt:a.isString,results:a.isArray,label:a.isString,statusCode:a.isHTTPSuccess,type:a.isString,wasSuccessful:a.isBoolean,filters:a.isString,filterLabel:a.isString,filterSelectedValue:a.isString,externalLink:a.isString,pathQueryForMatches:a.isString,is_logged:a.isBoolean,current_population:a.isStringOrNull,message:a.isString,extraAttribute:a.isStringOrNull}};t.prototype.render=function(){var e,t,r,i,s,o,u=this;r=window.setTimeout(function(){return n(u.el).append(u.loading=n(u.template("loading")))},400);if((s=this.view)!=null){s.undelegateEvents()}e={widget:this.id,list:this.bagName,correction:this.formOptions.errorCorrection,maxp:this.formOptions.pValue,token:this.token};o=this.formOptions;for(t in o){i=o[t];if(t!=="errorCorrection"&&t!=="pValue"&&t!=="current_population"&&t!=="remember_population"&&t!=="gene_length_correction"){t="filter"}e[t]=i}this.log.push("Sending data payload "+JSON.stringify(e));return n.ajax({url:""+this.service+"list/enrichment",dataType:"jsonp",data:e,success:function(e){var t,n,i;u.log.push("Received a response "+JSON.stringify(e));window.clearTimeout(r);if((i=u.loading)!=null){i.remove()}u.validateType(e,u.spec.response);if(e.wasSuccessful){u.name=e.title;n=function(){var n,r,i,s;i=this.lists;s=[];for(n=0,r=i.length;n<r;n++){t=i[n];if(t.type===e.type&&t.size!==0){s.push(t)}}return s}.call(u);u.log.push("Creating new EnrichmentView");return u.view=new E({widget:u,el:u.el,template:u.template,response:e,form:{options:u.formOptions,pValues:u.pValues,errorCorrections:u.errorCorrections},options:u.widgetOptions,lists:n})}},error:function(e,t,n){clearTimeout(r);return u.error({text:""+u.service+"list/enrichment"},"AJAXTransport")}})};return t}(x);f=function(e){function t(e,n,r,i,s,o){this.service=e;this.token=n;this.id=r;this.bagName=i;this.el=s;if(o==null){o={}}this.render=h(this.render,this);this.widgetOptions=u(o,this.widgetOptions);this.log=[];t.__super__.constructor.call(this);this.render()}c(t,e);t.prototype.widgetOptions={title:true,description:true,matchCb:function(e,t){return typeof console!=="undefined"&&console!==null?console.log(e,t):void 0},resultsCb:function(e){return typeof console!=="undefined"&&console!==null?console.log(e):void 0},listCb:function(e){return typeof console!=="undefined"&&console!==null?console.log(e):void 0}};t.prototype.formOptions={};t.prototype.spec={response:{chartType:a.isString,description:a.isString,error:a.isNull,list:a.isString,notAnalysed:a.isInteger,pathQuery:a.isString,requestedAt:a.isString,results:a.isArray,seriesLabels:a.isString,seriesValues:a.isString,statusCode:a.isHTTPSuccess,title:a.isString,type:a.isString,wasSuccessful:a.isBoolean,filters:a.isString,filterLabel:a.isString,filterSelectedValue:a.isString,simplePathQuery:a.isString,domainLabel:a.isString,rangeLabel:a.isString}};t.prototype.render=function(){var e,t,r,i,s,u,a=this;r=window.setTimeout(function(){return n(a.el).append(a.loading=n(a.template("loading")))},400);if((s=this.view)!=null){s.undelegateEvents()}e={widget:this.id,list:this.bagName,token:this.token};u=this.formOptions;for(t in u){i=u[t];if(t!=="errorCorrection"&&t!=="pValue"){e["filter"]=i}}this.log.push("Sending data payload "+JSON.stringify(e));return n.ajax({url:""+this.service+"list/chart",dataType:"jsonp",data:e,success:function(e){var t;a.log.push("Received a response "+JSON.stringify(e));window.clearTimeout(r);if((t=a.loading)!=null){t.remove()}a.validateType(e,a.spec.response);if(e.wasSuccessful){a.name=e.title;a.log.push("Creating new ChartView");return a.view=new o({widget:a,el:a.el,template:a.template,response:e,form:{options:a.formOptions},options:a.widgetOptions})}},error:function(e,t,n){clearTimeout(r);return a.error({text:""+a.service+"list/chart"},"AJAXTransport")}})};return t}(x);d=function(e){function t(){this.toggleSelected=h(this.toggleSelected,this);this.validate=h(this.validate,this);O=t.__super__.constructor.apply(this,arguments);return O}c(t,e);t.prototype.defaults={selected:false};t.prototype.initialize=function(e,t){this.widget=t;return this.validate(e)};t.prototype.validate=function(e){return this.widget.validateType(e,this.spec)};t.prototype.toggleSelected=function(){return this.set({selected:!this.get("selected")})};return t}(e.Model);l=function(e){function t(){I=t.__super__.constructor.apply(this,arguments);return I}c(t,e);t.prototype.model=d;t.prototype.selected=function(){return this.filter(function(e){return e.get("selected")})};t.prototype.toggleSelected=function(){var e,t,n,r,i,s,o,u,a;if(this.models.length-this.selected().length){s=this.models;u=[];for(t=0,r=s.length;t<r;t++){e=s[t];u.push(e.set({selected:true},{silent:true}))}return u}else{o=this.models;a=[];for(n=0,i=o.length;n<i;n++){e=o[n];a.push(e.set({selected:false},{silent:true}))}return a}};return t}(e.Collection);b=function(e){function t(){q=t.__super__.constructor.apply(this,arguments);return q}c(t,e);t.prototype.spec={description:a.isString,identifier:a.isString,matches:a.isInteger,"p-value":a.isInteger,selected:a.isBoolean,externalLink:a.isString};t.prototype.toJSON=function(){var e;e=_.clone(this.attributes);if(e["p-value"]<.001){e["p-value"]=e["p-value"].toExponential(6)}else{e["p-value"]=e["p-value"].toFixed(6)}return e};return t}(d);y=function(e){function t(){R=t.__super__.constructor.apply(this,arguments);return R}c(t,e);t.prototype.model=b;return t}(l);C=function(e){function t(){U=t.__super__.constructor.apply(this,arguments);return U}c(t,e);t.prototype.spec={matches:a.isInteger,identifier:a.isInteger,descriptions:a.isArray,selected:a.isBoolean};return t}(d);N=function(e){function t(){z=t.__super__.constructor.apply(this,arguments);return z}c(t,e);t.prototype.model=C;return t}(l);v=function(e){function t(){this.seeWhich=h(this.seeWhich,this);this.toggleCull=h(this.toggleCull,this);this.hideHelp=h(this.hideHelp,this);this.showHelp=h(this.showHelp,this);this.render=h(this.render,this);W=t.__super__.constructor.apply(this,arguments);return W}c(t,e);t.prototype.help="Depending on the type of experiment your data comes from, it is sometimes \nnecessary to normalize by gene length in order to get the correct p-values. \nIf your data comes from a genome-wide binding experiment such as ChIP-seq \nor DamID, binding intervals are more likely to be associated with longer \ngenes than shorter ones, and you should therefore normalize by gene length. \nThis is not the case for experiments such as gene expression studies, where \ngene length does not play a role in the likelihood that a particular set of \ngenes will be overrepresented in the list.";t.prototype.events={"click .correction a.correction":"toggleCull","click .correction a.which":"seeWhich","hover .correction label .badge":"showHelp","click .correction a.close":"hideHelp"};t.prototype.initialize=function(e){var t,n;for(t in e){n=e[t];this[t]=n}if(this.gene_length_correction!==null){return this.render()}};t.prototype.render=function(){n(this.el).append(this.widget.template("enrichment.correction",this));return this};t.prototype.showHelp=function(){return n(this.el).find(".hjalp").html(this.widget.template("popover.help",{title:'What does "Normalise by length" mean?',text:this.help}))};t.prototype.hideHelp=function(){return n(this.el).find(".hjalp").empty()};t.prototype.toggleCull=function(e){var t;(t=n(e.target)).toggleClass("active").text(function(){if(t.hasClass("active")){return"Normalised"}else{return"Normalise"}});this.widget.widget.formOptions["gene_length_correction"]=t.hasClass("active");return this.widget.widget.render()};t.prototype.seeWhich=function(e){var t;t=JSON.parse(this.pathQueryGeneLengthNull);this.cb(t);return e.preventDefault()};return t}(e.View);E=function(e){function t(){this.selectBackgroundList=h(this.selectBackgroundList,this);this.viewAction=h(this.viewAction,this);this.exportAction=h(this.exportAction,this);this.selectAllAction=h(this.selectAllAction,this);this.formAction=h(this.formAction,this);this.renderTableBody=h(this.renderTableBody,this);this.renderTable=h(this.renderTable,this);this.renderToolbar=h(this.renderToolbar,this);X=t.__super__.constructor.apply(this,arguments);return X}c(t,e);t.prototype.events={"click div.actions a.view":"viewAction","click div.actions a.export":"exportAction","change div.form select":"formAction","click div.content input.check":"selectAllAction"};t.prototype.initialize=function(e){var t,n;for(t in e){n=e[t];this[t]=n}this.collection=new y;this.collection.bind("change",this.renderToolbar);return this.render()};t.prototype.render=function(){var e,t;n(this.el).html(this.template("enrichment",{title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type}));n(this.el).find("div.form").html(this.template("enrichment.form",{options:this.form.options,pValues:this.form.pValues,errorCorrections:this.form.errorCorrections}));if(this.response.filterLabel!=null){n(this.el).find("div.form form").append(this.template("extra",{label:this.response.filterLabel,possible:this.response.filters.split(","),selected:this.response.filterSelectedValue}))}new g({el:n(this.el).find("div.form form"),lists:this.lists,current:this.response.current_population,loggedIn:this.response.is_logged,widget:this});if(this.response.extraAttribute){e=JSON.parse(this.response.extraAttribute);if(e.gene_length){t=u(e.gene_length,{el:n(this.el).find("div.form form"),widget:this,cb:this.options.resultsCb});new v(t)}}if(this.response.current_list!=null){n(this.el).addClass("customBackgroundPopulation")}else{n(this.el).removeClass("customBackgroundPopulation")}if(this.response.results.length>0&&this.response.message==null){this.renderToolbar();this.renderTable()}else{n(this.el).find("div.content").html(n(this.template("noresults",{text:this.response.message||"No enrichment found."})))}this.widget.fireEvent({"class":"EnrichmentView",event:"rendered"});return this};t.prototype.renderToolbar=function(){return n(this.el).find("div.actions").html(n(this.template("actions")))};t.prototype.renderTable=function(){var e,t,r,i,s,o,u=this;n(this.el).find("div.content").html(n(this.template("enrichment.table",{label:this.response.label})));r=n(this.el).find("div.content table");i=function(e){var t,n;t=u.response.results[e];if(u.response.externalLink){t.externalLink=u.response.externalLink+t.identifier}n=new b(t,u.widget);return u.collection.add(n)};for(t=s=0,o=this.response.results.length;0<=o?s<o:s>o;t=0<=o?++s:--s){i(t)}this.renderTableBody(r);e=n(this.el).height()-n(this.el).find("div.header").height()-n(this.el).find("div.content table thead").height();n(this.el).find("div.content div.wrapper").css("height",""+e+"px");n(this.el).find("div.content div.head").css("width",n(this.el).find("div.content table").width()+"px");r.find("thead th").each(function(e,t){return n(u.el).find("div.content div.head div:eq("+e+")").width(n(t).width())});return r.css({"margin-top":"-"+r.find("thead").height()+"px"})};t.prototype.renderTableBody=function(e){var t,n,r,i,s;t=document.createDocumentFragment();s=this.collection.models;for(r=0,i=s.length;r<i;r++){n=s[r];t.appendChild((new w({model:n,template:this.template,type:this.response.type,callbacks:{matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb},response:this.response,widget:this.widget})).el)}return e.find("tbody").html(t)};t.prototype.formAction=function(e){this.widget.formOptions[n(e.target).attr("name")]=n(e.target[e.target.selectedIndex]).attr("value");return this.widget.render()};t.prototype.selectAllAction=function(){this.collection.toggleSelected();this.renderToolbar();return this.renderTableBody(n(this.el).find("div.content table"))};t.prototype.exportAction=function(e){var t,s,o,u,a,f,l=this;u=this.collection.selected();if(!u.length){u=this.collection.models}o=[];for(a=0,f=u.length;a<f;a++){t=u[a];o.push(t.get("identifier"))}s=JSON.parse(this.response["pathQueryForMatches"]);s.where.push({path:this.response.pathConstraint,op:"ONE OF",values:o});return this.widget.queryRows(s,function(s){var o,a,f,c,h,p,d,v;a={};for(h=0,d=s.length;h<d;h++){f=s[h];if(a[f[0]]==null){a[f[0]]=[]}a[f[0]].push(f[1])}c=[];for(p=0,v=u.length;p<v;p++){t=u[p];c.push([t.get("description"),t.get("p-value")].join("	")+"	"+a[t.get("identifier")].join(","))}if(c.length){try{return new r(c.join("\n"),""+l.widget.bagName+" "+l.widget.id+".tsv")}catch(m){o=m;return new i(n(e.target),c.join("\n"))}}})};t.prototype.viewAction=function(){var e,t,r,i,s,o,u;i=this.collection.selected();if(!i.length){i=this.collection.models}e=[];r=[];for(s=0,o=i.length;s<o;s++){t=i[s];e.push(t.get("description"));r.push(t.get("identifier"))}if(r.length){if((u=this.popoverView)!=null){u.remove()}return n(this.el).find("div.actions").after((this.popoverView=new m({identifiers:r,description:e.join(", "),template:this.template,style:"width:300px",matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,response:this.response,widget:this.widget})).el)}};t.prototype.selectBackgroundList=function(e,t){if(t==null){t=false}if(e==="Default"){e=""}this.widget.formOptions["current_population"]=e;this.widget.formOptions["remember_population"]=t;return this.widget.render()};return t}(e.View);o=function(e){function t(){this.formAction=h(this.formAction,this);this.viewSeriesAction=h(this.viewSeriesAction,this);this.viewAllAction=h(this.viewAllAction,this);this.viewBarsAction=h(this.viewBarsAction,this);this.viewBarAction=h(this.viewBarAction,this);this.keypressAction=h(this.keypressAction,this);this.renderToolbar=h(this.renderToolbar,this);V=t.__super__.constructor.apply(this,arguments);return V}c(t,e);t.prototype.chartOptions={fontName:"Sans-Serif",fontSize:11,colors:["#2F72FF","#9FC0FF"],legend:{position:"top"},chartArea:{top:30,bottom:80,left:50},hAxis:{titleTextStyle:{fontName:"Sans-Serif"}},vAxis:{titleTextStyle:{fontName:"Sans-Serif"}}};t.prototype.brewer={3:["rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],4:["rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],5:["rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:["rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],7:["rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,69,148)"],8:["rgb(222,235,247)","rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,81,156)","rgb(8,48,107)"]};t.prototype.multiselect=false;t.prototype.events={"change div.form select":"formAction","click div.actions a.view-all":"viewAllAction"};t.prototype.initialize=function(e){var t,r;for(t in e){r=e[t];this[t]=r}n(document).on("keyup keydown",this.keypressAction);return this.render()};t.prototype.render=function(){var e,t,r,i,s,o=this;n(this.el).html(this.template("chart",{title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type}));if(this.response.filterLabel!=null){n(this.el).find("div.form form").append(this.template("extra",{label:this.response.filterLabel,possible:this.response.filters.split(","),selected:this.response.filterSelectedValue}))}if(this.response.results.length>1){if(this.response.chartType in google.visualization){this.renderToolbar();s=n(this.el).width();t=n(this.el).height()-n(this.el).find("div.header").height();this.chartOptions.width=s;this.chartOptions.chartArea.width=s-this.chartOptions.chartArea.left;this.chartOptions.height=t;this.chartOptions.chartArea.height=t-this.chartOptions.chartArea.top-this.chartOptions.chartArea.bottom;this.chartOptions.hAxis={title:this.response.chartType==="BarChart"?this.response.rangeLabel:this.response.domainLabel};this.chartOptions.vAxis={title:this.response.chartType==="BarChart"?this.response.domainLabel:this.response.rangeLabel};e=new google.visualization[this.response.chartType](n(this.el).find("div.content")[0]);google.visualization.events.addListener(e,"click",function(){var e;n(o.el).find(".content").prepend(e=n("<input/>",{"class":"focus",type:"text"}));return e.focus().remove()});if(this.response.pathQuery!=null){google.visualization.events.addListener(e,"select",function(){return o.viewBarAction(e)})}if(this.response.results[0].length===1){this.response.results[0]=[this.response.domainLabel,this.response.results[0][0]]}i=JSON.parse(JSON.stringify(this.chartOptions));if(this.response.chartType==="PieChart"&&(r=this.response.results.length-1)>=3){if(r>8){r=8}i.colors=this.brewer[r].reverse()}e.draw(google.visualization.arrayToDataTable(this.response.results,false),i)}else{this.error({title:this.response.chartType,text:"This chart type does not exist in Google Visualization API"})}}else{n(this.el).find("div.content").html(n(this.template("noresults",{text:'No "'+this.response.title+'" with your list.'})))}this.widget.fireEvent({"class":"ChartView",event:"rendered"});return this};t.prototype.renderToolbar=function(){return n(this.el).find("div.actions").html(n(this.template("chart.actions")))};t.prototype.translate=function(e,t){if(e.seriesValues!=null){return e.seriesValues.split(",")[e.seriesLabels.split(",").indexOf(t)]}};t.prototype.keypressAction=function(e){if(e.type==="keydown"){if(e.keyCode>=16&&e.keyCode<=18){return this.multiselect=true}}else{if(e.keyCode>=16&&e.keyCode<=18){this.multiselect=false;if(this.selection!=null&&this.selection.length!==0){this.viewBarsAction(this.selection);return this.selection=null}}}};t.prototype.viewBarAction=function(e){var t,r,i,o,u,a,f;if(this.barView!=null){this.barView.close()}a=e.getSelection()[0];if(this.multiselect){if((f=this.selection)==null){this.selection=[]}return this.selection.push(a)}else{if(a){r="";o=this.response.pathQuery;i=this.response.simplePathQuery;if(a.row!=null){u=this.response.results[a.row+1][0];r+=u;o=o.replace("%category",u);i=i.replace("%category",u);if(a.column!=null){if(this.response.seriesPath==="ActualExpectedCriteria"&&a.column===2){return false}t=this.response.results[0][a.column];r+=" "+t;o=o.replace("%series",this.translate(this.response,t));i=o.replace("%series",this.translate(this.response,t))}}else{if(a.column!=null){return this.viewSeriesAction(o.replace("%series",this.translate(this.response,this.response.results[0][a.column])))}}o=JSON.parse(o);i=JSON.parse(i);if(r){return n(this.el).find("div.content").append((this.barView=new s({description:r,template:this.template,resultsPq:o,resultsCb:this.options.resultsCb,listCb:this.options.listCb,matchCb:this.options.matchCb,quickPq:i,widget:this.widget,type:this.response.type})).el)}}}};t.prototype.viewBarsAction=function(e){var t,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;p=JSON.parse(this.response.pathQuery);y=p.where;for(c in y){f=y[c];switch(f.value){case"%category":s=f;break;case"%series":v=f;break;default:f.code="A";i=f}}p.where=[i,s,v];p.constraintLogic="";h=[];o=66;a=[i];l=function(e){var t,n,r;for(n=0,r=a.length;n<r;n++){t=a[n];if(t.path===e.path&&t.value===e.value){return t.code}}};for(m=0,g=e.length;m<g;m++){d=e[m];if(d!=null&&s!=null){u=n.extend(true,{},s,{value:this.response.results[d.row+1][0]});t=l(u);if(t==null){u.code=t=String.fromCharCode(o++).toUpperCase();a.push(u)}if(d.column!=null&&v!=null){u=n.extend(true,{},v,{value:this.translate(this.response,this.response.results[0][d.column])});r=l(u);if(r==null){u.code=r=String.fromCharCode(o++).toUpperCase();a.push(u)}h.push("("+[t,r].join(" AND ")+")")}else{h.push(t)}}}if(o>90){throw"Too many constraints"}p.constraintLogic=["A","("+h.join(" OR ")+")"].join(" AND ");p.where=a;if(o>66){return this.options.resultsCb(p)}};t.prototype.viewAllAction=function(){var e,t,n,r,i,s,o,u;n=JSON.parse(this.response.pathQuery);o=["%category","%series"];for(i=0,s=o.length;i<s;i++){r=o[i];u=n.where;for(t in u){e=u[t];if((e!=null?e.value:void 0)===r){n.where.splice(t,1);break}}}return this.options.resultsCb(n)};t.prototype.viewSeriesAction=function(e){var t,n,r,i;r=JSON.parse(e);i=r.where;for(n in i){t=i[n];if((t!=null?t.value:void 0)==="%category"){r.where.splice(n,1);break}}return this.options.resultsCb(r)};t.prototype.formAction=function(e){this.widget.formOptions[n(e.target).attr("name")]=n(e.target[e.target.selectedIndex]).attr("value");return this.widget.render()};return t}(e.View);m=function(e){function t(){this.listAction=h(this.listAction,this);this.resultsAction=h(this.resultsAction,this);this.matchAction=h(this.matchAction,this);this.getPq=h(this.getPq,this);this.toggle=h(this.toggle,this);this.adjustPopover=h(this.adjustPopover,this);this.renderValues=h(this.renderValues,this);this.render=h(this.render,this);M=t.__super__.constructor.apply(this,arguments);return M}c(t,e);t.prototype.descriptionLimit=50;t.prototype.valuesLimit=5;t.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"toggle"};t.prototype.initialize=function(e){var t,n;for(t in e){n=e[t];this[t]=n}return this.render()};t.prototype.render=function(){var e;n(this.el).css({position:"relative"});n(this.el).html(this.template("popover",{description:this.description,descriptionLimit:this.descriptionLimit,style:this.style||"width:300px;margin-left:-300px"}));e=JSON.parse(this.response["pathQueryForMatches"]);e.where.push({path:this.response.pathConstraint,op:"ONE OF",values:this.identifiers});this.widget.queryRows(e,this.renderValues);return this};t.prototype.renderValues=function(e){var t,r,i,s,o;i=[];for(s=0,o=e.length;s<o;s++){t=e[s];r=function(e){var t,n,r,i;i=e.reverse();for(n=0,r=i.length;n<r;n++){t=i[n];if(t&&t.length>0){return t}}}(t);if(p.call(i,r)<0){i.push(r)}}n(this.el).find("div.values").html(this.template("popover.values",{values:i,type:this.response.type,valuesLimit:this.valuesLimit,size:this.size}));return this.adjustPopover()};t.prototype.adjustPopover=function(){var e=this;return window.setTimeout(function(){var t,r,i,s,o,u,a;u=n(e.el).closest("div.wrapper");o=n(e.el).find(".popover");s=o.closest("td.matches");if(!s.length){return}a=s.closest("div.inner");i=a.find("div.header");r=a.find("div.content div.head");t=s.position().top-i.height()+r.height()+o.outerHeight()-u.height();if(t>0){return o.css("top",-t)}},0)};t.prototype.toggle=function(){n(this.el).toggle();return this.adjustPopover()};t.prototype.getPq=function(){var e;e=this.response.pathQuery;this.pq=JSON.parse(e);return this.pq.where.push({path:this.response.pathConstraint,op:"ONE OF",values:this.identifiers})};t.prototype.matchAction=function(e){this.matchCb(n(e.target).text(),this.response.type);return e.preventDefault()};t.prototype.resultsAction=function(){if(this.pq==null){this.getPq()}return this.resultsCb(this.pq)};t.prototype.listAction=function(){if(this.pq==null){this.getPq()}return this.listCb(this.pq)};return t}(e.View);L=function(e){function t(){this.viewAction=h(this.viewAction,this);this.exportAction=h(this.exportAction,this);this.selectAllAction=h(this.selectAllAction,this);this.renderTableBody=h(this.renderTableBody,this);this.renderTable=h(this.renderTable,this);this.renderToolbar=h(this.renderToolbar,this);D=t.__super__.constructor.apply(this,arguments);return D}c(t,e);t.prototype.events={"click div.actions a.view":"viewAction","click div.actions a.export":"exportAction","click div.content input.check":"selectAllAction"};t.prototype.initialize=function(e){var t,n;for(t in e){n=e[t];this[t]=n}this.collection=new N;this.collection.bind("change",this.renderToolbar);return this.render()};t.prototype.render=function(){n(this.el).html(this.template("table",{title:this.options.title?this.response.title:"",description:this.options.description?this.response.description:"",notAnalysed:this.response.notAnalysed,type:this.response.type}));if(this.response.results.length>0){this.renderToolbar();this.renderTable()}else{n(this.el).find("div.content").html(n(this.template("noresults",{text:'No "'+this.response.title+'" with your list.'})))}this.widget.fireEvent({"class":"TableView",event:"rendered"});return this};t.prototype.renderToolbar=function(){return n(this.el).find("div.actions").html(n(this.template("actions")))};t.prototype.renderTable=function(){var e,t,r,i,s,o,u=this;n(this.el).find("div.content").html(n(this.template("table.table",{columns:this.response.columns.split(",")})));r=n(this.el).find("div.content table");i=function(e){var t;t=new C(u.response.results[e],u.widget);return u.collection.add(t)};for(t=s=0,o=this.response.results.length;0<=o?s<o:s>o;t=0<=o?++s:--s){i(t)}this.renderTableBody(r);e=n(this.el).height()-n(this.el).find("div.header").height()-n(this.el).find("div.content div.head").height();n(this.el).find("div.content div.wrapper").css("height",""+e+"px");n(this.el).find("div.content div.head").css("width",n(this.el).find("div.content table").width()+"px");r.find("thead th").each(function(e,t){return n(u.el).find("div.content div.head div:eq("+e+")").width(n(t).width())});return r.css({"margin-top":"-"+r.find("thead").height()+"px"})};t.prototype.renderTableBody=function(e){var t,n,r,i,s;t=document.createDocumentFragment();s=this.collection.models;for(r=0,i=s.length;r<i;r++){n=s[r];t.appendChild((new k({model:n,template:this.template,response:this.response,matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,widget:this.widget})).el)}return e.find("tbody").html(t)};t.prototype.selectAllAction=function(){this.collection.toggleSelected();this.renderToolbar();return this.renderTableBody(n(this.el).find("div.content table"))};t.prototype.exportAction=function(e){var t,s,o,u,a,f;u=this.collection.selected();if(!u.length){u=this.collection.models}o=[this.response.columns.replace(/,/g,"	")];for(a=0,f=u.length;a<f;a++){s=u[a];o.push(s.get("descriptions").join("	")+"	"+s.get("matches"))}if(o.length){try{return new r(o.join("\n"),""+this.widget.bagName+" "+this.widget.id+".tsv")}catch(l){t=l;return new i(n(e.target),o.join("\n"))}}};t.prototype.viewAction=function(){var e,t,r,i,s,o,u;i=this.collection.selected();if(!i.length){i=this.collection.models}e=[];r=[];for(s=0,o=i.length;s<o;s++){t=i[s];e.push(t.get("descriptions")[0]);r.push(t.get("identifier"))}if(r.length){if((u=this.popoverView)!=null){u.remove()}return n(this.el).find("div.actions").after((this.popoverView=new T({identifiers:r,description:e.join(", "),template:this.template,matchCb:this.options.matchCb,resultsCb:this.options.resultsCb,listCb:this.options.listCb,pathQuery:this.response.pathQuery,pathConstraint:this.response.pathConstraint,widget:this.widget,type:this.response.type,style:"width:300px"})).el)}};return t}(e.View);T=function(e){function t(){this.toggle=h(this.toggle,this);this.adjustPopover=h(this.adjustPopover,this);this.listAction=h(this.listAction,this);this.resultsAction=h(this.resultsAction,this);this.matchAction=h(this.matchAction,this);this.renderValues=h(this.renderValues,this);this.render=h(this.render,this);P=t.__super__.constructor.apply(this,arguments);return P}c(t,e);t.prototype.descriptionLimit=50;t.prototype.valuesLimit=5;t.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"toggle"};t.prototype.initialize=function(e){var t,n;for(t in e){n=e[t];this[t]=n}return this.render()};t.prototype.render=function(){n(this.el).css({position:"relative"});n(this.el).html(this.template("popover",{description:this.description,descriptionLimit:this.descriptionLimit,style:this.style||"width:300px;margin-left:-300px"}));this.pathQuery=JSON.parse(this.pathQuery);this.pathQuery.where.push({path:this.pathConstraint,op:"ONE OF",values:this.identifiers});this.widget.queryRows(this.pathQuery,this.renderValues);return this};t.prototype.renderValues=function(e){var t,r,i,s;r=[];for(i=0,s=e.length;i<s;i++){t=e[i];r.push(function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(t&&t.length>0){return t}}}(t))}n(this.el).find("div.values").html(this.template("popover.values",{values:r,type:this.type,valuesLimit:this.valuesLimit,size:this.size}));return this.adjustPopover()};t.prototype.matchAction=function(e){this.matchCb(n(e.target).text(),this.type);return e.preventDefault()};t.prototype.resultsAction=function(){return this.resultsCb(this.pathQuery)};t.prototype.listAction=function(){return this.listCb(this.pathQuery)};t.prototype.adjustPopover=function(){var e=this;return window.setTimeout(function(){var t,r,i,s,o,u,a;u=n(e.el).closest("div.wrapper");o=n(e.el).find(".popover");s=o.closest("td.matches");if(!s.length){return}a=s.closest("div.inner");i=a.find("div.header");r=a.find("div.content div.head");t=s.position().top-i.height()+r.height()+o.outerHeight()-u.height();if(t>0){return o.css("top",-t)}},0)};t.prototype.toggle=function(){n(this.el).toggle();return this.adjustPopover()};return t}(e.View);s=function(e){function t(){this.close=h(this.close,this);this.listAction=h(this.listAction,this);this.resultsAction=h(this.resultsAction,this);this.matchAction=h(this.matchAction,this);this.renderValues=h(this.renderValues,this);this.render=h(this.render,this);H=t.__super__.constructor.apply(this,arguments);return H}c(t,e);t.prototype.descriptionLimit=50;t.prototype.valuesLimit=5;t.prototype.events={"click a.match":"matchAction","click a.results":"resultsAction","click a.list":"listAction","click a.close":"close"};t.prototype.initialize=function(e){var t,n;for(t in e){n=e[t];this[t]=n}return this.render()};t.prototype.render=function(){n(this.el).html(this.template("popover",{description:this.description,descriptionLimit:this.descriptionLimit,style:"width:300px"}));this.widget.queryRows(this.quickPq,this.renderValues);return this};t.prototype.renderValues=function(e){var t,r,i,s;r=[];for(i=0,s=e.length;i<s;i++){t=e[i];r.push(function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(t&&t.length>0){return t}}}(t))}return n(this.el).find("div.values").html(this.template("popover.values",{values:r,type:this.type,valuesLimit:this.valuesLimit,size:r.length}))};t.prototype.matchAction=function(e){this.matchCb(n(e.target).text(),this.type);return e.preventDefault()};t.prototype.resultsAction=function(){return this.resultsCb(this.resultsPq)};t.prototype.listAction=function(){return this.listCb(this.resultsPq)};t.prototype.close=function(){return n(this.el).remove()};return t}(e.View);k=function(e){function t(){this.toggleMatchesAction=h(this.toggleMatchesAction,this);this.selectAction=h(this.selectAction,this);this.render=h(this.render,this);B=t.__super__.constructor.apply(this,arguments);return B}c(t,e);t.prototype.tagName="tr";t.prototype.events={"click td.check input":"selectAction","click td.matches a.count":"toggleMatchesAction"};t.prototype.initialize=function(e){var t,n;for(t in e){n=e[t];this[t]=n}this.model.bind("change",this.render);return this.render()};t.prototype.render=function(){n(this.el).html(this.template("table.row",{row:this.model.toJSON()}));return this};t.prototype.selectAction=function(){this.model.toggleSelected();if(this.popoverView!=null){n(this.el).find("td.matches a.count").after(this.popoverView.el);return this.popoverView.delegateEvents()}};t.prototype.toggleMatchesAction=function(e){if(this.popoverView==null){return n(this.el).find("td.matches a.count").after((this.popoverView=new T({identifiers:[this.model.get("identifier")],description:this.model.get("descriptions").join(", "),template:this.template,matchCb:this.matchCb,resultsCb:this.resultsCb,listCb:this.listCb,pathQuery:this.response.pathQuery,pathConstraint:this.response.pathConstraint,widget:this.widget,type:this.response.type,size:n(e.target).text()})).el)}else{return this.popoverView.toggle()}};return t}(e.View);g=function(e){function t(){this.selectListAction=h(this.selectListAction,this);this.filterAction=h(this.filterAction,this);this.toggleAction=h(this.toggleAction,this);this.renderLists=h(this.renderLists,this);this.render=h(this.render,this);j=t.__super__.constructor.apply(this,arguments);return j}c(t,e);t.prototype.events={"click .background a.change":"toggleAction","click .background a.close":"toggleAction","keyup .background input.filter":"filterAction","click .background table a":"selectListAction"};t.prototype.initialize=function(e){var t,n;for(t in e){n=e[t];this[t]=n}return this.render()};t.prototype.render=function(){n(this.el).append(this.widget.template("enrichment.population",{current:this.current!=null?this.current:"Default",loggedIn:this.loggedIn}));this.renderLists(this.lists);return this};t.prototype.renderLists=function(e){return n(this.el).find("div.values").html(this.widget.template("enrichment.populationlist",{lists:e,current:this.current}))};t.prototype.toggleAction=function(){return n(this.el).find("div.popover").toggle()};t.prototype.filterAction=function(e){var t=this;if(this.timeout!=null){clearTimeout(this.timeout)}return this.timeout=setTimeout(function(){var r,i,s;i=n(e.target).val();if(i!==t.query){t.query=i;s=new RegExp(""+i+".*","i");return t.renderLists(function(){var e,t,n,i;n=this.lists;i=[];for(e=0,t=n.length;e<t;e++){r=n[e];if(r.name.match(s)){i.push(r)}}return i}.call(t))}},500)};t.prototype.selectListAction=function(e){var t;t=n(e.target).text();e.preventDefault();this.toggleAction();return this.widget.selectBackgroundList(t,n(this.el).find("input.save:checked").length===1)};return t}(e.View);w=function(e){function t(){this.toggleMatchesAction=h(this.toggleMatchesAction,this);this.selectAction=h(this.selectAction,this);this.render=h(this.render,this);F=t.__super__.constructor.apply(this,arguments);return F}c(t,e);t.prototype.tagName="tr";t.prototype.events={"click td.check input":"selectAction","click td.matches a.count":"toggleMatchesAction"};t.prototype.initialize=function(e){var t,n;for(t in e){n=e[t];this[t]=n}this.model.bind("change",this.render);return this.render()};t.prototype.render=function(){n(this.el).html(this.template("enrichment.row",{row:this.model.toJSON()}));return this};t.prototype.selectAction=function(){this.model.toggleSelected();if(this.popoverView!=null){n(this.el).find("td.matches a.count").after(this.popoverView.el);return this.popoverView.delegateEvents()}};t.prototype.toggleMatchesAction=function(e){if(this.popoverView==null){return n(this.el).find("td.matches a.count").after((this.popoverView=new m({matches:this.model.get("matches"),identifiers:[this.model.get("identifier")],description:this.model.get("description"),template:this.template,matchCb:this.callbacks.matchCb,resultsCb:this.callbacks.resultsCb,listCb:this.callbacks.listCb,response:this.response,widget:this.widget,size:n(e.target).text()})).el)}else{return this.popoverView.toggle()}};return t}(e.View);return{TableWidget:A,EnrichmentWidget:S,ChartWidget:f,InterMineWidget:x,CoreModel:d,EnrichmentLengthCorrectionView:v,EnrichmentView:E,ChartView:o,EnrichmentPopoverView:m,TableView:L,TablePopoverView:T,ChartPopoverView:s,TableRowView:k,EnrichmentPopulationView:g,EnrichmentRowView:w}};n=window.jQuery||window.Zepto;s=function(){function t(){var t,r,i=this;r=1<=arguments.length?d.call(arguments,0):[];if(typeof r[0]==="string"){this.service=r[0];this.token=r[1]||""}else{if(r[0].root!=null){this.service=r[0].root}else{throw Error("You need to set the `root` parameter pointing to the mine's service")}this.token=r[0].token||""}t=function(t){if(t){throw t}n=window.jQuery;c(e,o(window.Backbone));return i.wait=false};if(r[0].skipDeps){t()}else{intermine.load(this.resources,t)}}t.prototype.VERSION="1.12.7";t.prototype.wait=true;t.prototype.resources={css:{Bootstrap:{path:"http://cdn.intermine.org/css/bootstrap/2.0.4-prefixed-no-icons/css/bootstrap.min.css"}},js:{JSON:{path:"http://cdn.intermine.org/js/json3/3.2.2/json3.min.js"},setImmediate:{path:"http://cdn.intermine.org/js/setImmediate/1.0.1/setImmediate.min.js"},async:{path:"http://cdn.intermine.org/js/async/0.2.6/async.min.js",depends:["setImmediate"]},jQuery:{path:"http://cdn.intermine.org/js/jquery/1.9.1/jquery-1.9.1.min.js"},_:{path:"http://cdn.intermine.org/js/underscore.js/1.3.3/underscore-min.js"},Backbone:{path:"http://cdn.intermine.org/js/backbone.js/1.0.0/backbone-min.js",depends:["jQuery","_"]},google:{path:"https://www.google.com/jsapi"},"intermine.imjs":{path:"http://cdn.intermine.org/js/intermine/imjs/2.6.0/im.js",depends:["jQuery","_"]},FileSaver:{path:"http://cdn.intermine.org/js/filesaver.js/FileSaver.min.js"}}};t.prototype.chart=function(){var t,n,r=this;t=1<=arguments.length?d.call(arguments,0):[];return(n=function(){if(r.wait){return setTimeout(n,20)}return google.load("visualization","1.0",{packages:["corechart"],callback:function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e.ChartWidget,[r.service,r.token].concat(d.call(t)),function(){})}})})()};t.prototype.enrichment=function(){var t,r,i=this;t=1<=arguments.length?d.call(arguments,0):[];return(r=function(){if(i.wait){return setTimeout(r,20)}if(i.lists!=null){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e.EnrichmentWidget,[i.service,i.token,i.lists].concat(d.call(t)),function(){})}else{i.wait=true;return n.ajax({url:""+i.service+"lists?token="+i.token,dataType:"jsonp",success:function(r){if(r.statusCode!==200&&r.lists==null){return n(t[2]).html(n("<div/>",{"class":"alert alert-error",html:"Problem fetching lists we have access to <a href='"+i.service+"lists'>"+i.service+"lists</a>"}))}else{i.lists=r.lists;i.wait=false;return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e.EnrichmentWidget,[i.service,i.token,i.lists].concat(d.call(t)),function(){})}},error:function(e,t,r){return n(t[2]).html(n("<div/>",{"class":"alert alert-error",html:""+e.statusText+" for <a href='"+i.service+"widgets'>"+i.service+"widgets</a>"}))}})}})()};t.prototype.table=function(){var t,n,r=this;t=1<=arguments.length?d.call(arguments,0):[];return(n=function(){if(r.wait){return setTimeout(n,20)}return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(e.TableWidget,[r.service,r.token].concat(d.call(t)),function(){})})()};t.prototype.all=function(e,t,r,i){var s,o=this;if(e==null){e="Gene"}return(s=function(){if(o.wait){return setTimeout(s,20)}return n.ajax({url:""+o.service+"widgets",dataType:"jsonp",success:function(s){var u,a,f,l,c,h;if(s.widgets){c=s.widgets;h=[];for(f=0,l=c.length;f<l;f++){u=c[f];if(!(p.call(u.targets,e)>=0)){continue}a=u.name.replace(/[^-a-zA-Z0-9,&\s]+/ig,"").replace(/-/gi,"_").replace(/\s/gi,"-").toLowerCase();n(r).append(n("<div/>",{id:a,"class":"widget span6"}));switch(u.widgetType){case"chart":h.push(o.chart(u.name,t,""+r+" #"+a,i));break;case"enrichment":h.push(o.enrichment(u.name,t,""+r+" #"+a,i));break;case"table":h.push(o.table(u.name,t,""+r+" #"+a,i));break;default:h.push(void 0)}}return h}},error:function(e,t,i){return n(r).html(n("<div/>",{"class":"alert alert-error",html:""+e.statusText+" for <a href='"+o.service+"widgets'>"+o.service+"widgets</a>"}))}})})()};return t}();if(!window.intermine&&window.intermine.load){throw"You need to include the InterMine API Loader first!"}else{window.intermine.widgets=s}}).call(this)