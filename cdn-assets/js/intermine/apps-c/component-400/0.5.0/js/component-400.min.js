!function(){var a=function(b,c,d){var e=a.resolve(b);if(null===e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];if(!g._resolving&&!g.exports){var h={};h.exports={},h.client=h.component=!0,g._resolving=!0,g.call(this,h.exports,a.relative(e),h),delete g._resolving,g.exports=h.exports}return g.exports};a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){if(b=c[d],a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!==b[d]&&""!==b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}var d=a.normalize(b,".."),e=function(c){var d=e.resolve(c);return a(d,b,c)};return e.resolve=function(e){var f=e.charAt(0);if("/"==f)return e.slice(1);if("."==f)return a.normalize(d,e);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),e=g.slice(0,h+1).join("/")+"/deps/"+e},e.exists=function(b){return a.modules.hasOwnProperty(e.resolve(b))},e};var b=this;b.require="undefined"!=typeof b.require?b.require:a,function(){b.require.register("component-400/src/app.js",function(a,b,c){var d,e,f,g,h;g=b("./modules/deps").mori,f=b("./modules/mediator"),h=b("./modules/options"),d=b("./views/app"),e=b("./models/database"),c.exports=function(a){var c,i;if(!a.cb)throw"Provide your own callback function";return h.set(a.options),a.formatter&&(b("./modules/formatter").primary=a.formatter),c=new e(a.data||[]),f.on("object:click",a.portal||function(){},this),f.on("app:save",function(){return a.cb(g.into_array(c.selected))},this),i=a.el||a.target||"body",new d({el:i,db:c}),function(){return g.into_array(c.selected)}}}),b.require.register("component-400/src/models/database.js",function(a,b,c){var d,e,f,g,h,i,j={}.hasOwnProperty;i=b("../modules/deps"),h=i._,g=i.mori,f=b("../modules/mediator"),d=function(){function a(a){var b,c,d,i,k,l,m,n=this;this.data=a,this.type=this.data.type,this.duplicates=this.data.matches.DUPLICATE||[],this.matches=function(){var a,c,d,f;for(d=["MATCH","TYPE_CONVERTED","OTHER"],f=[],a=0,c=d.length;c>a;a++)k=d[a],null!=(b=this.data.matches[k])&&b.length&&(i=e[k](this.type),f.push({name:i,collection:b,reason:k}));return f}.call(this),(b=this.data.unresolved).length&&this.matches.push({reason:"UNRESOLVED",collection:b}),this.selected=g.set(),c=function(a){var b,d,e,f,i,k,l;switch(!1){case!h.isArray(a):for(k=[],f=0,i=a.length;i>f;f++)b=a[f],k.push(c(b));return k;case!h.isObject(a):if(h.has(a,"id"))return n.selected=g.conj(n.selected,a.id);l=[];for(d in a)j.call(a,d)&&(e=a[d],l.push(c(e)));return l}},m=this.data.matches;for(d in m)j.call(m,d)&&(l=m[d],"DUPLICATE"!==d&&c(l));f.on("item:toggle",function(a,b){var c;return c=["disj","conj"][+a],this.selected=g[c](this.selected,b)},this)}return a}(),e={MATCH:function(){return"direct hit"},TYPE_CONVERTED:function(a){return"non-"+a+" identifier"},OTHER:function(){return"synonym"},WILDCARD:function(){return"wildcard"}},c.exports=d}),b.require.register("component-400/src/models/tooltips.js",function(a,b,c){c.exports={1:"These identifiers matched more than\none record in the database. Click on the\nADD button next to the identifier you\nwant to include in your list.",provided:"These are the identifiers you typed\nin the form on the previous page.",add:"Use these buttons to add (or remove)\nthis record to your list.",matches:"These are the records in the database that correspond\nto the identifier you entered on the previous page.",2:"This is a summary of what is in your list.",match:"An exact match was found between what\nyou entered and what is in our database.",type_converted:"These identifiers matched records in our\ndatabase but were not the type of data you\nspecified on the previous page.",other:"These identifiers matched old identifiers.",4:"Identifiers that could not be resolved.",5:"Multiple identifiers matched an object.",noblob:"Please upgrade your browser to be able to\ndownload a summary table."}}),b.require.register("component-400/src/modules/csv.js",function(a,b){var c,d;d=b("./deps")._,c=function(a){return a?'"'+new String(a).replace(/\"/g,'""')+'"':'""'},a.save=function(a,b,e){if(null==b&&(b=" "),!e)switch(!1){case-1===navigator.appVersion.indexOf("Win"):e="\r\n";break;default:e="\n"}return d.map(a,function(a){return d.map(a,c).join(b)}).join(e)},a.read=function(a,b){var c,d,e,f,g,h,i,j,k;if(null==b&&(b=","),!a.length)return{};for(f=new RegExp("(\\"+b+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+b+"\\r\\n]*))","gi"),i={},e=null,h=0,c=0;e=f.exec(a);)k=e.slice(1),d=k[0],g=k[1],j=k[2],d&&d!==b&&(h++,c=0),g&&(j=g.replace(new RegExp('""',"g"),'"')),j&&0!==j.length?i[String.fromCharCode(65+c++)+h]=j:c++;return i}}),b.require.register("component-400/src/modules/deps.js",function(a,b,c){c.exports={_:_,mori:mori,BackboneEvents:BackboneEvents,saveAs:saveAs,$:$}}),b.require.register("component-400/src/modules/formatter.js",function(a,b,c){var d;d=b("./deps")._,c.exports={primary:function(a){var b,c,d,e,f,g,h,i,j;for(i=["symbol","primaryIdentifier","secondIdentifier","name"],g=0,h=i.length;h>g;g++)if(c=i[g],f=a.summary[c])return f;f=[0,"NA"],j=a.summary;for(b in j)e=j[b],e&&(d=(""+e).replace(/\W/,"").length)>f[0]&&(f=[d,e]);return f[1]},csv:function(a,b){var c,e,f;return b||(b=d.keys(a.summary)),e=function(){var d,e,g;for(g=[],d=0,e=b.length;e>d;d++)c=b[d],g.push((f=a.summary[c])?f:"");return g}(),[b,e]},flyout:function(a){var b,c,d,e;d=a.summary,e=[];for(b in d)c=d[b],c&&e.push([this.field(b),c]);return e},field:function(a){return a.replace(/\./g," ").replace(/([A-Z])/g," $1").toLowerCase()}}}),b.require.register("component-400/src/modules/mediator.js",function(a,b,c){var d;d=b("./deps").BackboneEvents,c.exports=_.extend({},d)}),b.require.register("component-400/src/modules/options.js",function(a,b,c){var d;d={showDownloadSummary:!0,matchViewStrategy:"full"},c.exports={set:function(a,b){return _.isObject(a)?_.extend(d,a):d[a]=b},get:function(a){return a?d[a]:d}}}),b.require.register("component-400/src/modules/slicer.js",function(a,b,c){c.exports=function(a,b,c,d){var e,f,g,h,i,j,k;for(k=[],h=0,i=a.length;i>h;h++)if(g=a[h],j=g.range,e=j[0],f=j[1],e>=b)if(e===b){if(!(c>=f)){d.call(this,g,0,c-e);break}if(d.call(this,g,0,g.matches.length-1),f===c)break;k.push(void 0)}else{if(f>c){d.call(this,g,0,c-e);break}if(d.call(this,g,0,g.matches.length-1),f===c)break;k.push(void 0)}else{if(!(c>=f)){d.call(this,g,b-e,c-e);break}if(d.call(this,g,b-e,g.matches.length-1),f===c)break;k.push(void 0)}return k}}),b.require.register("component-400/src/modules/view.js",function(a,b,c){var d,e,f;d=b("./deps").$,f=0,e=function(){function a(a){var b,c,e,g,h,i,j=this;this.cid="c"+f++,this.options={};for(e in a)switch(g=a[e],e){case"collection":case"model":this[e]=g;break;case"el":this.el=d(g);break;default:this.options[e]=g}this.el instanceof d||(this.el=d("<"+this.tag+"/>")),i=this.events,h=function(a,b){var c,d,e;return e=a.match(j.splitter).slice(1),c=e[0],d=e[1],j.el.on(c,d,function(){return j[b].apply(j,arguments)})};for(b in i)c=i[b],h(b,c);this.views=[],this.autoRender&&this.render()}return a.prototype.autoRender=!1,a.prototype.splitter=/^(\S+)\s*(.*)$/,a.prototype.tag="div",a.prototype.template=function(){return""},a.prototype.render=function(){switch(!1){case!this.collection:this.el.html(this.template({collection:JSON.parse(JSON.stringify(this.collection))}));break;case!this.model:this.el.html(this.template(JSON.parse(JSON.stringify(this.model))));break;default:this.el.html(this.template())}return this},a.prototype.dispose=function(){var a,b,c,d;for(d=this.views,b=0,c=d.length;c>b;b++)a=d[b],a.dispose();return this.el.remove()},a}(),c.exports=e}),b.require.register("component-400/src/templates/app.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("component-400/src/templates/duplicates/row.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;for(this.input&&(c.push('\n    <td rowspan="'),c.push(d(this.rowspan)),c.push('" class="'),c.push(d(this["class"])),c.push('">\n        '),c.push(this.input),c.push("\n        "),this.continuing&&c.push("<em>cont.</em>"),c.push("\n    </td>\n")),c.push("\n"),f=this.fields,b=0,e=f.length;e>b;b++)a=f[b],c.push("\n    <td>\n        "),a&&(c.push("\n            <a>"),c.push(a),c.push("</a>\n            "),this.showFlyout&&c.push('\n                <span class="help-flyout">i</span>\n            '),c.push("\n        ")),c.push("\n    </td>\n");c.push("\n"),this.selected?c.push('\n    <td><span class="tiny secondary button">Remove</span></td>\n'):c.push('\n    <td><span class="tiny success button">Add</span></td>\n')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("component-400/src/templates/duplicates/table-head-full.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;for(c.push('<tr>\n    <th rowspan="2">Identifier you provided</th>\n    <th colspan="'),c.push(d(this.fields.length)),c.push('">Matches <span data-id="matches" class="help hint--left">i</span></th>\n    <th rowspan="2">Action <span data-id="add" class="help hint--left">i</span></th>\n</tr>\n<tr>\n    '),f=this.fields,b=0,e=f.length;e>b;b++)a=f[b],c.push('\n    <th data-key="'),c.push(d(a.key)),c.push('">'),c.push(d(a.name)),c.push("</th>\n    ");c.push("\n</tr>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("component-400/src/templates/duplicates/table-head-slim.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<tr>\n    <th>Identifier you provided <span data-id="provided" class="help hint--right">i</span></a></th>\n    <th>Matches <span data-id="matches" class="help hint--left">i</span></th>\n    <th>Action <span data-id="add" class="help hint--left">i</span></th>\n</tr>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("component-400/src/templates/duplicates/table.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<header>\n    <span class="small secondary remove-all button">Remove all</span>\n    <span class="small success add-all button">Add all</span>\n    <h2>Duplicates found - which one(s) do you want?</h2>\n    <span data-id="1" class="help hint--left">i</span>\n</header>\n\n<div class="paginator"></div>\n\n<table class="striped">\n    <thead>\n        <tr>\n            <th>Identifier you provided <span data-id="provided" class="help hint--right">i</span></a></th>\n            <th>Matches <span data-id="matches" class="help hint--left">i</span></th>\n            <th>Action <span data-id="add" class="help hint--left">i</span></th>\n        </tr>\n    </thead>\n    <tbody></tbody>\n</table>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("component-400/src/templates/flyout.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,d,e,f,g,h;for(c.push("<table>\n    "),h=this.rows,d=0,f=h.length;f>d;d++){for(b=h[d],c.push("\n        <tr>\n            "),e=0,g=b.length;g>e;e++)a=b[e],c.push("\n                <td>"),c.push(a),c.push("</td>\n            ");c.push("\n        </tr>\n    ")}c.push("\n</table>")}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("component-400/src/templates/header.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push("<header>\n    "),1===this.selected?(c.push('\n        <a class="success button save">Save a list of 1 '),c.push(d(this.type)),c.push("</a>\n    ")):(c.push('\n        <a class="success button save">Save a list of '),c.push(d(this.selected)),c.push(" "),c.push(d(this.type)),c.push("s</a>\n    ")),c.push("\n\n    <table>\n        <tr>\n            <td>You entered:</td>\n            <td>"),c.push(d(this.entered)),c.push(" identifier"),1!==this.entered&&c.push("s"),c.push("</td>\n        </tr>\n        <tr>\n            <td>We found:</td>\n            <td>"),c.push(d(this.found)),c.push(" "),c.push(d(this.type)),1!==this.found&&c.push("s"),c.push("</td>\n        </tr>\n    </table>\n\n    "),this.entered!==this.found&&c.push("\n        <p>Why are the numbers different? See below.</p>\n    "),c.push("\n</header>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("component-400/src/templates/paginator.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f,g,h,i,j;if(c.push("<!-- does it make sense to show a perPage switcher? -->\n"),this.total>5){for(c.push('\n    <div class="small button dropdown secondary right">\n        '),c.push(d(this.perPage)),c.push(' rows per page\n        <ul class="no-hover">\n            '),i=[5,10,20,50,100],e=0,g=i.length;g>e;e++)a=i[e],a<=this.total&&(c.push("\n                "),a!==this.perPage&&(c.push('\n                    <li data-action="resize" data-n="'),c.push(d(a)),c.push('">\n                        <a>Show '),c.push(d(a)),c.push(" rows</a>\n                    </li>\n                ")),c.push("\n            "));c.push("\n            <!-- show all rows? -->\n            "),this.total<=50&&this.total!==this.perPage&&(c.push('\n                <li class="divider"></li>\n                <li data-action="resize" data-n="'),c.push(d(this.total)),c.push('">\n                    <a>Show all rows</a>\n                </li>\n            ')),c.push("\n        </ul>\n    </div>\n")}if(c.push('\n\n<!-- do we need to show a paginator? -->\n<ul class="pagination">\n    '),this.pages>1){for(c.push('\n        <li class="unavailable"><a>Page '),c.push(d(this.current)),c.push(" of "),c.push(d(this.pages)),c.push("</a></li>\n        "),1===this.current?c.push('\n            <li class="unavailable arrow"><a>&lsaquo;</a></li>\n        '):c.push('\n            <li class="arrow" data-action="prev" title="Previous"><a>&lsaquo;</a></li>\n        '),c.push("\n\n        "),j=this.range,f=0,h=j.length;h>f;f++)b=j[f],c.push("\n            "),null===b?c.push('\n                <li class="unavailable"><a>&hellip;</a></li>\n            '):(c.push('\n                <li data-action="select" data-n="'),c.push(d(b)),c.push('"\n                    '),b===this.current&&c.push('\n                        class="current"\n                    '),c.push("\n                ><a>"),c.push(d(b)),c.push("</a></li>\n            ")),c.push("\n        ");c.push("\n\n        "),this.current===this.pages?c.push('\n            <li class="unavailable arrow"><a>&rsaquo;</a></li>\n        '):c.push('\n            <li class="arrow" data-action="next" title="Next"><a>&rsaquo;</a></li>\n        '),c.push("\n    ")}c.push("\n</ul>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("component-400/src/templates/summary/tab.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push("<a>"),c.push(d(this.name)),c.push('s <span data-id="'),c.push(d(this.reason)),c.push('" class="help hint--top">i</span></a>')}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("component-400/src/templates/summary/tabs.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push("<header>\n    "),this.options.showDownloadSummary&&(c.push("\n        "),this.canDownload?c.push('\n            <span class="small download button">Download summary</span>\n        '):c.push('\n            <span data-id="noblob" class="help hint--left right">i</span>\n            <span class="small secondary disabled button">Download summary</span>\n        '),c.push("\n    ")),c.push('\n    <h2>Summary</h2>\n    <span data-id="2" class="help hint--right">i</span>\n</header>\n<dl class="tabs contained"></dl>\n<ul class="tabs-content contained"></ul>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("component-400/src/templates/table/many-to-one-row.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f,g,h,i,j;if(this.input){for(c.push('\n    <td rowspan="'),c.push(d(this.rowspan)),c.push('" class="'),c.push(d(this["class"])),c.push('">\n        <ul class="inline">\n            '),i=this.input,e=0,g=i.length;g>e;e++)b=i[e],c.push("\n                <li>"),c.push(b),c.push("</li>\n            ");c.push("\n        </ul>\n        "),1!==this.input.length&&c.push('\n            <span data-id="5" class="help">i</span>\n        '),c.push("\n    </td>\n")}for(c.push("\n"),j=this.fields,f=0,h=j.length;h>f;f++)a=j[f],c.push("\n    <td>\n        "),a&&(c.push("\n            <a>"),c.push(a),c.push("</a>\n            "),this.showFlyout&&c.push('\n                <span class="help-flyout">i</span>\n            '),c.push("\n        ")),c.push("\n    </td>\n")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("component-400/src/templates/table/one-to-many-row.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;for(this.input&&(c.push('\n    <td rowspan="'),c.push(d(this.rowspan)),c.push('" class="'),c.push(d(this["class"])),c.push('">\n        '),c.push(this.input),c.push("\n        "),this.continuing&&c.push("<em>cont.</em>"),c.push("\n    </td>\n")),c.push("\n"),f=this.fields,b=0,e=f.length;e>b;b++)a=f[b],c.push("\n    <td>\n        "),a&&(c.push("\n            <a>"),c.push(a),c.push("</a>\n            "),this.showFlyout&&c.push('\n                <span class="help-flyout">i</span>\n            '),c.push("\n        ")),c.push("\n    </td>\n")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("component-400/src/templates/table/table-head-full.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;for(c.push('<tr>\n    <th rowspan="2">Identifier you provided</th>\n    <th colspan="'),c.push(d(this.fields.length)),c.push('">Match <span data-id="matches" class="help hint--left">i</span></th>\n</tr>\n<tr>\n    '),f=this.fields,b=0,e=f.length;e>b;b++)a=f[b],c.push('\n    <th data-key="'),c.push(d(a.key)),c.push('">'),c.push(d(a.name)),c.push("</th>\n    ");c.push("\n</tr>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("component-400/src/templates/table/table-head-slim.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<tr>\n    <th>Identifier you provided</th>\n    <th>Match <span data-id="matches" class="help hint--left">i</span></th>\n</tr>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("component-400/src/templates/table/table.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=a.safe,e=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},e||(e=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){c.push('<div class="paginator"></div>\n\n<table class="striped">\n    <thead></thead>\n    <tbody></tbody>\n</table>')}).call(this)}.call(a),a.safe=d,a.escape=e,c.join("")}}),b.require.register("component-400/src/templates/unresolved.js",function(a,b,c){c.exports=function(a){a||(a={});var b,c=[],d=function(a){return a&&a.ecoSafe?a:"undefined"!=typeof a&&null!=a?f(a):""},e=a.safe,f=a.escape;return b=a.safe=function(a){if(a&&a.ecoSafe)return a;("undefined"==typeof a||null==a)&&(a="");var b=new String(a);return b.ecoSafe=!0,b},f||(f=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var a,b,e,f;for(c.push('<header>\n    <h2>No matches found</h2>\n    <span data-id="4" class="help hint--top">i</span>\n</header>\n\n<ul class="inline">\n    '),f=this.collection,b=0,e=f.length;e>b;b++)a=f[b],c.push("\n        <li>"),c.push(d(a)),c.push("</li>\n    ");c.push("\n</ul>")}).call(this)}.call(a),a.safe=e,a.escape=f,c.join("")}}),b.require.register("component-400/src/views/app.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("../modules/deps").$,k=b("../modules/mediator"),j=b("../modules/view"),l=b("../models/tooltips"),g=b("./header"),f=b("./duplicates"),i=b("./unresolved"),h=b("./summary"),g=b("./header"),e=function(a){function c(){return m=c.__super__.constructor.apply(this,arguments)}return o(c,a),c.prototype.autoRender=!0,c.prototype.template=b("../templates/app"),c.prototype.events={"mouseover .help":"addTooltip"},c.prototype.render=function(){var a;return c.__super__.render.apply(this,arguments),this.el.append(new g({db:this.options.db}).render().el),(a=this.options.db.duplicates).length&&this.el.append(new f({collection:a}).render().el),this.el.append(new h({matches:this.options.db.matches}).render().el),(a=this.options.db.data.unresolved).length&&this.el.append(new i({collection:a}).render().el),this},c.prototype.addTooltip=function(a){var b;return b=d(a.target),b.addClass("hint--bounce"),a.target.setAttribute("data-hint",l[b.data("id")])},c}(j),c.exports=e}),b.require.register("component-400/src/views/duplicates.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p={}.hasOwnProperty,q=function(a,b){function c(){this.constructor=a}for(var d in b)p.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};m=b("../modules/deps")._,j=b("../modules/formatter"),k=b("../modules/mediator"),l=b("../modules/options"),i=b("../modules/view"),g=b("../views/flyout"),h=b("../views/table"),d=h.TableRowView,e=function(a){function c(){return n=c.__super__.constructor.apply(this,arguments)}return q(c,a),c.prototype.template=b("../templates/duplicates/row"),c.prototype.events=m.extend({},d.prototype.events,{"click .button":"toggle"}),c.prototype.toggle=function(){var a;return null==(a=this.model).selected&&(a.selected=!1),this.model.selected=!this.model.selected,k.trigger("item:toggle",this.model.selected,this.model.id),this.render()},c}(d),f=function(a){function c(){return o=c.__super__.constructor.apply(this,arguments)}return q(c,a),c.prototype.template={table:b("../templates/duplicates/table"),thead:{slim:b("../templates/duplicates/table-head-slim"),full:b("../templates/duplicates/table-head-full")}},c.prototype.rowClass=e,c.prototype.events={"click .button.add-all":"addAll","click .button.remove-all":"removeAll"},c.prototype.render=function(){return this.el.addClass("duplicates section"),c.__super__.render.apply(this,arguments)},c.prototype.addAll=function(){return this.doAll(!0)},c.prototype.removeAll=function(){return this.doAll(!1)},c.prototype.doAll=function(a){var b,c,d,e,f,g,h,i;for(h=this.collection,d=0,f=h.length;f>d;d++)for(b=h[d],i=b.matches,e=0,g=i.length;g>e;e++)c=i[e],k.trigger("item:toggle",c.selected=a,c.id);return this.renderPage.apply(this,this.range)},c}(h.OtMTableView),c.exports=f}),b.require.register("component-400/src/views/flyout.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=b("../modules/formatter"),e=b("../modules/view"),d=function(a){function c(){c.__super__.constructor.apply(this,arguments),this.el.addClass("flyout")}return h(c,a),c.prototype.template=b("../templates/flyout"),c.prototype.render=function(){return this.el.html(this.template({rows:f.flyout(this.model)})),this},c}(e),c.exports=d}),b.require.register("component-400/src/views/header.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=b("../modules/mediator"),e=b("../modules/view"),d=function(a){function c(){c.__super__.constructor.apply(this,arguments),this.found=mori.count(this.options.db.selected),f.on("item:toggle",this.render,this)}return h(c,a),c.prototype.template=b("../templates/header"),c.prototype.events={"click .button.save":"save"},c.prototype.render=function(){return this.el.addClass("header section"),this.el.html(this.template({selected:mori.count(this.options.db.selected),type:this.options.db.type,entered:this.options.db.data.stats.identifiers.all,found:this.found})),this},c.prototype.save=function(){return f.trigger("app:save")},c}(e),c.exports=d}),b.require.register("component-400/src/views/paginator.js",function(a,b,c){var d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=b("../modules/deps"),d=i.$,h=i._,g=b("../modules/mediator"),f=b("../modules/view"),e=function(a){function c(){var a,b,d;c.__super__.constructor.apply(this,arguments),null==(a=this.options).total&&(a.total=0),null==(b=this.options).perPage&&(b.perPage=5),null==(d=this.options).current&&(d.current=1)}return k(c,a),c.prototype.template=b("../templates/paginator"),c.prototype.events={"click a":"onclick","click div.dropdown":"dropdown"},c.prototype.render=function(){var a,b,c=this;return this.options.pages=Math.ceil(this.options.total/this.options.perPage),function(){var a,b,d,e,f,g,i,j,k,l,m;if(c.options.range=[],1!==c.options.pages){for(d=c.options.current-2,b=c.options.current+2,(a=c.options.pages-b)<0&&(d+=a),(a=1-d)>0&&(b+=a),g=function(){l=[];for(var a=k=Math.max(1,d),e=Math.min(c.options.pages,b);e>=k?e>=a:a>=e;e>=k?a++:a--)l.push(a);return l}.apply(this),g.push(1),g.push(c.options.pages),g=h.unique(g).sort(function(a,b){return a-b}),c.options.range=[],f=g[0]-1,m=[],i=0,j=g.length;j>i;i++){if(e=g[i],f)switch(!1){case f+2!==e:c.options.range.push(f+1);break;case!(e>f+1):c.options.range.push(null)}m.push(c.options.range.push(f=e))}return m}}(),this.el.html(this.template(this.options)),b=Math.min((a=(this.options.current-1)*this.options.perPage)+this.options.perPage,this.options.total),g.trigger("page:change",this.cid,a,b),this},c.prototype.onclick=function(a){var b,c;switch(b=(c=d(a.target).closest("li")).data("action")){case"select":case"resize":this[b](parseInt(c.data("n")));break;case"first":case"prev":case"next":case"last":this[b]()}return this.render(),a.preventDefault(),!1},c.prototype.first=function(){return this.select(0)},c.prototype.prev=function(){return this.select(Math.max(1,this.options.current-1))},c.prototype.next=function(){return this.select(Math.min(this.options.pages,this.options.current+1))},c.prototype.last=function(){return this.select(this.options.pages-1)},c.prototype.select=function(a){return this.options.current=a},c.prototype.resize=function(a){var b;
return b=1+this.options.perPage*(this.options.current-1),this.options.perPage=a,this.options.current=Math.ceil(b/this.options.perPage)},c.prototype.dropdown=function(){return this.el.find(".dropdown ul").toggleClass("show-dropdown")},c}(f),c.exports=e}),b.require.register("component-400/src/views/summary.js",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={}.hasOwnProperty,r=function(a,b){function c(){this.constructor=a}for(var d in b)q.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};p=b("../modules/deps"),o=p._,n=p.saveAs,l=b("../modules/mediator"),k=b("../modules/formatter"),m=b("../modules/options"),j=b("../modules/csv"),i=b("../modules/view"),h=b("./table"),d=function(a){function c(){c.__super__.constructor.apply(this,arguments);try{this.canDownload=!!new Blob}catch(a){}}return r(c,a),c.prototype.template=b("../templates/summary/tabs"),c.prototype.events={"click .button.download":"download"},c.prototype.canDownload=!1,c.prototype.render=function(){var a,b,c,d,h,i,j,k,n,p,q,r;for(this.el.addClass("summary section"),this.el.html(this.template({canDownload:this.canDownload,options:m.get()})),j=this.el.find(".tabs"),c=this.el.find(".tabs-content"),i=o.once(function(a){return l.trigger("tab:switch",a)}),q=this.options.matches,n=0,p=q.length;p>n;n++)r=q[n],d=r.name,b=r.collection,h=r.reason,"UNRESOLVED"!==h&&(this.views.push(k=new f({model:{name:d,reason:h.toLowerCase()},reason:h})),j.append(k.render().el),a="MATCH"===h?e:g,this.views.push(k=new a({collection:b,reason:h})),c.append(k.render().el),i(h));return this},c.prototype.download=function(){var a,b,c,d,e,f,g,h,i,l,m,o,p,q,r,s,t,u,v,w,x,y;for(d=null,l=[],a=function(a,b,c){var e,f;return f=k.csv(a,d),d=f[0],e=f[1],l.push([b,i,c].concat(e))},v=this.options.matches,m=0,r=v.length;r>m;m++)for(w=v[m],c=w.collection,i=w.reason,o=0,s=c.length;s>o;o++)switch(g=c[o],i){case"MATCH":for(x=g.input,p=0,t=x.length;t>p;p++)f=x[p],a(g,f,1);break;case"UNRESOLVED":l.push([g,i,0]);break;default:for(y=g.matches,q=0,u=y.length;u>q;q++)h=y[q],a(h,g.input,g.matches.length)}return d=["input","reason","matches"].concat(d),e=j.save([d].concat(l)),b=new Blob([e],{type:"text/csv;charset=utf-8"}),n(b,"summary.csv")},c}(i),f=function(a){function c(){c.__super__.constructor.apply(this,arguments),l.on("tab:switch",function(a){return this.el.toggleClass("active",this.options.reason===a)},this)}return r(c,a),c.prototype.template=b("../templates/summary/tab"),c.prototype.tag="dd",c.prototype.events={"click *":"onclick"},c.prototype.onclick=function(){return l.trigger("tab:switch",this.options.reason)},c}(i),g=function(a){function b(){l.on("tab:switch",function(a){return this.el.toggleClass("active",this.options.reason===a)},this),b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.tag="li",b}(h.OtMTableView),e=function(a){function b(){l.on("tab:switch",function(a){return this.el.toggleClass("active",this.options.reason===a)},this),b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.tag="li",b}(h.MtOTableView),c.exports=d}),b.require.register("component-400/src/views/table.js",function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={}.hasOwnProperty,u=function(a,b){function c(){this.constructor=a}for(var d in b)t.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};r=b("../modules/deps"),q=r._,c=r.$,n=b("../modules/mediator"),m=b("../modules/formatter"),o=b("../modules/options"),l=b("../modules/view"),i=b("./paginator"),e=b("./flyout"),p=b("../modules/slicer"),d=function(){var a;return a=[],a.set={},a.add=function(b){var c;if(!a.set[b])return c={key:b,name:m.field(b)},a.set[b]=c,a.push(c)},a},j=function(a){function d(){d.__super__.constructor.apply(this,arguments),this.strategy=o.get("matchViewStrategy")}return u(d,a),d.prototype.template=b("../templates/table/one-to-many-row"),d.prototype.tag="tr",d.prototype.events={"mouseover .help-flyout":"toggleFlyout","mouseout .help-flyout":"toggleFlyout","click a":"portal"},d.prototype.render=function(){var a,b,c,d,e,f;switch(a=[],c=!0,this.strategy){case"full":if(this.options.fields){for(f=this.options.fields,d=0,e=f.length;e>d;d++)b=f[d].key,a.push(this.model.summary[b]);c=!1}break;case"slim":a.push(m.primary(this.model))}return this.el.html(this.template({fields:a,input:this.options.input||this.model.input,rowspan:this.options.rowspan,"class":this.options["class"],showFlyout:c,selected:this.model.selected||!1,continuing:this.options.continuing||!1})),this},d.prototype.toggleFlyout=function(a){var b,d,f,g,h;switch(a.type){case"mouseover":return this.views.push(b=new e({model:this.model})),c(a.target).append(b.render().el);case"mouseout":for(g=this.views,h=[],d=0,f=g.length;f>d;d++)b=g[d],h.push(b.dispose());return h}},d.prototype.portal=function(a){return n.trigger("object:click",this.model,a.target)},d}(l),k=function(a){function c(){c.__super__.constructor.apply(this,arguments),this.strategy=o.get("matchViewStrategy")}return u(c,a),c.prototype.template={table:b("../templates/table/table"),thead:{slim:b("../templates/table/table-head-slim"),full:b("../templates/table/table-head-full")}},c}(l),h=function(a){function b(){var a=this;b.__super__.constructor.apply(this,arguments),this.pagin=new i({total:function(){var b;return b=0,q.reduce(a.collection,function(a,c){return a+=c.length=c.matches.length,c.range=[b,a-1],b=a,a},0)}()}),n.on("page:change",function(a,b,c){return a===this.pagin.cid?this.renderPage.call(this,b,c-1):void 0},this)}return u(b,a),b.prototype.rowClass=j,b.prototype.render=function(){return this.el.html(this.template.table()),this.el.find(".paginator").html(this.pagin.render().el),this},b.prototype.renderPage=function(a,b){var c,e,f;for(this.range=[a,b];this.views.length;)this.views.pop().dispose();return c=new d,e=0,p.apply(this,[this.collection].concat(this.range,function(a,b,d){var f,g,h,i,j;f=a.input,h=a.matches,j=h.slice(b,+d+1||9e9);for(g in j)i=j[g],this.views.push(new this.rowClass(function(){return"0"!==g?{model:i,fields:c}:{model:i,fields:c,rowspan:d-b+1,"class":["even","odd"][e%2],continuing:0!==b,input:[f]}}())),q.each(q.keys(i.summary),c.add);return e++})),this.el.find("thead").html(this.template.thead[this.strategy]({fields:c})),f=this.el.find("tbody"),q.each(this.views,function(a){return f.append(a.render().el)})},b}(k),f=function(a){function c(){return s=c.__super__.constructor.apply(this,arguments)}return u(c,a),c.prototype.template=b("../templates/table/many-to-one-row"),c}(j),g=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.pagin=new i({total:this.collection.length}),n.on("page:change",function(a,b,c){return a===this.pagin.cid?this.renderPage.call(this,b,c-1):void 0},this)}return u(b,a),b.prototype.rowClass=f,b.prototype.render=function(){return this.el.html(this.template.table()),this.el.find(".paginator").html(this.pagin.render().el),this},b.prototype.renderPage=function(a,b){var c,e,f,g,h,i;for(this.range=[a,b];this.views.length;)this.views.pop().dispose();for(c=new d,i=this.collection.slice(a,+b+1||9e9),g=0,h=i.length;h>g;g++)e=i[g],this.views.push(new this.rowClass({model:e,fields:c})),q.each(q.keys(e.summary),c.add);return this.el.find("thead").html(this.template.thead[this.strategy]({fields:c})),f=this.el.find("tbody"),q.each(this.views,function(a){return f.append(a.render().el)})},b}(k),a.TableRowView=j,a.OtMTableView=h,a.MtOTableView=g}),b.require.register("component-400/src/views/unresolved.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("../modules/view"),d=function(a){function c(){return f=c.__super__.constructor.apply(this,arguments)}return h(c,a),c.prototype.template=b("../templates/unresolved"),c.prototype.render=function(){return this.el.addClass("unresolved section"),c.__super__.render.apply(this,arguments)},c}(e),c.exports=d})}();var c=b.require("component-400/src/app.js");"undefined"!=typeof define&&define.amd?define("component-400",[],function(){return c}):"undefined"!=typeof module&&module.exports?module.exports=c:b["component-400"]=c,b.require.alias("component-400/src/app.js","component-400/index.js")}();