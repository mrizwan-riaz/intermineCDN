(function(l){var a={},i=Array.prototype,d=Object.prototype,j=d.hasOwnProperty,m=d.toString,o=i.forEach,b=i.indexOf,k=i.slice;var p=function(x,w,v){var u,t,s;if(!x){return}if(o&&x.forEach===o){x.forEach(w,v)}else{if(x.length===+x.length){for(t=0,s=x.length;t<s;t++){if(t in x&&w.call(v,x[t],t,x)===a){return}}}else{for(u in x){if(j.call(x,u)){if(w.call(v,x[u],u,x)===a){return}}}}}};var r=function(s){return !!(s&&s.constructor&&s.call&&s.apply)};var g=function(s){p(k.call(arguments,1),function(t){var u;for(u in t){if(t[u]!==void 0){s[u]=t[u]}}});return s};var h=function(v,t,u){var s;if(t){if(b){return b.call(t,v,u)}s=t.length;u=u?u<0?Math.max(0,s+u):u:0;for(;u<s;u++){if(u in t&&t[u]===v){return u}}}return -1};var c={};p("Boolean Number String Function Array Date RegExp Object".split(" "),function(s,t){c["[object "+s+"]"]=s.toLowerCase()});var q=function(s){return s==null?String(s):c[m.call(s)]||"object"};var f={};var e={};function n(t){var s=e[t]={};p(t.split(/\s+/),function(u){s[u]=true});return s}f.Callbacks=function(C){C=typeof C==="string"?(e[C]||n(C)):g({},C);var v,s,w,u,x,y,z=[],A=!C.once&&[],t=function(D){v=C.memory&&D;s=true;y=u||0;u=0;x=z.length;w=true;for(;z&&y<x;y++){if(z[y].apply(D[0],D[1])===false&&C.stopOnFalse){v=false;break}}w=false;if(z){if(A){if(A.length){t(A.shift())}}else{if(v){z=[]}else{B.disable()}}}},B={add:function(){if(z){var E=z.length;(function D(F){p(F,function(G){var H=q(G);if(H==="function"&&(!C.unique||!B.has(G))){z.push(G)}else{if(G&&G.length&&H!=="string"){D(G)}}})})(arguments);if(w){x=z.length}else{if(v){u=E;t(v)}}}return this},remove:function(){if(z){p(arguments,function(D){var E;while((E=h(D,z,E))>-1){z.splice(E,1);if(w){if(E<=x){x--}if(E<=y){y--}}}})}return this},has:function(D){return h(D,z)>-1},empty:function(){z=[];return this},disable:function(){z=A=v=undefined;return this},disabled:function(){return !z},lock:function(){A=undefined;if(!v){B.disable()}return this},locked:function(){return !A},fireWith:function(E,D){D=D||[];D=[E,D.slice?D.slice():D];if(z&&(!s||A)){if(w){A.push(D)}else{t(D)}}return this},fire:function(){B.fireWith(this,arguments);return this},fired:function(){return !!s}};return B};f.Deferred=function(u){var t=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],v="pending",w={state:function(){return v},always:function(){s.done(arguments).fail(arguments);return this},then:function(){var x=arguments;return f.Deferred(function(y){p(t,function(z,A){var C=z[0],B=x[A];s[z[1]](r(B)?function(){var D=B.apply(this,arguments);if(D&&r(D.promise)){D.promise().done(y.resolve).fail(y.reject).progress(y.notify)}else{y[C+"With"](this===s?y:this,[D])}}:y[C])});x=null}).promise()},promise:function(x){return typeof x==="object"?g(x,w):w}},s={};w.pipe=w.then;p(t,function(x,y){var A=x[2],z=x[3];w[x[1]]=A.add;if(z){A.add(function(){v=z},t[y^1][2].disable,t[2][2].lock)}s[x[0]]=A.fire;s[x[0]+"With"]=A.fireWith});w.promise(s);if(u){u.call(s,s)}return s};f.when=function(w){var u=0,y=k.call(arguments),s=y.length,t=s!==1||(w&&r(w.promise))?s:0,B=t===1?w:f.Deferred(),v=function(D,E,C){return function(F){E[D]=this;C[D]=arguments.length>1?k.call(arguments):F;if(C===A){B.notifyWith(E,C)}else{if(!(--t)){B.resolveWith(E,C)}}}},A,x,z;if(s>1){A=new Array(s);x=new Array(s);z=new Array(s);for(;u<s;u++){if(y[u]&&r(y[u].promise)){y[u].promise().done(v(u,z,y)).fail(B.reject).progress(v(u,x,A))}else{--t}}}if(!t){B.resolveWith(z,y)}return B.promise()};if(typeof module!=="undefined"&&module.exports){module.exports=f}else{if(typeof l._!=="undefined"){l._.mixin(f)}else{l._=f}}})(this);